---
entity_type: Task
entity_id: "tsk-023-40"
entity_name: "Dashboard - Project Drawer Task 목록 구현"
created: 2026-01-09
updated: 2026-01-09
status: done
closed: 2026-01-09

# === 계층 ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-40"]

# === 관계 ===
outgoing_relations: []
validates: []
validated_by: []

# === Task 전용 ===
assignee: "김은향"
start_date: 2026-01-09
due: 2026-01-09
priority: medium
estimated_hours: null
actual_hours: null

# === Task 유형 (dev Task 연동용) ===
type: dev
target_project: loop

# === 분류 ===
tags: [dashboard, drawer, project-detail, notion-style]
priority_flag: high
---

# Dashboard - Project Drawer Task 목록 구현

> Task ID: `tsk-023-40` | Project: `prj-023` | Status: done

## 목표

**완료 조건**:
1. Project Drawer (edit 모드) 안에 하위 Task 목록이 표시됨
2. Task 클릭 시 Task Drawer가 열림
3. Notion 스타일 UI (collapsible 그룹, 호버 효과)

---

## 상세 내용

### 배경

사용자가 Project Drawer에서 해당 프로젝트의 하위 Task들을 바로 확인하고 이동할 수 있어야 함.
별도 페이지가 아닌 **Drawer 안에서** Notion 스타일로 Task 목록을 표시해야 함.

### 작업 내용

**수정 파일**: `src/features/projects/components/ProjectForm.tsx` (1개)

**구현 위치**: edit 모드의 Hypothesis 섹션 전에 Tasks 섹션 추가

---

## Tech Spec

### 1. Task 필터링 + 그룹핑 로직

```typescript
// edit 모드 시작 직후 (Line ~162)
const projectTasks = useMemo(() => {
    if (!dashboardData?.tasks || !id) return [];
    return dashboardData.tasks.filter((t: Task) => t.project_id === id);
}, [dashboardData?.tasks, id]);

const tasksByStatus = useMemo(() => {
    const groups: Record<string, Task[]> = {
        doing: [], todo: [], hold: [], blocked: [], done: []
    };
    projectTasks.forEach((t: Task) => {
        const status = t.status || 'todo';
        if (groups[status]) groups[status].push(t);
    });
    return groups;
}, [projectTasks]);
```

### 2. Collapsible 상태 관리

```typescript
const [expandedGroups, setExpandedGroups] = useState<Record<string, boolean>>({
    doing: true,    // 기본 펼침
    todo: true,     // 기본 펼침
    hold: false,
    blocked: false,
    done: false,
});

const toggleGroup = (status: string) => {
    setExpandedGroups(prev => ({ ...prev, [status]: !prev[status] }));
};
```

### 3. Task 클릭 핸들러

```typescript
const handleTaskClick = (taskId: string) => {
    openEntityDrawer({ type: 'task', mode: 'edit', id: taskId });
};
```

### 4. UI 구조 (Notion 스타일)

```
┌─────────────────────────────────────────────────┐
│ ─────────────────────────────────────────────── │  Divider
│                                                 │
│ Tasks (36)                                      │  헤더
│                                                 │
│ ▾ doing (3)                           [열기/접기] │  그룹 헤더
│   ┌──────────────────────────────────────────┐  │
│   │ Dashboard - Kanban D&D                   │  │  Task 행
│   │ @김은향  medium                          │  │
│   └──────────────────────────────────────────┘  │
│                                                 │
│ ▸ todo (10)                          [접힌 상태] │
│                                                 │
│ ▸ done (20)                          [접힌 상태] │
└─────────────────────────────────────────────────┘
```

### 5. 상태별 색상

| Status | 아이콘 | 색상 |
|--------|--------|------|
| doing | ● | blue-500 |
| todo | ○ | zinc-400 |
| hold | ◐ | amber-500 |
| blocked | ✕ | red-500 |
| done | ✓ | green-500 |

### 6. 삽입 위치

**현재 코드 (ProjectForm.tsx line 295-300)**:
```tsx
                ) : null;
            })()}
        </div>

        <div className="h-px bg-zinc-200 mx-6 my-2" />

        {/* Hypothesis Text Section */}
```

**삽입 후**:
```tsx
                ) : null;
            })()}
        </div>

        {/* Tasks Section */}
        <div className="h-px bg-zinc-200 mx-6 my-2" />
        <div className="px-6 py-4">
            <h3 className="text-sm font-semibold text-zinc-500 mb-3">
                Tasks ({projectTasks.length})
            </h3>
            {/* 그룹별 Task 목록 */}
            ...
        </div>

        <div className="h-px bg-zinc-200 mx-6 my-2" />

        {/* Hypothesis Text Section */}
```

---

## 체크리스트

- [ ] Task 필터링 로직 추가 (useMemo)
- [ ] 상태별 그룹핑 로직 추가 (useMemo)
- [ ] expandedGroups 상태 관리 추가 (useState)
- [ ] Tasks 섹션 UI 구현
- [ ] 그룹 헤더 (접기/펼치기)
- [ ] Task 행 (Notion 스타일)
- [ ] Task 클릭 → Drawer 열기
- [ ] 빈 그룹 숨김 처리
- [ ] npm run build 통과

---

## Notes

### Todo
- [ ] ProjectForm.tsx에 Tasks 섹션 추가
- [ ] 상태별 그룹 순서: doing → todo → hold → blocked → done
- [ ] 기본 펼침: doing, todo / 기본 접힘: hold, blocked, done
- [ ] 빈 그룹은 표시하지 않음

### 작업 로그

#### 2026-01-09
**개요**: Task 완료 - Project Drawer에 Task 목록 구현

**구현 내용**:
- Task 필터링 및 상태별 그룹핑 로직 추가 (useMemo)
- Collapsible 그룹 상태 관리 (expandedGroups useState)
- Tasks 섹션 UI 구현 (Notion 스타일)
  - 그룹 헤더 (접기/펼치기 기능)
  - Task 행 (상태 아이콘, assignee, priority 표시)
  - 호버 효과 및 클릭 시 Task Drawer 열기
- 빈 그룹 자동 숨김 처리
- 상태별 색상 구분 (doing: blue, todo: zinc, hold: amber, blocked: red, done: green)

**검증**:
- npm run build 통과 확인
- 모든 체크리스트 항목 완료

**최종 상태**: done

**수정 파일**:
- `src/features/projects/components/ProjectForm.tsx` (1개 파일)
  - Line 42-90: Task 필터링 및 그룹핑 로직, 상태 관리
  - Line 210-239: Helper 함수 (toggleGroup, handleTaskClick, getStatusIcon, getStatusColor)
  - Line 378-455: Tasks 섹션 UI 구현


---

## 참고 문서

- [[prj-023]] - 소속 Project
- Plan file: `/Users/gim-eunhyang/.claude/plans/hazy-strolling-prism.md`

---

**Created**: 2026-01-09
**Assignee**: 김은향
**Due**: 2026-01-09
