---
entity_type: Task
entity_id: tsk-023-1768809114457
entity_name: API - Multi-Dock contributes에 reasoning 추가
created: '2026-01-19'
updated: '2026-01-19'
status: done
project_id: prj-023
parent_id: prj-023
assignee: 김은향
priority: medium
start_date: '2026-01-19'
due: '2026-01-19'
aliases:
- tsk-023-1768809114457
tags: []
type: dev
---

# API - Multi-Dock contributes에 reasoning 추가

## 설명

Multi-Dock API의 `condition_contributes`와 `track_contributes` 필드에 reasoning을 추가하여 UI에서 추론 근거 표시 가능하도록 개선.

## 체크리스트

- [x] multi_dock.py 프롬프트 출력 형식 수정
- [x] multi.py 응답 파싱 수정
- [x] main 머지 및 push
- [x] 워크트리 정리

## Changes Made

### api/prompts/multi_dock.py
- `condition_contributes`, `track_contributes` 출력 형식을 `{value: [...], reasoning: "..."}` 구조로 변경

### api/routers/ai/multi.py
- contributes 파싱 로직 추가
- `suggested_fields`에는 value 배열, `reasoning`에는 근거 문자열 추출
- `summary_table` 필드 추가

## API 응답 형식

```json
{
  "suggested_fields": {
    "parent_id": "trk-N",
    "conditions_3y": ["cond-a"],
    "condition_contributes": [{...}],
    "track_contributes": [{...}]
  },
  "reasoning": {
    "parent_id": "...",
    "conditions_3y": "...",
    "condition_contributes": "...",
    "track_contributes": "..."
  },
  "summary_table": [...]
}
```

## 참고

- 커밋: `feat(api): add reasoning to condition_contributes and track_contributes`
- 커밋: `feat(api): add summary_table to multi-dock response`

## 짧은 회고

워크트리 기반 작업 흐름 완료. stash 충돌 해결 과정에서 summary_table 추가도 함께 반영됨.
