---
entity_type: Task
entity_id: tsk-023-34
entity_name: Pending Review - Review Mode 구현
created: 2026-01-09
updated: '2026-01-17'
closed: null
status: done
parent_id: prj-023
project_id: prj-023
aliases:
- tsk-023-34
outgoing_relations: []
validates: []
validated_by: []
assignee: 김은향
start_date: 2026-01-09
due: 2026-01-09
priority: high
estimated_hours: null
actual_hours: null
type: dev
target_project: loop
tags:
- dashboard-v2
- pending-review
- review-mode
- refactor
priority_flag: high
notes: "# Pending Review - Review Mode 구현\n\n> Task ID: `tsk-023-34` | Project: `prj-023`\
  \ | Status: doing\n\n## 목표\n\n**완료 조건**:\n\n1. Pending Review 페이지에서 기존 EntityForm을\
  \ \"Review Mode\"로 재사용\n2. suggested_fields에 있는 필드만 해당 값으로 override + 시각적 강조 (★)\n\
  3. 각 suggested 필드 아래에 reasoning 표시\n4. Relation 필드 클릭 시 이동 대신 오른쪽 패널에 미리보기\n\n---\n\
  \n## 상세 내용\n\n### 배경\n\n현재 ReviewDetail 컴포넌트는 suggested_fields만 표시하는 별도 UI를 사용하고\
  \ 있어:\n\n- 제한된 필드 타입만 지원 (date picker, complex select 등 미지원)\n- EntityForm과 중복 UI\
  \ 구현\n- tsk-023-37모든 필드 편집 불가\n\n**해결책**: 기존 EntityForm에 `mode=\"review\"` 추가하여\
  \ 재사용\n\n### 현재 vs 목표 구조\n\n**현재:**\n\n```\nPending/index.tsx\n├── ReviewList (왼쪽)\n\
  ├── ReviewDetail (중앙) ← 별도 UI, suggested_fields만 표시\n└── Entity Preview (오른쪽)\n\
  ```\n\n**목표:**\n\n```\nPending/index.tsx\n├── ReviewList (왼쪽)\n├── EntityForm mode=\"\
  review\" (중앙) ← 기존 Form 재사용!\n│   ├── suggestedFields prop → 해당 필드 값 override +\
  \ 강조\n│   ├── reasoning prop → 각 필드 아래 표시\n│   └── onRelationClick prop → 오른쪽 패널에\
  \ preview\n└── Relation Preview (오른쪽)\n```\n\n---\n\n## 체크리스트\n\n- [ ] useReviewMode\
  \ 훅 생성\n\n- [ ] ReviewFieldWrapper 컴포넌트 생성\n\n- [ ] TaskForm에 review mode 추가\n\n\
  - [ ] Pending/index.tsx 수정\n\n- [ ] 동작 검증 (Task 기준)\n\n- [ ] ProjectForm에 review\
  \ mode 추가\n\n- [ ] HypothesisForm에 review mode 추가\n\n- [ ] 기존 파일 정리 (삭제)\n\n- [\
  \ ] 빌드 및 최종 검증\n\n---\n\n## Notes\n\n### Tech Spec\n\n핵심 설계 원칙\n\n**1. Props 확장\
  \ 방식 (기존 Form 최소 수정)**\n\n```typescript\ninterface TaskFormProps {\n  mode: 'create'\
  \ | 'edit' | 'view' | 'review';  // review 추가\n  id?: string;\n  prefill?: Partial<Task>;\n\
  \  // Review mode 전용 props\n  suggestedFields?: Record<string, unknown>;\n  reasoning?:\
  \ Record<string, string>;\n  onRelationClick?: (id: string, type: EntityType) =>\
  \ void;\n  onFieldChange?: (field: string, value: unknown) => void;\n}\n```\n\n\
  **2. 값 결정 로직**\n\n```\nsuggested_fields에 해당 필드 있음?\n├── YES → suggested 값 표시 + ★\
  \ 강조 + reasoning\n└── NO → 원본 Entity 값 그대로 표시\n```\n\n**3. Relation 클릭 분기**\n\n\
  ```\nmode === 'review'?\n├── YES → onRelationClick(id, type) → 오른쪽 패널에 preview\n\
  └── NO → pushDrawer({ type, mode, id }) → drawer 스택에 추가 (이동)\n```\n\n파일별 구현\n\n\
  **신규 파일:**\n\n- `src/hooks/useReviewMode.ts` - review mode 상태 관리 훅\n- `src/components/common/ReviewFieldWrapper.tsx`\
  \ - 필드 래퍼 (강조 + reasoning)\n\n**수정 파일:**\n\n- `src/features/tasks/components/TaskForm.tsx`\
  \ - review mode 추가\n- `src/features/projects/components/ProjectForm.tsx` - review\
  \ mode 추가\n- `src/features/strategy/components/HypothesisForm.tsx` - review mode\
  \ 추가\n- `src/pages/Pending/index.tsx` - ReviewDetail → EntityForm 교체\n\n**삭제 파일:**\n\
  \n- `src/features/pending/components/ReviewDetail.tsx`\n- `src/features/pending/components/FieldOptionPills.tsx`\n\
  - `src/features/pending/components/FieldValue.tsx`\n- `src/features/pending/hooks/useFieldOptions.ts`\n\
  \n스타일링\n\n```tsx\n// ReviewFieldWrapper - Tailwind 클래스\nconst wrapperClasses = isSuggested\n\
  \  ? 'border-l-3 border-amber-400 bg-amber-50/50 pl-3 -ml-3'\n  : '';\n\n<div className={wrapperClasses}>\n\
  \  {isSuggested && <span className=\"text-amber-500 mr-1\">★</span>}\n  {children}\n\
  \  {reasoning && (\n    <p className=\"text-xs text-gray-500 italic mt-1\">{reasoning}</p>\n\
  \  )}\n</div>\n```\n\n### 구현 순서\n\n```\nStep 1: useReviewMode 훅 생성\n    ↓\nStep\
  \ 2: ReviewFieldWrapper 컴포넌트 생성\n    ↓\nStep 3: TaskForm에 review mode 추가\n    ↓\n\
  Step 4: Pending/index.tsx 수정 (Task만 먼저)\n    ↓\nStep 5: 동작 검증\n    ↓\nStep 6: ProjectForm,\
  \ HypothesisForm 확장\n    ↓\nStep 7: 기존 파일 정리\n    ↓\nStep 8: 빌드 및 최종 검증\n```\n\n\
  ### Todo\n\n- [ ] useReviewMode 훅 구현\n\n- [ ] ReviewFieldWrapper 컴포넌트 구현\n\n- [\
  \ ] TaskForm review mode 추가\n\n- [ ] Pending 페이지 수정\n\n- [ ] 테스트\n\n---\n\n## 참고\
  \ 문서\n\n- \\[\\[prj-023\\]\\] - 소속 Project\n- \\[\\[tsk-023-27\\]\\] - 선행 Task (Suggested\
  \ Fields 버튼 옵션 선택)\n- Plan file: `/Users/gim-eunhyang/.claude/plans/wiggly-toasting-forest.md`\n\
  \n---\n\n**Created**: 2026-01-09 **Assignee**: 김은향 **Due**: 2026-01-09"
---
# Pending Review - Review Mode 구현

> Task ID: `tsk-023-34` | Project: `prj-023` | Status: doing

## 목표

**완료 조건**:
1. Pending Review 페이지에서 기존 EntityForm을 "Review Mode"로 재사용
2. suggested_fields에 있는 필드만 해당 값으로 override + 시각적 강조 (★)
3. 각 suggested 필드 아래에 reasoning 표시
4. Relation 필드 클릭 시 이동 대신 오른쪽 패널에 미리보기

---

## 상세 내용

### 배경

현재 ReviewDetail 컴포넌트는 suggested_fields만 표시하는 별도 UI를 사용하고 있어:
- 제한된 필드 타입만 지원 (date picker, complex select 등 미지원)
- EntityForm과 중복 UI 구현
- 모든 필드 편집 불가

**해결책**: 기존 EntityForm에 `mode="review"` 추가하여 재사용

### 현재 vs 목표 구조

**현재:**
```
Pending/index.tsx
├── ReviewList (왼쪽)
├── ReviewDetail (중앙) ← 별도 UI, suggested_fields만 표시
└── Entity Preview (오른쪽)
```

**목표:**
```
Pending/index.tsx
├── ReviewList (왼쪽)
├── EntityForm mode="review" (중앙) ← 기존 Form 재사용!
│   ├── suggestedFields prop → 해당 필드 값 override + 강조
│   ├── reasoning prop → 각 필드 아래 표시
│   └── onRelationClick prop → 오른쪽 패널에 preview
└── Relation Preview (오른쪽)
```

---

## 체크리스트

- [ ] useReviewMode 훅 생성
- [ ] ReviewFieldWrapper 컴포넌트 생성
- [ ] TaskForm에 review mode 추가
- [ ] Pending/index.tsx 수정
- [ ] 동작 검증 (Task 기준)
- [ ] ProjectForm에 review mode 추가
- [ ] HypothesisForm에 review mode 추가
- [ ] 기존 파일 정리 (삭제)
- [ ] 빌드 및 최종 검증

---

## Notes

### Tech Spec

#### 핵심 설계 원칙

**1. Props 확장 방식 (기존 Form 최소 수정)**
```typescript
interface TaskFormProps {
  mode: 'create' | 'edit' | 'view' | 'review';  // review 추가
  id?: string;
  prefill?: Partial<Task>;
  // Review mode 전용 props
  suggestedFields?: Record<string, unknown>;
  reasoning?: Record<string, string>;
  onRelationClick?: (id: string, type: EntityType) => void;
  onFieldChange?: (field: string, value: unknown) => void;
}
```

**2. 값 결정 로직**
```
suggested_fields에 해당 필드 있음?
├── YES → suggested 값 표시 + ★ 강조 + reasoning
└── NO → 원본 Entity 값 그대로 표시
```

**3. Relation 클릭 분기**
```
mode === 'review'?
├── YES → onRelationClick(id, type) → 오른쪽 패널에 preview
└── NO → pushDrawer({ type, mode, id }) → drawer 스택에 추가 (이동)
```

#### 파일별 구현

**신규 파일:**
- `src/hooks/useReviewMode.ts` - review mode 상태 관리 훅
- `src/components/common/ReviewFieldWrapper.tsx` - 필드 래퍼 (강조 + reasoning)

**수정 파일:**
- `src/features/tasks/components/TaskForm.tsx` - review mode 추가
- `src/features/projects/components/ProjectForm.tsx` - review mode 추가
- `src/features/strategy/components/HypothesisForm.tsx` - review mode 추가
- `src/pages/Pending/index.tsx` - ReviewDetail → EntityForm 교체

**삭제 파일:**
- `src/features/pending/components/ReviewDetail.tsx`
- `src/features/pending/components/FieldOptionPills.tsx`
- `src/features/pending/components/FieldValue.tsx`
- `src/features/pending/hooks/useFieldOptions.ts`

#### 스타일링

```tsx
// ReviewFieldWrapper - Tailwind 클래스
const wrapperClasses = isSuggested
  ? 'border-l-3 border-amber-400 bg-amber-50/50 pl-3 -ml-3'
  : '';

<div className={wrapperClasses}>
  {isSuggested && <span className="text-amber-500 mr-1">★</span>}
  {children}
  {reasoning && (
    <p className="text-xs text-gray-500 italic mt-1">{reasoning}</p>
  )}
</div>
```

### 구현 순서

```
Step 1: useReviewMode 훅 생성
    ↓
Step 2: ReviewFieldWrapper 컴포넌트 생성
    ↓
Step 3: TaskForm에 review mode 추가
    ↓
Step 4: Pending/index.tsx 수정 (Task만 먼저)
    ↓
Step 5: 동작 검증
    ↓
Step 6: ProjectForm, HypothesisForm 확장
    ↓
Step 7: 기존 파일 정리
    ↓
Step 8: 빌드 및 최종 검증
```

### Todo

- [ ] useReviewMode 훅 구현
- [ ] ReviewFieldWrapper 컴포넌트 구현
- [ ] TaskForm review mode 추가
- [ ] Pending 페이지 수정
- [ ] 테스트

---

## 참고 문서

- [[prj-023]] - 소속 Project
- [[tsk-023-27]] - 선행 Task (Suggested Fields 버튼 옵션 선택)
- Plan file: `/Users/gim-eunhyang/.claude/plans/wiggly-toasting-forest.md`

---

**Created**: 2026-01-09
**Assignee**: 김은향
**Due**: 2026-01-09
