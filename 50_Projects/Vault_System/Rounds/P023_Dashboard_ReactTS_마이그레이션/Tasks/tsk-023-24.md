---
entity_type: Task
entity_id: "tsk-023-24"
entity_name: "Pending - Workflow/Run í•„í„° ê¸°ëŠ¥"
created: 2026-01-08
updated: 2026-01-08
status: done

# === ê³„ì¸µ ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-24"]

# === ê´€ê³„ ===
outgoing_relations: []
validates: []
validated_by: []

# === Task ì „ìš© ===
assignee: "ê¹€ì€í–¥"
start_date: 2026-01-08
due: 2026-01-08
priority: medium
estimated_hours: null
actual_hours: null

# === Task ìœ í˜• (dev Task ì—°ë™ìš©) ===
type: dev
target_project: loop

# === ë¶„ë¥˜ ===
tags: ["dashboard", "pending", "filter", "react"]
priority_flag: medium
---

# Pending - Workflow/Run í•„í„° ê¸°ëŠ¥

> Task ID: `tsk-023-24` | Project: `prj-023` | Status: done

## ëª©í‘œ

**ì™„ë£Œ ì¡°ê±´**:
1. Pending í˜ì´ì§€ì—ì„œ Workflow ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ source_workflow í•„í„°ë§ ê°€ëŠ¥
2. Pending í˜ì´ì§€ì—ì„œ Run ID ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ run_id í•„í„°ë§ ê°€ëŠ¥
3. Delete Filtered ë²„íŠ¼ìœ¼ë¡œ í•„í„°ëœ ë¦¬ë·° ì¼ê´„ ì‚­ì œ ê°€ëŠ¥
4. ReviewCardì— workflow/run_id/AUTO-SYNTH ë±ƒì§€ í‘œì‹œ

---

## ìƒì„¸ ë‚´ìš©

### ë°°ê²½

ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œ `_dashboard/js/components/pending-panel.js`ì— êµ¬í˜„ëœ workflow/run í•„í„° ê¸°ëŠ¥ì„ React ëŒ€ì‹œë³´ë“œ(dashboard-v2)ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜.

**ë ˆê±°ì‹œ ê¸°ëŠ¥**:
- `filterWorkflow`, `filterRunId` ìƒíƒœ ê´€ë¦¬
- `updateFilterDropdowns()` - ë“œë¡­ë‹¤ìš´ ì˜µì…˜ ì—…ë°ì´íŠ¸
- `getFilteredReviews(status)` - í•„í„° ì ìš©ëœ ë¦¬ë·° ë°˜í™˜
- `deleteFiltered()` - í•„í„°ëœ ë¦¬ë·° ì¼ê´„ ì‚­ì œ
- ReviewCardì— workflow/run_id ë±ƒì§€, AUTO-SYNTH ë±ƒì§€

**ë°±ì—”ë“œ API ìƒíƒœ**:
- `DELETE /api/pending/batch` ì´ë¯¸ ì¡´ì¬ (source_workflow, run_id, status í•„í„° ì§€ì›)
- `GET /api/pending` ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì§€ì› (source_workflow, run_id)

### ì‘ì—… ë‚´ìš©

1. **ReviewCard ê°œì„ ** - run_id ë±ƒì§€, AUTO-SYNTH ë±ƒì§€ ì¶”ê°€
2. **WorkflowFilters ì»´í¬ë„ŒíŠ¸** - ë“œë¡­ë‹¤ìš´ 2ê°œ + Delete Filtered ë²„íŠ¼
3. **usePendingFilters í›…** - í•„í„° ìƒíƒœ ê´€ë¦¬ + í•„í„°ë§ ë¡œì§
4. **API í´ë¼ì´ì–¸íŠ¸** - deleteBatch í•¨ìˆ˜ ì¶”ê°€
5. **PendingPage í†µí•©** - ì»´í¬ë„ŒíŠ¸ ì¡°ë¦½

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ReviewCard.tsx ìˆ˜ì • (run_id, AUTO-SYNTH ë±ƒì§€)
- [ ] WorkflowFilters.tsx ìƒì„±
- [ ] usePendingFilters.ts í›… ìƒì„±
- [ ] api.tsì— deleteBatch ì¶”ê°€
- [ ] PendingPage í†µí•©
- [ ] ë¹Œë“œ í™•ì¸

---

## Notes

### Tech Spec

```
íŒŒì¼ ë³€ê²½ ëª©ë¡:
â”œâ”€â”€ src/features/pending/components/ReviewCard.tsx (ìˆ˜ì •)
â”œâ”€â”€ src/features/pending/components/WorkflowFilters.tsx (ì‹ ê·œ)
â”œâ”€â”€ src/features/pending/components/index.ts (ìˆ˜ì •)
â”œâ”€â”€ src/features/pending/hooks/usePendingFilters.ts (ì‹ ê·œ)
â”œâ”€â”€ src/features/pending/api.ts (ìˆ˜ì •)
â”œâ”€â”€ src/features/pending/queries/index.ts (ìˆ˜ì •)
â””â”€â”€ src/pages/Pending/index.tsx (ìˆ˜ì •)
```

### Todo
- [ ] Step 1: ReviewCard ê°œì„ 
- [ ] Step 2: WorkflowFilters ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [ ] Step 3: usePendingFilters í›… ìƒì„±
- [ ] Step 4: API í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€
- [ ] Step 5: PendingPage í†µí•©

### Codex Review Summary (2026-01-08)

**Critical Issues Found**: 0
**Suggestions**: 8

#### Edge Cases to Handle:
1. **Empty filter state**: Delete Filtered ë²„íŠ¼ì€ í•„í„°ê°€ ì—†ì„ ë•Œ ë¹„í™œì„±í™” (ë ˆê±°ì‹œì™€ ë™ì¼)
2. **Confirmation dialog**: ì¼ê´„ ì‚­ì œ ì „ confirm() í•„ìˆ˜ (ë ˆê±°ì‹œ êµ¬í˜„ ì°¸ì¡°)
3. **Loading state**: Delete ì¤‘ ë²„íŠ¼ ë¹„í™œì„±í™”ë¡œ ì¤‘ë³µ í´ë¦­ ë°©ì§€

#### UX Clarifications (ë ˆê±°ì‹œ ë™ì‘ ë”°ë¦„):
- Workflow/Run ID: ë‹¨ì¼ ì„ íƒ ë“œë¡­ë‹¤ìš´ (statusëŠ” íƒ­ìœ¼ë¡œ ì´ë¯¸ ë¶„ë¦¬ë¨)
- ë“œë¡­ë‹¤ìš´ ì˜µì…˜: í˜„ì¬ ë¦¬ë·° ë°ì´í„°ì—ì„œ ë™ì  ì¶”ì¶œ (ì„œë²„ í˜¸ì¶œ ì—†ìŒ)
- Run ID í‘œì‹œ: 24ì ì´ˆê³¼ ì‹œ truncate (ë ˆê±°ì‹œ: `substring(0, 24) + '...'`)
- AUTO-SYNTH ë±ƒì§€: `source_workflow === 'retro-synth'` ì¡°ê±´

#### Technical Decisions:
- í•„í„° ìƒíƒœ: URL params ì•„ë‹Œ ë¡œì»¬ state (íƒ­ ì „í™˜ ì‹œ ì´ˆê¸°í™”)
- Query invalidation: deleteBatch í›„ usePendingReviews refetch
- Error handling: catch + toast (ê¸°ì¡´ íŒ¨í„´ ë”°ë¦„)

### ì‘ì—… ë¡œê·¸

#### 2026-01-08 (Completed)
**ê°œìš”**: Pending í˜ì´ì§€ì— Workflow/Run ID í•„í„° ê¸°ëŠ¥ ì¶”ê°€ ì™„ë£Œ. ReviewCard ë±ƒì§€ ê°œì„ , WorkflowFilters ì»´í¬ë„ŒíŠ¸ ìƒì„±, usePendingFilters í›… êµ¬í˜„, deleteBatch API ì¶”ê°€, PendingPage í†µí•©.

**ë³€ê²½ì‚¬í•­**:
- ê°œë°œ:
  - `WorkflowFilters.tsx` - Workflow/Run ID ë“œë¡­ë‹¤ìš´ í•„í„° + Delete Filtered ë²„íŠ¼
  - `usePendingFilters.ts` - í•„í„° ìƒíƒœ ê´€ë¦¬ í›… (filter, reset on tab change, delete handler)
  - `api.ts` - `deleteBatch()` í•¨ìˆ˜ (DELETE with request body)
  - `queries/usePendingReviews.ts` - `useDeleteBatch()` mutation hook
- ìˆ˜ì •:
  - `ReviewCard.tsx` - source_workflowë¥¼ ë±ƒì§€ë¡œ ë³€ê²½, AUTO-SYNTH ë±ƒì§€ ì¶”ê°€ (retro-synth ì‹œ), run_id ë±ƒì§€ ì¶”ê°€ (24ì truncate + tooltip)
  - `PendingPage/index.tsx` - WorkflowFilters í†µí•©, isPending ìˆ˜ì • (React Query v5)
- ê°œì„  (Codex í”¼ë“œë°± ë°˜ì˜):
  - React Query v5 í˜¸í™˜: `isLoading` â†’ `isPending` ìˆ˜ì •
  - ì‚­ì œ ë²„íŠ¼ ê°œì„ : `filteredCount === 0` ì‹œ ë¹„í™œì„±í™” + íˆ´íŒ
  - ì—ëŸ¬ ì²˜ë¦¬: deleteBatch ì‹¤íŒ¨ ì‹œ try/catchë¡œ alert í‘œì‹œ

**í•µì‹¬ ì½”ë“œ**:
```typescript
// usePendingFilters.ts - Filter & Delete logic
const filteredReviews = useMemo(() => {
  let result = reviews.filter((r) => r.status === activeStatus);
  if (filterWorkflow !== '') result = result.filter((r) => r.source_workflow === filterWorkflow);
  if (filterRunId !== '') result = result.filter((r) => r.run_id === filterRunId);
  return result;
}, [reviews, activeStatus, filterWorkflow, filterRunId]);

// WorkflowFilters.tsx - canDelete logic
const canDelete = hasFilter && filteredCount > 0 && !isDeleting;
```

**ê²°ê³¼**: âœ… ë¹Œë“œ ì„±ê³µ (npm run build passed)

**Codex Review í”¼ë“œë°± (3ê±´ ëª¨ë‘ ìˆ˜ì •)**:
1. âœ… `isPending` vs `isLoading` (React Query v5) - ìˆ˜ì • ì™„ë£Œ
2. âœ… `filteredCount === 0` ì‹œ ì‚­ì œ ë°©ì§€ - canDelete ì¡°ê±´ ì¶”ê°€
3. âœ… deleteBatch ì—ëŸ¬ ì²˜ë¦¬ - try/catch + alert ì¶”ê°€

**ë‹¤ìŒ ë‹¨ê³„**: ë°°í¬ í›„ ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘

#### 2026-01-09 (Post-deployment Issue)
**ê°œìš”**: Delete Filtered ë²„íŠ¼ í™œì„±í™” ì´ìŠˆ ë°œê²¬ ë° ê¸°ë¡

**ë°œê²¬ëœ ë¬¸ì œ**:
- ë ˆì´ì•„ì›ƒ ìˆ˜ì •: `ReviewList`ì˜ `h-full` â†’ `flex-1` ë³€ê²½ìœ¼ë¡œ í•„í„° UI ë…¸ì¶œ ë¬¸ì œ í•´ê²°
- Delete ë²„íŠ¼ í™œì„±í™” ì´ìŠˆ: í•„í„°ë§ëœ í•­ëª©ì´ ìˆìŒì—ë„ ë²„íŠ¼ì´ í™œì„±í™”ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì‚¬ìš©ì í”¼ë“œë°± ì ‘ìˆ˜

**í˜„ì¬ ìƒíƒœ**:
- ë ˆì´ì•„ì›ƒ ì´ìŠˆ: âœ… í•´ê²° ì™„ë£Œ (ReviewList flex-1 ì ìš©)
- Delete ë²„íŠ¼ í™œì„±í™”: ğŸ” ì¶”ê°€ ì¡°ì‚¬ í•„ìš”

**ë‹¤ìŒ ë‹¨ê³„**:
- Delete ë²„íŠ¼ í™œì„±í™” ì¡°ê±´ ì¬ê²€ì¦ í•„ìš”
- `canDelete = hasFilter && filteredCount > 0 && !isDeleting` ë¡œì§ í™•ì¸
- ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ (workflow/run_id í•„í„° ì„ íƒ â†’ ì¹´ìš´íŠ¸ í™•ì¸ â†’ ë²„íŠ¼ ìƒíƒœ í™•ì¸)


---

## ì°¸ê³  ë¬¸ì„œ

- [[prj-023]] - ì†Œì† Project
- `_dashboard/js/components/pending-panel.js` - ë ˆê±°ì‹œ êµ¬í˜„ ì°¸ì¡°
- `/Users/gim-eunhyang/.claude/plans/hidden-cuddling-cascade.md` - Plan Mode ê³„íš

---

**Created**: 2026-01-08
**Assignee**: ê¹€ì€í–¥
**Due**: 2026-01-08
