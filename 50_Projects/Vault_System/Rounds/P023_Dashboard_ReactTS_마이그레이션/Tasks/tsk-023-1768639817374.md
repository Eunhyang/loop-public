---
entity_type: Task
entity_id: tsk-023-1768639817374
entity_name: Pending API - approve 후 캐시 갱신 로직 추가
created: '2026-01-17'
updated: '2026-01-17'
status: done
project_id: prj-023
parent_id: prj-023
assignee: 김은향
priority: medium
start_date: '2026-01-17'
due: '2026-01-17'
aliases:
- tsk-023-1768639817374
tags: []
type: dev
---

# Pending API - approve 후 캐시 갱신 로직 추가

## 설명

n8n Entity Validator에서 approve한 프로젝트가 manual trigger 시 다시 pending으로 생성되는 문제 수정.

**원인**: approve 후 API 캐시가 갱신되지 않아 n8n이 `/api/projects` 호출 시 예전 데이터(expected_impact 없음)를 받음.

**해결**: `pending.py`의 approve 함수에 `cache.reload()` 호출 추가.

## 체크리스트

- [x] 문제 원인 분석 (캐시 미갱신)
- [x] pending.py approve 함수에 cache.reload() 추가
- [x] Hypothesis 승인, 일반 엔티티 승인 모두 처리
- [x] main merge 및 push 완료

## Notes

### Summary
pending approve 후 cache.reload()를 호출하여 n8n이 최신 데이터를 볼 수 있도록 수정.

### Changes Made
- `api/routers/pending.py`: approve 함수에 캐시 갱신 로직 추가 (2곳)
  - Hypothesis 승인 시
  - 일반 엔티티(Task, Project) 승인 시

### Commit
`c4348f199` - fix: pending approve 후 cache.reload() 호출 추가

## 참고

- 배포: `/deploy-api` 실행 필요
