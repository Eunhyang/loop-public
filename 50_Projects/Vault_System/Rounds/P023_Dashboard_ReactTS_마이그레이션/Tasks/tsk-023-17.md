---
entity_type: Task
entity_id: "tsk-023-17"
entity_name: "Dashboard - FilterPanel 로컬 필터 캘린더 통합"
created: 2026-01-08
updated: 2026-01-08
status: doing

# === 계층 ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-17"]

# === 관계 ===
outgoing_relations: []
validates: []
validated_by: []

# === Task 전용 ===
assignee: "김은향"
start_date: 2026-01-08
due: 2026-01-08
priority: medium
estimated_hours: null
actual_hours: null

# === Task 유형 (dev Task 연동용) ===
type: dev
target_project: null

# === 분류 ===
tags: [calendar, filter, dashboard]
priority_flag: medium
---

# Dashboard - FilterPanel 로컬 필터 캘린더 통합

> Task ID: `tsk-023-17` | Project: `prj-023` | Status: doing

## 목표

**완료 조건**:
1. useCalendarEvents의 인라인 타입 정의를 Pick<UseCombinedFiltersReturn, ...>로 교체
2. FilterPanel의 로컬 필터(taskStatus, taskTypes, taskPriority)가 캘린더 뷰에서 정상 동작

---

## 상세 내용

### 배경

tsk-023-13에서 캘린더 필터 통합 작업을 완료했으나, useCalendarEvents의 filters 인터페이스가 인라인으로 정의되어 있어 유지보수 문제 발생.

기존 타입 시스템(`types/filters.ts`)을 재사용하여 중복을 제거하고 타입 안전성을 보장해야 함.

### 작업 내용

**현재 문제 (useCalendarEvents.ts)**:
```typescript
// 인라인 타입 정의 - 유지보수 어려움
filters?: {
    assignees: string[];
    projectId: string | null;
    projectIds: string[];
    programId: string | null;
    selectedWeeks: string[];
    selectedMonths: string[];
    taskStatus?: string[];
    taskTypes?: string[];
    taskPriority?: string[];
};
```

**개선 방향**:
```typescript
import type { UseCombinedFiltersReturn } from '@/types/filters';

type CalendarFilters = Pick<UseCombinedFiltersReturn,
    | 'assignees'
    | 'projectId'
    | 'projectIds'
    | 'programId'
    | 'selectedWeeks'
    | 'selectedMonths'
    | 'taskStatus'
    | 'taskTypes'
    | 'taskPriority'
>;

interface UseCalendarEventsArgs {
    range: CalendarRange | null;
    enabledCalendarKeys: string[];
    expandMode: boolean;
    filters?: Partial<CalendarFilters>;
}
```

---

## 체크리스트

- [ ] useCalendarEvents.ts 인라인 타입 → Pick 타입으로 교체
- [ ] 빌드 확인
- [ ] FilterPanel 동작 테스트

---

## Notes

### Tech Spec

**변경 파일**: 1개
- `src/features/calendar/queries/useCalendarEvents.ts`

**장점**:
- SSOT: 타입 정의가 `types/filters.ts` 한 곳에만 존재
- 확장성: 새 필터 추가 시 Pick에만 추가하면 됨
- 타입 안전성: UseCombinedFiltersReturn과 자동 동기화

**최소 변경 원칙**:
- 기능 변경 없음
- 새로운 필터 추가 없음
- UI 변경 없음
- 기존 로직 그대로 유지

### Todo
- [ ] useCalendarEvents.ts 타입 개선
- [ ] npm run build 확인
- [ ] FilterPanel 테스트 (taskStatus, taskTypes, taskPriority)

### 작업 로그


---

## 참고 문서

- [[prj-023]] - 소속 Project
- [[tsk-023-13]] - 선행 작업 (캘린더 필터 통합)

---

**Created**: 2026-01-08
**Assignee**: 김은향
**Due**: 2026-01-08
