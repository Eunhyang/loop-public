---
entity_type: Task
entity_id: "tsk-023-17"
entity_name: "Dashboard - Create Buttons 버그 수정"
created: 2026-01-08
updated: 2026-01-08
status: done

# === 계층 ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-17", "Dashboard - Create Buttons 버그 수정"]

# === Task 전용 ===
assignee: "김은향"
type: dev
priority: high
due: null
closed: 2026-01-08
pr_url: null
target_project: loop
---

> Task ID: `tsk-023-17` | Project: `prj-023` | Status: done

## Summary

대시보드 상단의 + 버튼들 (Task, Project, Program Create)에 UI 문제 수정:
1. Task Create: placeholder 대신 실제 폼 UI 표시
2. Project/Program Create: Save/Cancel 버튼 하단 고정

## Notes

### 작업 로그

#### 2026-01-08 22:18
**개요**: useCalendarEvents 타입 리팩토링 완료 - CalendarFilters 타입 정의 분리 및 UseCombinedFiltersReturn 재사용

**변경사항**:
- 타입 정의: CalendarFilters 타입을 UseCombinedFiltersReturn에서 Pick/Partial로 추출하여 중복 제거
- 타입 안전성: inline object type을 명시적 타입으로 변경하여 유지보수성 향상
- import 추가: `type { UseCombinedFiltersReturn } from '@/types/filters'`

**파일 변경**:
- `src/features/calendar/queries/useCalendarEvents.ts`
  - CalendarFilters 타입 정의 추가 (Pick<UseCombinedFiltersReturn, ...> & Partial<Pick<...>>)
  - UseCalendarEventsArgs interface의 filters 타입을 CalendarFilters로 교체
  - 기존 inline object type 제거

**결과**: ✅ 빌드 성공 (npm run build)
- Type safety: UseCombinedFiltersReturn과 CalendarFilters 간 자동 동기화
- Code reusability: 필터 타입 정의 중복 제거
- Maintainability: 중앙화된 타입 정의 활용

**다음 단계**:
- ❌ 추가 작업 없음 (타입 리팩토링 완료)

### 문제 원인

**1. Task Create - placeholder만 표시**

`TaskForm.tsx:42-48`:
```tsx
if (mode === 'create') {
    return (
        <div className="p-6 text-center text-zinc-500">
            <p>Task creation via API not yet implemented.</p>
        </div>
    );
}
```

이미 준비된 것:
- `useCreateTask` hook ✅
- `taskApi.createTask` ✅
- `CreateTaskDTO` 타입 ✅

**2. Project/Program - Footer 위치 문제**

Form이 `flex-1 overflow-y-auto`로 되어 있어서 footer가 스크롤 영역 안에 포함됨.

### Tech Spec

#### TaskForm create 모드 구현

placeholder를 실제 폼으로 교체:

```tsx
if (mode === 'create') {
    return (
        <form onSubmit={handleCreate} className="flex flex-col h-full">
            <div className="flex-1 overflow-y-auto p-6 space-y-4">
                {/* entity_name, project_id, assignee, priority, status, type */}
            </div>
            <div className="flex-shrink-0 p-4 border-t ...">
                <button>Cancel</button>
                <button type="submit">Create Task</button>
            </div>
        </form>
    );
}
```

#### ProjectForm/ProgramForm footer 수정

```tsx
// Before
<form className="flex-1 overflow-y-auto">
    <div className="p-6">{/* fields */}</div>
    <div className="p-4 border-t">{/* footer */}</div>
</form>

// After
<form className="flex flex-col h-full">
    <div className="flex-1 overflow-y-auto p-6 space-y-4">{/* fields */}</div>
    <div className="flex-shrink-0 p-4 border-t">{/* footer */}</div>
</form>
```

### Todo
- [ ] TaskForm create 모드 구현
- [ ] ProjectForm CSS 구조 변경
- [ ] ProgramForm CSS 구조 변경
- [ ] 테스트

### 수정 파일
- `features/tasks/components/TaskForm.tsx`
- `features/projects/components/ProjectForm.tsx`
- `features/programs/components/ProgramForm.tsx`

---

### Codex Review (2026-01-08)

**구조적 결함**: 없음
**제안 사항**: PRD에 반영

#### 반영된 고려사항

1. **TaskForm 상태 관리**
   - 로딩 상태: `isPending` from useCreateTask
   - 에러 상태: `error` from useCreateTask + formError state
   - 성공 처리: `onSuccess` → closeEntityDrawer()

2. **CreateTaskDTO 정렬** (api.ts)
   ```ts
   interface CreateTaskDTO {
     entity_name: string;     // required
     project_id: string;      // required
     assignee: string;        // required
     priority?: string;
     status?: string;
     type?: string;
     start_date?: string;
     due?: string;
   }
   ```

3. **레이아웃 안전성**
   - DrawerShell body가 이미 `flex flex-col`
   - form에 `h-full` 추가하여 부모 높이 상속

4. **Edge Cases 처리**
   - 중복 저장 방지: `disabled={isPending}` on submit button
   - 필수 필드 검증: entity_name, project_id, assignee
   - 에러 메시지 표시: form 상단 error div

#### 향후 개선 (v2)
- dirty state 확인 후 drawer 닫기 경고
- 키보드 접근성 (Tab order)
- 모바일 반응형 테스트
