---
entity_type: Task
entity_id: "tsk-023-09"
entity_name: "Dashboard - Kanban Filter UI ë§ˆì´ê·¸ë ˆì´ì…˜ (Program+Project ë²„íŠ¼)"
created: 2026-01-08
updated: 2026-01-08
status: doing

# === ê³„ì¸µ ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-09"]

# === ê´€ê³„ ===
outgoing_relations: []
validates: []
validated_by: []

# === Task ì „ìš© ===
assignee: "ê¹€ì€í–¥"
start_date: 2026-01-08
due: 2026-01-08
priority: high
estimated_hours: null
actual_hours: null

# === Task ìœ í˜• (dev Task ì—°ë™ìš©) ===
type: dev
target_project: loop

# === ë¶„ë¥˜ ===
tags: ["dashboard", "kanban", "filter", "migration"]
priority_flag: high
---

# Dashboard - Kanban Filter UI ë§ˆì´ê·¸ë ˆì´ì…˜ (Program+Project ë²„íŠ¼)

> Task ID: `tsk-023-09` | Project: `prj-023` | Status: doing

## ëª©í‘œ

ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œ(`_dashboard/`)ì˜ Project + Program ë²„íŠ¼ í•„í„° UIë¥¼ Dashboard V2 KanbanFiltersì— ë§ˆì´ê·¸ë ˆì´ì…˜

**ì™„ë£Œ ì¡°ê±´**:
1. í˜„ì¬ Project ë“œë¡­ë‹¤ìš´ì„ Program + Project ë²„íŠ¼ UIë¡œ êµì²´
2. Program ì„ íƒ ì‹œ í•˜ìœ„ í”„ë¡œì íŠ¸ ë²„íŠ¼ í‘œì‹œ
3. ë‹¤ì¤‘ ì„ íƒ ì§€ì› (í”„ë¡œì íŠ¸)
4. ë²„íŠ¼ë³„ Task ì¹´ìš´íŠ¸ ë±ƒì§€ í‘œì‹œ

---

## ìƒì„¸ ë‚´ìš©

### ë°°ê²½

ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œì˜ ì¹¸ë°˜ í•„í„° ë²„íŠ¼ UIê°€ ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° í¸í•¨:
- All ë²„íŠ¼ (ì „ì²´ Task ìˆ˜ í‘œì‹œ)
- Program ë²„íŠ¼ë“¤ (ë³´ë¼ìƒ‰, í† ê¸€ ë°©ì‹)
- Child Project ë²„íŠ¼ë“¤ (í•˜ëŠ˜ìƒ‰, Program ì„ íƒ ì‹œë§Œ í‘œì‹œ)
- ë…ë¦½ Project ë²„íŠ¼ë“¤ (í”„ë¡œì íŠ¸ë³„ ìƒ‰ìƒ)

í˜„ì¬ Dashboard V2ëŠ” ë‹¨ìˆœ ë“œë¡­ë‹¤ìš´ë§Œ ìˆì–´ ë¶ˆí¸í•¨.

### ì‘ì—… ë‚´ìš©

**ë³€ê²½ íŒŒì¼:**
- `src/pages/Kanban/KanbanFilters.tsx` - Project ë“œë¡­ë‹¤ìš´ â†’ ë²„íŠ¼ UI
- `src/pages/Kanban/useKanbanFilters.ts` - programId ìƒíƒœ ì¶”ê°€ (í•„ìš”ì‹œ)
- `src/index.css` ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ Tailwind - ë²„íŠ¼ ìŠ¤íƒ€ì¼

**ë ˆê±°ì‹œ ì†ŒìŠ¤ ì°¸ì¡°:**
- `/public/_dashboard/js/components/kanban.js` (renderProjectFilter, 9~187ì¤„)
- `/public/_dashboard/css/kanban.css` (110~273ì¤„)

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] useKanbanFiltersì— programId ìƒíƒœ í™•ì¸/ì¶”ê°€
- [ ] KanbanFilters.tsxì— Program+Project ë²„íŠ¼ UI êµ¬í˜„
- [ ] ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ë³´ë¼ìƒ‰ Program, í•˜ëŠ˜ìƒ‰ Child, í”„ë¡œì íŠ¸ ìƒ‰ìƒ)
- [ ] Task ì¹´ìš´íŠ¸ ê³„ì‚° ë° ë±ƒì§€ í‘œì‹œ
- [ ] ë‹¤ì¤‘ ì„ íƒ ë¡œì§ êµ¬í˜„
- [ ] npm run build ì„±ê³µ í™•ì¸

---

## Notes

### PRD

## ğŸ“Š ì•„í‚¤í…ì²˜ ë„ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Kanban Filter UI Architecture                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ UI Layer (KanbanFilters.tsx)                              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [All(15)] [Program1(5)â„¹ï¸] [Program2(3)â„¹ï¸] â”‚ [Child1â„¹ï¸]   â”‚  â”‚
â”‚  â”‚     â†“           â†“              â†“               â†“          â”‚  â”‚
â”‚  â”‚ clearAll() setProgramId()  setProgramId() toggleProject() â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                          â”‚
â”‚       â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ State Layer (useKanbanFilters + useUrlFilters)            â”‚  â”‚
â”‚  â”‚ - programId, setProgramId() (ì´ë¯¸ ì¡´ì¬)                    â”‚  â”‚
â”‚  â”‚ - projectIds: string[] (ë‹¤ì¤‘ì„ íƒ - ì¶”ê°€ í•„ìš”)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                          â”‚
â”‚       â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Data Layer (useDashboardInit)                             â”‚  â”‚
â”‚  â”‚ - programs, projects, tasks â†’ Task ì¹´ìš´íŠ¸ ê³„ì‚°            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸
- React 19 + TypeScript + Vite 7
- State: URL params (useUrlFilters - programId ì´ë¯¸ ì§€ì›)
- Styling: Tailwind CSS 4

## ğŸ¯ êµ¬í˜„ ë²”ìœ„

### ë²„íŠ¼ íƒ€ì…
| íƒ€ì… | í´ë˜ìŠ¤ | ìŠ¤íƒ€ì¼ | ë™ì‘ |
|------|--------|--------|------|
| All | `filter-btn` | ê¸°ë³¸ | ì „ì²´ í•„í„° í•´ì œ |
| Program | `filter-btn-program` | ë³´ë¼ìƒ‰ | í† ê¸€ + Child í‘œì‹œ |
| Child Project | `filter-btn-child` | í•˜ëŠ˜ìƒ‰ | ë‹¤ì¤‘ ì„ íƒ |
| Independent | `filter-btn` | í”„ë¡œì íŠ¸ìƒ‰ | ë‹¤ì¤‘ ì„ íƒ |

### ë³€ê²½ íŒŒì¼
1. `types/index.ts` - Program íƒ€ì… ì¶”ê°€
2. `useKanbanFilters.ts` - projectIds ë‹¤ì¤‘ì„ íƒ
3. `KanbanFilters.tsx` - ë²„íŠ¼ UI êµ¬í˜„
4. `index.css` - ë²„íŠ¼ ìŠ¤íƒ€ì¼

## âœ… ì„±ê³µ ê¸°ì¤€
- [ ] All ë²„íŠ¼ â†’ ì „ì²´ í‘œì‹œ
- [ ] Program í† ê¸€ ë™ì‘
- [ ] Child ë‹¤ì¤‘ ì„ íƒ
- [ ] Task ì¹´ìš´íŠ¸ ë±ƒì§€
- [ ] npm run build ì„±ê³µ

### ì‘ì—… ë¡œê·¸

#### 2026-01-08 - Implementation Complete + Codex Review

**Implementation Status**: âœ… Build successful, all TypeScript checks passed

**Files Modified**:
1. `src/types/index.ts` - Added Program interface
2. `src/pages/Kanban/useKanbanFilters.ts` - Added projectIds multi-select state
3. `src/pages/Kanban/KanbanFilters.tsx` - Complete button UI replacement
4. `src/pages/Kanban/index.tsx` - Pass programs, tasks props to KanbanFilters
5. `src/index.css` - Button styles (purple program, sky child)

**Codex Code Review Findings** (194,264 tokens):

ğŸ”´ **HIGH Priority Issues**:

1. **projectIds Not Connected to Task Filtering** (CRITICAL)
   - Location: `src/features/tasks/selectors.ts:49-70`
   - Issue: `buildKanbanColumns` / `applyUrlFilters` only filter by legacy `projectId` (single)
   - Impact: Multi-select buttons are purely cosmetic - task list doesn't change
   - Fix Needed: Update selector to use `projectIds` array instead

2. **URL Param Setter Race Conditions**
   - Location: `src/pages/Kanban/useKanbanFilters.ts:61-114`
   - Issue: Each setter clones current searchParams, sequential calls overwrite each other
   - Impact: "All" button fails to clear filters, week/month toggles conflict
   - Fix Needed: Batch URL updates or use functional setState pattern

3. **Legacy project_id Never Cleared**
   - Location: `src/pages/Kanban/useKanbanFilters.ts:51-59`
   - Issue: New UI never calls `setProjectId`, old `project_id` param persists
   - Impact: Hidden filter remains active even when UI shows "All"
   - Fix Needed: Clear `project_id` when using new projectIds filter

ğŸŸ¡ **MEDIUM Priority Issues**:

4. **Accessibility - Missing aria-pressed**
   - Location: `src/pages/Kanban/KanbanFilters.tsx:156-291`
   - Issue: Toggle buttons only use color/background for state
   - Impact: Screen readers can't detect active state
   - Fix Needed: Add `aria-pressed={isActive}` to all toggle buttons

5. **Performance - Repeated Task Filtering**
   - Location: `src/pages/Kanban/KanbanFilters.tsx:55-84`
   - Issue: `getProjectTaskCount` filters entire task list O(NÂ·M) per render
   - Impact: Performance degrades with many projects/tasks
   - Fix Needed: Build memoized `Map<project_id, count>` once

**Next Steps**:
- Fix HIGH priority issues (projectIds filtering, URL state management)
- Add accessibility attributes
- Optimize task count calculation

---

## ì°¸ê³  ë¬¸ì„œ

- [[prj-023]] - ì†Œì† Project
- [[_dashboard/js/components/kanban.js]] - ë ˆê±°ì‹œ êµ¬í˜„
- [[_dashboard/css/kanban.css]] - ë ˆê±°ì‹œ ìŠ¤íƒ€ì¼

---

**Created**: 2026-01-08
**Assignee**: ê¹€ì€í–¥
**Due**: 2026-01-08
