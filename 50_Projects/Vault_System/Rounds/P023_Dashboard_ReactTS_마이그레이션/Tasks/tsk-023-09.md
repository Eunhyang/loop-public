---
entity_type: Task
entity_id: tsk-023-09
entity_name: Dashboard - Kanban Filter UI ë§ˆì´ê·¸ë ˆì´ì…˜ (Program+Project ë²„íŠ¼)
created: 2026-01-08
updated: '2026-01-16'
status: done
closed: 2026-01-08
parent_id: prj-023
project_id: prj-023
aliases:
- tsk-023-09
outgoing_relations: []
validates: []
validated_by: []
assignee: ê¹€ì€í–¥
start_date: 2026-01-08
due: 2026-01-08
priority: high
estimated_hours: null
actual_hours: null
type: dev
target_project: loop
tags:
- dashboard
- kanban
- filter
- migration
priority_flag: high
notes: "# Dashboard - Kanban Filter UI ë§ˆì´ê·¸ë ˆì´ì…˜ (Program+Project ë²„íŠ¼)\n\n> Task ID: `tsk-023-09`\
  \ | Project: `prj-023` | Status: done\n\n## ëª©í‘œ\n\në ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œ(`_dashboard/`)ì˜ Project\
  \ + Program ë²„íŠ¼ í•„í„° UIë¥¼ Dashboard V2 KanbanFiltersì— ë§ˆì´ê·¸ë ˆì´ì…˜\n\n**ì™„ë£Œ ì¡°ê±´**:\n\n1. í˜„ì¬\
  \ Project ë“œë¡­ë‹¤ìš´ì„ Program + Project ë²„íŠ¼ UIë¡œ êµì²´\n2. Program ì„ íƒ ì‹œ í•˜ìœ„ í”„ë¡œì íŠ¸ ë²„íŠ¼ í‘œì‹œ\n3. ë‹¤ì¤‘\
  \ ì„ íƒ ì§€ì› (í”„ë¡œì íŠ¸)\n4. ë²„íŠ¼ë³„ Task ì¹´ìš´íŠ¸ ë±ƒì§€ í‘œì‹œ\n\n---\n\n## ìƒì„¸ ë‚´ìš©\n\n### ë°°ê²½\n\në ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œì˜\
  \ ì¹¸ë°˜ í•„í„° ë²„íŠ¼ UIê°€ ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° í¸í•¨:\n\n- All ë²„íŠ¼ (ì „ì²´ Task ìˆ˜ í‘œì‹œ)\n- Program ë²„íŠ¼ë“¤ (ë³´ë¼ìƒ‰, í† ê¸€\
  \ ë°©ì‹)\n- Child Project ë²„íŠ¼ë“¤ (í•˜ëŠ˜ìƒ‰, Program ì„ íƒ ì‹œë§Œ í‘œì‹œ)\n- ë…ë¦½ Project ë²„íŠ¼ë“¤ (í”„ë¡œì íŠ¸ë³„ ìƒ‰ìƒ)\n\
  \ní˜„ì¬ Dashboard V2ëŠ” ë‹¨ìˆœ ë“œë¡­ë‹¤ìš´ë§Œ ìˆì–´ ë¶ˆí¸í•¨.\n\n### ì‘ì—… ë‚´ìš©\n\n**ë³€ê²½ íŒŒì¼:**\n\n- `src/pages/Kanban/KanbanFilters.tsx`\
  \ - Project ë“œë¡­ë‹¤ìš´ â†’ ë²„íŠ¼ UI\n- `src/pages/Kanban/useKanbanFilters.ts` - programId ìƒíƒœ\
  \ ì¶”ê°€ (í•„ìš”ì‹œ)\n- `src/index.css` ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ Tailwind - ë²„íŠ¼ ìŠ¤íƒ€ì¼\n\n**ë ˆê±°ì‹œ ì†ŒìŠ¤ ì°¸ì¡°:**\n\n\
  - `/public/_dashboard/js/components/kanban.js` (renderProjectFilter, 9\\~187ì¤„)\n\
  - `/public/_dashboard/css/kanban.css` (110\\~273ì¤„)\n\n---\n\n## ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n- [ ] useKanbanFiltersì—\
  \ programId ìƒíƒœ í™•ì¸/ì¶”ê°€\n\n- [ ] KanbanFilters.tsxì— Program+Project ë²„íŠ¼ UI êµ¬í˜„\n\n- [\
  \ ] ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ë³´ë¼ìƒ‰ Program, í•˜ëŠ˜ìƒ‰ Child, í”„ë¡œì íŠ¸ ìƒ‰ìƒ)\n\n- [ ] Task ì¹´ìš´íŠ¸ ê³„ì‚° ë° ë±ƒì§€ í‘œì‹œ\n\n- [\
  \ ] ë‹¤ì¤‘ ì„ íƒ ë¡œì§ êµ¬í˜„\n\n- [ ] npm run build ì„±ê³µ í™•ì¸\n\n---\n\n## Notes\n\n### PRD\n\n##\
  \ \U0001F4CA ì•„í‚¤í…ì²˜ ë„ì‹\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n\
  â”‚                 Kanban Filter UI Architecture                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n\
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚ UI Layer\
  \ (KanbanFilters.tsx)                              â”‚  â”‚\nâ”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\
  \  â”‚\nâ”‚  â”‚ [All(15)] [Program1(5)â„¹ï¸] [Program2(3)â„¹ï¸] â”‚ [Child1â„¹ï¸]   â”‚  â”‚\nâ”‚  â”‚ \
  \    â†“           â†“              â†“               â†“          â”‚  â”‚\nâ”‚  â”‚ clearAll()\
  \ setProgramId()  setProgramId() toggleProject() â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\
  \  â”‚\nâ”‚       â”‚                                                          â”‚\nâ”‚  \
  \     â†“                                                          â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\
  \  â”‚\nâ”‚  â”‚ State Layer (useKanbanFilters + useUrlFilters)            â”‚  â”‚\nâ”‚  â”‚\
  \ - programId, setProgramId() (ì´ë¯¸ ì¡´ì¬)                    â”‚  â”‚\nâ”‚  â”‚ - projectIds:\
  \ string[] (ë‹¤ì¤‘ì„ íƒ - ì¶”ê°€ í•„ìš”)             â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\
  \  â”‚\nâ”‚       â”‚                                                          â”‚\nâ”‚  \
  \     â†“                                                          â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\
  \  â”‚\nâ”‚  â”‚ Data Layer (useDashboardInit)                             â”‚  â”‚\nâ”‚  â”‚\
  \ - programs, projects, tasks â†’ Task ì¹´ìš´íŠ¸ ê³„ì‚°            â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\
  \  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\
  \n## \U0001F4CB í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸\n\n- React 19 + TypeScript + Vite 7\n- State: URL params\
  \ (useUrlFilters - programId ì´ë¯¸ ì§€ì›)\n- Styling: Tailwind CSS 4\n\n## \U0001F3AF\
  \ êµ¬í˜„ ë²”ìœ„\n\n### ë²„íŠ¼ íƒ€ì…\n\n| íƒ€ì… | í´ë˜ìŠ¤ | ìŠ¤íƒ€ì¼ | ë™ì‘ |\n| --- | --- | --- | --- |\n| All\
  \ | `filter-btn` | ê¸°ë³¸ | ì „ì²´ í•„í„° í•´ì œ |\n| Program | `filter-btn-program` | ë³´ë¼ìƒ‰ | í† ê¸€\
  \ + Child í‘œì‹œ |\n| Child Project | `filter-btn-child` | í•˜ëŠ˜ìƒ‰ | ë‹¤ì¤‘ ì„ íƒ |\n| Independent\
  \ | `filter-btn` | í”„ë¡œì íŠ¸ìƒ‰ | ë‹¤ì¤‘ ì„ íƒ |\n\n### ë³€ê²½ íŒŒì¼\n\n1. `types/index.ts` - Program\
  \ íƒ€ì… ì¶”ê°€\n2. `useKanbanFilters.ts` - projectIds ë‹¤ì¤‘ì„ íƒ\n3. `KanbanFilters.tsx` - ë²„íŠ¼\
  \ UI êµ¬í˜„\n4. `index.css` - ë²„íŠ¼ ìŠ¤íƒ€ì¼\n\n## âœ… ì„±ê³µ ê¸°ì¤€\n\n- [ ] All ë²„íŠ¼ â†’ ì „ì²´ í‘œì‹œ\n\n- [ ]\
  \ Program í† ê¸€ ë™ì‘\n\n- [ ] Child ë‹¤ì¤‘ ì„ íƒ\n\n- [ ] Task ì¹´ìš´íŠ¸ ë±ƒì§€\n\n- [ ] npm run build\
  \ ì„±ê³µ\n\n### ì‘ì—… ë¡œê·¸\n\n2026-01-08 - Task Complete: UI Migration + Critical Fixes\n\
  \n**ê°œìš”**: Dashboard V2 Kanban Filter UI ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ. ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œì˜ Program+Project ë²„íŠ¼\
  \ UIë¥¼ ì„±ê³µì ìœ¼ë¡œ ì´ì‹í•˜ê³ , Codex ë¦¬ë·°ì—ì„œ ë°œê²¬ëœ 3ê°œ CRITICAL ì´ìŠˆ ëª¨ë‘ ìˆ˜ì • ì™„ë£Œ.\n\n**Phase 1: Initial\
  \ Implementation**\n\n**ë³€ê²½ì‚¬í•­**:\n\n- ê°œë°œ: Program íƒ€ì… ì •ì˜, projectIds ë‹¤ì¤‘ì„ íƒ ìƒíƒœ, ë²„íŠ¼ UI\
  \ ì»´í¬ë„ŒíŠ¸\n- ìˆ˜ì •: KanbanFilters.tsx (ë“œë¡­ë‹¤ìš´ â†’ ë²„íŠ¼), useKanbanFilters.ts (ìƒíƒœ ì¶”ê°€)\n- ì¶”ê°€:\
  \ Tailwind ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ë³´ë¼ìƒ‰ Program, í•˜ëŠ˜ìƒ‰ Child)\n\n**íŒŒì¼ ë³€ê²½**:\n\n- `src/types/index.ts`\
  \ - Program ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€\n- `src/pages/Kanban/useKanbanFilters.ts` - projectIds ë‹¤ì¤‘ì„ íƒ\
  \ ìƒíƒœ ì¶”ê°€\n- `src/pages/Kanban/KanbanFilters.tsx` - ì™„ì „í•œ ë²„íŠ¼ UI êµ¬í˜„\n- `src/pages/Kanban/index.tsx`\
  \ - programs, tasks props ì „ë‹¬\n- `src/index.css` - ë²„íŠ¼ ìŠ¤íƒ€ì¼ (filter-btn-program, filter-btn-child)\n\
  \n**ê²°ê³¼**: âœ… ë¹Œë“œ ì„±ê³µ (TypeScript ì²´í¬ í†µê³¼)\n\n---\n\n**Phase 2: Codex Code Review** (194,264\
  \ tokens)\n\n**ë°œê²¬ëœ ì´ìŠˆ**:\n\n\U0001F534 **HIGH Priority (3ê°œ - ëª¨ë‘ ìˆ˜ì • ì™„ë£Œ)**:\n\n1.\
  \ projectIdsê°€ Task í•„í„°ë§ì— ë¯¸ì—°ê²° (src/features/tasks/selectors.ts)\n2. URL íŒŒë¼ë¯¸í„° setter\
  \ ê²½ìŸ ì¡°ê±´ (useKanbanFilters.ts)\n3. Legacy project_id íŒŒë¼ë¯¸í„° ë¯¸ì œê±° (useKanbanFilters.ts)\n\
  \n\U0001F7E1 **MEDIUM Priority (2ê°œ - í–¥í›„ ê°œì„ )**: 4. ì ‘ê·¼ì„±: aria-pressed ëˆ„ë½ (KanbanFilters.tsx)\
  \ 5. ì„±ëŠ¥: Task ì¹´ìš´íŠ¸ ê³„ì‚° ì¤‘ë³µ (KanbanFilters.tsx)\n\n---\n\n**Phase 3: Critical Fix Implementation**\n\
  \n**ìˆ˜ì •ì‚¬í•­**:\n\n1. **projectIds í•„í„°ë§ ì—°ê²°** (selectors.ts:44-73)\n\n   ```typescript\n\
  \   // applyUrlFiltersì— projectIds ì§€ì› ì¶”ê°€\n   export const applyUrlFilters = (\n\
  \     tasks: Task[],\n     filters: UrlFilterState & { projectIds?: string[] },\n\
  \     projects: Project[] = []\n   ): Task[] => {\n     // Priority: projectIds\
  \ > projectId (ìƒˆ UIê°€ projectIds ì‚¬ìš©)\n     if (projectIds && projectIds.length >\
  \ 0) {\n       filtered = filtered.filter((t) => projectIds.includes(t.project_id));\n\
  \     } else if (projectId) {\n       filtered = filtered.filter((t) => t.project_id\
  \ === projectId);\n     }\n   }\n   ```\n\n2. **Legacy project_id ì •ë¦¬** (useKanbanFilters.ts:61-92)\n\
  \n   ```typescript\n   const setProjectIds = (ids: string[]) => {\n     const newParams\
  \ = new URLSearchParams(searchParams);\n     newParams.delete('project_ids');\n\
  \     newParams.delete('project_id'); // Legacy ì œê±°\n     ids.forEach(id => newParams.append('project_ids',\
  \ id));\n     setSearchParams(newParams);\n   };\n   \n   const setProgramId = (id:\
  \ string | null) => {\n     // ...\n     newParams.delete('project_ids');\n    \
  \ newParams.delete('project_id'); // Legacy ì œê±°\n   };\n   ```\n\n3. **clearFiltersì—\
  \ project_id ì¶”ê°€** (useKanbanFilters.ts:119-124)\n\n   ```typescript\n   const clearFilters\
  \ = () => {\n     const newParams = new URLSearchParams(searchParams);\n     newParams.delete('assignee');\n\
  \     newParams.delete('project_id');   // Legacy ì œê±°\n     newParams.delete('project_ids');\
  \  // ìƒˆ í•„í„° ì œê±°\n     newParams.delete('program');\n     // ...\n   };\n   ```\n\n\
  **íŒŒì¼ ë³€ê²½**:\n\n- `src/features/tasks/selectors.ts` - projectIds ë°°ì—´ í•„í„°ë§ ë¡œì§ ì¶”ê°€\n- `src/pages/Kanban/useKanbanFilters.ts`\
  \ - Legacy project_id ì œê±° ë¡œì§ ì¶”ê°€\n\n**ê²€ì¦ ê²°ê³¼**:\n\n```bash\n> npm run build\nâœ“ TypeScript\
  \ compilation successful\nâœ“ Vite build successful (1.53s)\nâœ“ 242 modules transformed\n\
  âœ“ All chunks optimized\n```\n\n---\n\n**ìµœì¢… ìƒíƒœ**: âœ… Task ì™„ë£Œ\n\n**ë‹¬ì„± ëª©í‘œ**:\n\n- âœ…\
  \ Project ë“œë¡­ë‹¤ìš´ â†’ Program+Project ë²„íŠ¼ UI êµì²´\n- âœ… Program ì„ íƒ ì‹œ í•˜ìœ„ í”„ë¡œì íŠ¸ ë²„íŠ¼ í‘œì‹œ\n- âœ… ë‹¤ì¤‘\
  \ ì„ íƒ ì§€ì› (í”„ë¡œì íŠ¸)\n- âœ… ë²„íŠ¼ë³„ Task ì¹´ìš´íŠ¸ ë±ƒì§€ í‘œì‹œ\n- âœ… CRITICAL ì´ìŠˆ 3ê°œ ëª¨ë‘ ìˆ˜ì •\n\n**í–¥í›„ ê°œì„  ì‚¬í•­**\
  \ (MEDIUM Priority):\n\n- [ ] ì ‘ê·¼ì„±: aria-pressed ì†ì„± ì¶”ê°€\n\n- [ ] ì„±ëŠ¥: Task ì¹´ìš´íŠ¸ ê³„ì‚° ë©”ëª¨ì´ì œì´ì…˜\n\
  \n---\n\n2026-01-08 - Implementation Complete + Codex Review\n\n**Implementation\
  \ Status**: âœ… Build successful, all TypeScript checks passed\n\n**Files Modified**:\n\
  \n1. `src/types/index.ts` - Added Program interface\n2. `src/pages/Kanban/useKanbanFilters.ts`\
  \ - Added projectIds multi-select state\n3. `src/pages/Kanban/KanbanFilters.tsx`\
  \ - Complete button UI replacement\n4. `src/pages/Kanban/index.tsx` - Pass programs,\
  \ tasks props to KanbanFilters\n5. `src/index.css` - Button styles (purple program,\
  \ sky child)\n\n**Codex Code Review Findings** (194,264 tokens):\n\n\U0001F534 **HIGH\
  \ Priority Issues**:\n\n1. **projectIds Not Connected to Task Filtering** (CRITICAL)\n\
  \n   - Location: `src/features/tasks/selectors.ts:49-70`\n   - Issue: `buildKanbanColumns`\
  \ / `applyUrlFilters` only filter by legacy `projectId` (single)\n   - Impact: Multi-select\
  \ buttons are purely cosmetic - task list doesn't change\n   - Fix Needed: Update\
  \ selector to use `projectIds` array instead\n\n2. **URL Param Setter Race Conditions**\n\
  \n   - Location: `src/pages/Kanban/useKanbanFilters.ts:61-114`\n   - Issue: Each\
  \ setter clones current searchParams, sequential calls overwrite each other\n  \
  \ - Impact: \"All\" button fails to clear filters, week/month toggles conflict\n\
  \   - Fix Needed: Batch URL updates or use functional setState pattern\n\n3. **Legacy\
  \ project_id Never Cleared**\n\n   - Location: `src/pages/Kanban/useKanbanFilters.ts:51-59`\n\
  \   - Issue: New UI never calls `setProjectId`, old `project_id` param persists\n\
  \   - Impact: Hidden filter remains active even when UI shows \"All\"\n   - Fix\
  \ Needed: Clear `project_id` when using new projectIds filter\n\n\U0001F7E1 **MEDIUM\
  \ Priority Issues**:\n\n4. **Accessibility - Missing aria-pressed**\n\n   - Location:\
  \ `src/pages/Kanban/KanbanFilters.tsx:156-291`\n   - Issue: Toggle buttons only\
  \ use color/background for state\n   - Impact: Screen readers can't detect active\
  \ state\n   - Fix Needed: Add `aria-pressed={isActive}` to all toggle buttons\n\n\
  5. **Performance - Repeated Task Filtering**\n\n   - Location: `src/pages/Kanban/KanbanFilters.tsx:55-84`\n\
  \   - Issue: `getProjectTaskCount` filters entire task list O(NÂ·M) per render\n\
  \   - Impact: Performance degrades with many projects/tasks\n   - Fix Needed: Build\
  \ memoized `Map<project_id, count>` once\n\n**Next Steps**:\n\n- Fix HIGH priority\
  \ issues (projectIds filtering, URL state management)\n- Add accessibility attributes\n\
  - Optimize task count calculation\n\n---\n\n## ì°¸ê³  ë¬¸ì„œ\n\n- \\[\\[prj-023\\]\\] -\
  \ ì†Œì† Project\n- \\[\\[\\_dashboard/js/components/kanban.js\\]\\] - ë ˆê±°ì‹œ êµ¬í˜„\n- \\\
  [\\[\\_dashboard/css/kanban.css\\]\\] - ë ˆê±°ì‹œ ìŠ¤íƒ€ì¼\n\n---\n\n**Created**: 2026-01-08\
  \ **Assignee**: ê¹€ì€í–¥ **Due**: 2026-01-08"
links:
- label: ë§ˆì´ê·¸ë ˆì´ì…˜ì½”ë“œ ì „ë‹¬
  url: https://docs.google.com/spreadsheets/d/1aqjgDn0oSwx_IlVwIGUHd_w0dHARbh55Jg_taKUKJJA/edit?gid=0#gid=0
---
# Dashboard - Kanban Filter UI ë§ˆì´ê·¸ë ˆì´ì…˜ (Program+Project ë²„íŠ¼)

> Task ID: `tsk-023-09` | Project: `prj-023` | Status: done

## ëª©í‘œ

ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œ(`_dashboard/`)ì˜ Project + Program ë²„íŠ¼ í•„í„° UIë¥¼ Dashboard V2 KanbanFiltersì— ë§ˆì´ê·¸ë ˆì´ì…˜

**ì™„ë£Œ ì¡°ê±´**:
1. í˜„ì¬ Project ë“œë¡­ë‹¤ìš´ì„ Program + Project ë²„íŠ¼ UIë¡œ êµì²´
2. Program ì„ íƒ ì‹œ í•˜ìœ„ í”„ë¡œì íŠ¸ ë²„íŠ¼ í‘œì‹œ
3. ë‹¤ì¤‘ ì„ íƒ ì§€ì› (í”„ë¡œì íŠ¸)
4. ë²„íŠ¼ë³„ Task ì¹´ìš´íŠ¸ ë±ƒì§€ í‘œì‹œ

---

## ìƒì„¸ ë‚´ìš©

### ë°°ê²½

ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œì˜ ì¹¸ë°˜ í•„í„° ë²„íŠ¼ UIê°€ ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° í¸í•¨:
- All ë²„íŠ¼ (ì „ì²´ Task ìˆ˜ í‘œì‹œ)
- Program ë²„íŠ¼ë“¤ (ë³´ë¼ìƒ‰, í† ê¸€ ë°©ì‹)
- Child Project ë²„íŠ¼ë“¤ (í•˜ëŠ˜ìƒ‰, Program ì„ íƒ ì‹œë§Œ í‘œì‹œ)
- ë…ë¦½ Project ë²„íŠ¼ë“¤ (í”„ë¡œì íŠ¸ë³„ ìƒ‰ìƒ)

í˜„ì¬ Dashboard V2ëŠ” ë‹¨ìˆœ ë“œë¡­ë‹¤ìš´ë§Œ ìˆì–´ ë¶ˆí¸í•¨.

### ì‘ì—… ë‚´ìš©

**ë³€ê²½ íŒŒì¼:**
- `src/pages/Kanban/KanbanFilters.tsx` - Project ë“œë¡­ë‹¤ìš´ â†’ ë²„íŠ¼ UI
- `src/pages/Kanban/useKanbanFilters.ts` - programId ìƒíƒœ ì¶”ê°€ (í•„ìš”ì‹œ)
- `src/index.css` ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ Tailwind - ë²„íŠ¼ ìŠ¤íƒ€ì¼

**ë ˆê±°ì‹œ ì†ŒìŠ¤ ì°¸ì¡°:**
- `/public/_dashboard/js/components/kanban.js` (renderProjectFilter, 9~187ì¤„)
- `/public/_dashboard/css/kanban.css` (110~273ì¤„)

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] useKanbanFiltersì— programId ìƒíƒœ í™•ì¸/ì¶”ê°€
- [ ] KanbanFilters.tsxì— Program+Project ë²„íŠ¼ UI êµ¬í˜„
- [ ] ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ë³´ë¼ìƒ‰ Program, í•˜ëŠ˜ìƒ‰ Child, í”„ë¡œì íŠ¸ ìƒ‰ìƒ)
- [ ] Task ì¹´ìš´íŠ¸ ê³„ì‚° ë° ë±ƒì§€ í‘œì‹œ
- [ ] ë‹¤ì¤‘ ì„ íƒ ë¡œì§ êµ¬í˜„
- [ ] npm run build ì„±ê³µ í™•ì¸

---

## Notes

### PRD

## ğŸ“Š ì•„í‚¤í…ì²˜ ë„ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Kanban Filter UI Architecture                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ UI Layer (KanbanFilters.tsx)                              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ [All(15)] [Program1(5)â„¹ï¸] [Program2(3)â„¹ï¸] â”‚ [Child1â„¹ï¸]   â”‚  â”‚
â”‚  â”‚     â†“           â†“              â†“               â†“          â”‚  â”‚
â”‚  â”‚ clearAll() setProgramId()  setProgramId() toggleProject() â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                          â”‚
â”‚       â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ State Layer (useKanbanFilters + useUrlFilters)            â”‚  â”‚
â”‚  â”‚ - programId, setProgramId() (ì´ë¯¸ ì¡´ì¬)                    â”‚  â”‚
â”‚  â”‚ - projectIds: string[] (ë‹¤ì¤‘ì„ íƒ - ì¶”ê°€ í•„ìš”)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                          â”‚
â”‚       â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Data Layer (useDashboardInit)                             â”‚  â”‚
â”‚  â”‚ - programs, projects, tasks â†’ Task ì¹´ìš´íŠ¸ ê³„ì‚°            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸
- React 19 + TypeScript + Vite 7
- State: URL params (useUrlFilters - programId ì´ë¯¸ ì§€ì›)
- Styling: Tailwind CSS 4

## ğŸ¯ êµ¬í˜„ ë²”ìœ„

### ë²„íŠ¼ íƒ€ì…
| íƒ€ì… | í´ë˜ìŠ¤ | ìŠ¤íƒ€ì¼ | ë™ì‘ |
|------|--------|--------|------|
| All | `filter-btn` | ê¸°ë³¸ | ì „ì²´ í•„í„° í•´ì œ |
| Program | `filter-btn-program` | ë³´ë¼ìƒ‰ | í† ê¸€ + Child í‘œì‹œ |
| Child Project | `filter-btn-child` | í•˜ëŠ˜ìƒ‰ | ë‹¤ì¤‘ ì„ íƒ |
| Independent | `filter-btn` | í”„ë¡œì íŠ¸ìƒ‰ | ë‹¤ì¤‘ ì„ íƒ |

### ë³€ê²½ íŒŒì¼
1. `types/index.ts` - Program íƒ€ì… ì¶”ê°€
2. `useKanbanFilters.ts` - projectIds ë‹¤ì¤‘ì„ íƒ
3. `KanbanFilters.tsx` - ë²„íŠ¼ UI êµ¬í˜„
4. `index.css` - ë²„íŠ¼ ìŠ¤íƒ€ì¼

## âœ… ì„±ê³µ ê¸°ì¤€
- [ ] All ë²„íŠ¼ â†’ ì „ì²´ í‘œì‹œ
- [ ] Program í† ê¸€ ë™ì‘
- [ ] Child ë‹¤ì¤‘ ì„ íƒ
- [ ] Task ì¹´ìš´íŠ¸ ë±ƒì§€
- [ ] npm run build ì„±ê³µ

### ì‘ì—… ë¡œê·¸

#### 2026-01-08 - Task Complete: UI Migration + Critical Fixes

**ê°œìš”**: Dashboard V2 Kanban Filter UI ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ. ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œì˜ Program+Project ë²„íŠ¼ UIë¥¼ ì„±ê³µì ìœ¼ë¡œ ì´ì‹í•˜ê³ , Codex ë¦¬ë·°ì—ì„œ ë°œê²¬ëœ 3ê°œ CRITICAL ì´ìŠˆ ëª¨ë‘ ìˆ˜ì • ì™„ë£Œ.

**Phase 1: Initial Implementation**

**ë³€ê²½ì‚¬í•­**:
- ê°œë°œ: Program íƒ€ì… ì •ì˜, projectIds ë‹¤ì¤‘ì„ íƒ ìƒíƒœ, ë²„íŠ¼ UI ì»´í¬ë„ŒíŠ¸
- ìˆ˜ì •: KanbanFilters.tsx (ë“œë¡­ë‹¤ìš´ â†’ ë²„íŠ¼), useKanbanFilters.ts (ìƒíƒœ ì¶”ê°€)
- ì¶”ê°€: Tailwind ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ë³´ë¼ìƒ‰ Program, í•˜ëŠ˜ìƒ‰ Child)

**íŒŒì¼ ë³€ê²½**:
- `src/types/index.ts` - Program ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
- `src/pages/Kanban/useKanbanFilters.ts` - projectIds ë‹¤ì¤‘ì„ íƒ ìƒíƒœ ì¶”ê°€
- `src/pages/Kanban/KanbanFilters.tsx` - ì™„ì „í•œ ë²„íŠ¼ UI êµ¬í˜„
- `src/pages/Kanban/index.tsx` - programs, tasks props ì „ë‹¬
- `src/index.css` - ë²„íŠ¼ ìŠ¤íƒ€ì¼ (filter-btn-program, filter-btn-child)

**ê²°ê³¼**: âœ… ë¹Œë“œ ì„±ê³µ (TypeScript ì²´í¬ í†µê³¼)

---

**Phase 2: Codex Code Review** (194,264 tokens)

**ë°œê²¬ëœ ì´ìŠˆ**:

ğŸ”´ **HIGH Priority (3ê°œ - ëª¨ë‘ ìˆ˜ì • ì™„ë£Œ)**:
1. projectIdsê°€ Task í•„í„°ë§ì— ë¯¸ì—°ê²° (src/features/tasks/selectors.ts)
2. URL íŒŒë¼ë¯¸í„° setter ê²½ìŸ ì¡°ê±´ (useKanbanFilters.ts)
3. Legacy project_id íŒŒë¼ë¯¸í„° ë¯¸ì œê±° (useKanbanFilters.ts)

ğŸŸ¡ **MEDIUM Priority (2ê°œ - í–¥í›„ ê°œì„ )**:
4. ì ‘ê·¼ì„±: aria-pressed ëˆ„ë½ (KanbanFilters.tsx)
5. ì„±ëŠ¥: Task ì¹´ìš´íŠ¸ ê³„ì‚° ì¤‘ë³µ (KanbanFilters.tsx)

---

**Phase 3: Critical Fix Implementation**

**ìˆ˜ì •ì‚¬í•­**:

1. **projectIds í•„í„°ë§ ì—°ê²°** (selectors.ts:44-73)
   ```typescript
   // applyUrlFiltersì— projectIds ì§€ì› ì¶”ê°€
   export const applyUrlFilters = (
     tasks: Task[],
     filters: UrlFilterState & { projectIds?: string[] },
     projects: Project[] = []
   ): Task[] => {
     // Priority: projectIds > projectId (ìƒˆ UIê°€ projectIds ì‚¬ìš©)
     if (projectIds && projectIds.length > 0) {
       filtered = filtered.filter((t) => projectIds.includes(t.project_id));
     } else if (projectId) {
       filtered = filtered.filter((t) => t.project_id === projectId);
     }
   }
   ```

2. **Legacy project_id ì •ë¦¬** (useKanbanFilters.ts:61-92)
   ```typescript
   const setProjectIds = (ids: string[]) => {
     const newParams = new URLSearchParams(searchParams);
     newParams.delete('project_ids');
     newParams.delete('project_id'); // Legacy ì œê±°
     ids.forEach(id => newParams.append('project_ids', id));
     setSearchParams(newParams);
   };

   const setProgramId = (id: string | null) => {
     // ...
     newParams.delete('project_ids');
     newParams.delete('project_id'); // Legacy ì œê±°
   };
   ```

3. **clearFiltersì— project_id ì¶”ê°€** (useKanbanFilters.ts:119-124)
   ```typescript
   const clearFilters = () => {
     const newParams = new URLSearchParams(searchParams);
     newParams.delete('assignee');
     newParams.delete('project_id');   // Legacy ì œê±°
     newParams.delete('project_ids');  // ìƒˆ í•„í„° ì œê±°
     newParams.delete('program');
     // ...
   };
   ```

**íŒŒì¼ ë³€ê²½**:
- `src/features/tasks/selectors.ts` - projectIds ë°°ì—´ í•„í„°ë§ ë¡œì§ ì¶”ê°€
- `src/pages/Kanban/useKanbanFilters.ts` - Legacy project_id ì œê±° ë¡œì§ ì¶”ê°€

**ê²€ì¦ ê²°ê³¼**:
```bash
> npm run build
âœ“ TypeScript compilation successful
âœ“ Vite build successful (1.53s)
âœ“ 242 modules transformed
âœ“ All chunks optimized
```

---

**ìµœì¢… ìƒíƒœ**: âœ… Task ì™„ë£Œ

**ë‹¬ì„± ëª©í‘œ**:
- âœ… Project ë“œë¡­ë‹¤ìš´ â†’ Program+Project ë²„íŠ¼ UI êµì²´
- âœ… Program ì„ íƒ ì‹œ í•˜ìœ„ í”„ë¡œì íŠ¸ ë²„íŠ¼ í‘œì‹œ
- âœ… ë‹¤ì¤‘ ì„ íƒ ì§€ì› (í”„ë¡œì íŠ¸)
- âœ… ë²„íŠ¼ë³„ Task ì¹´ìš´íŠ¸ ë±ƒì§€ í‘œì‹œ
- âœ… CRITICAL ì´ìŠˆ 3ê°œ ëª¨ë‘ ìˆ˜ì •

**í–¥í›„ ê°œì„  ì‚¬í•­** (MEDIUM Priority):
- [ ] ì ‘ê·¼ì„±: aria-pressed ì†ì„± ì¶”ê°€
- [ ] ì„±ëŠ¥: Task ì¹´ìš´íŠ¸ ê³„ì‚° ë©”ëª¨ì´ì œì´ì…˜

---

#### 2026-01-08 - Implementation Complete + Codex Review

**Implementation Status**: âœ… Build successful, all TypeScript checks passed

**Files Modified**:
1. `src/types/index.ts` - Added Program interface
2. `src/pages/Kanban/useKanbanFilters.ts` - Added projectIds multi-select state
3. `src/pages/Kanban/KanbanFilters.tsx` - Complete button UI replacement
4. `src/pages/Kanban/index.tsx` - Pass programs, tasks props to KanbanFilters
5. `src/index.css` - Button styles (purple program, sky child)

**Codex Code Review Findings** (194,264 tokens):

ğŸ”´ **HIGH Priority Issues**:

1. **projectIds Not Connected to Task Filtering** (CRITICAL)
   - Location: `src/features/tasks/selectors.ts:49-70`
   - Issue: `buildKanbanColumns` / `applyUrlFilters` only filter by legacy `projectId` (single)
   - Impact: Multi-select buttons are purely cosmetic - task list doesn't change
   - Fix Needed: Update selector to use `projectIds` array instead

2. **URL Param Setter Race Conditions**
   - Location: `src/pages/Kanban/useKanbanFilters.ts:61-114`
   - Issue: Each setter clones current searchParams, sequential calls overwrite each other
   - Impact: "All" button fails to clear filters, week/month toggles conflict
   - Fix Needed: Batch URL updates or use functional setState pattern

3. **Legacy project_id Never Cleared**
   - Location: `src/pages/Kanban/useKanbanFilters.ts:51-59`
   - Issue: New UI never calls `setProjectId`, old `project_id` param persists
   - Impact: Hidden filter remains active even when UI shows "All"
   - Fix Needed: Clear `project_id` when using new projectIds filter

ğŸŸ¡ **MEDIUM Priority Issues**:

4. **Accessibility - Missing aria-pressed**
   - Location: `src/pages/Kanban/KanbanFilters.tsx:156-291`
   - Issue: Toggle buttons only use color/background for state
   - Impact: Screen readers can't detect active state
   - Fix Needed: Add `aria-pressed={isActive}` to all toggle buttons

5. **Performance - Repeated Task Filtering**
   - Location: `src/pages/Kanban/KanbanFilters.tsx:55-84`
   - Issue: `getProjectTaskCount` filters entire task list O(NÂ·M) per render
   - Impact: Performance degrades with many projects/tasks
   - Fix Needed: Build memoized `Map<project_id, count>` once

**Next Steps**:
- Fix HIGH priority issues (projectIds filtering, URL state management)
- Add accessibility attributes
- Optimize task count calculation

---

## ì°¸ê³  ë¬¸ì„œ

- [[prj-023]] - ì†Œì† Project
- [[_dashboard/js/components/kanban.js]] - ë ˆê±°ì‹œ êµ¬í˜„
- [[_dashboard/css/kanban.css]] - ë ˆê±°ì‹œ ìŠ¤íƒ€ì¼

---

**Created**: 2026-01-08
**Assignee**: ê¹€ì€í–¥
**Due**: 2026-01-08
