---
entity_type: Task
entity_id: tsk-023-1768100698653
entity_name: Dashboard - Calendar 뷰 Favorites 추가 및 필터 상태 유지
created: 2026-01-11
updated: 2026-01-11
status: todo
project_id: prj-023
parent_id: prj-023
assignee: 김은향
priority: medium
start_date: 2026-01-11
due: 2026-01-11
aliases:
  - tsk-023-1768100698653
tags: []
type: dev
target_project: loop
---
# Dashboard - Calendar 뷰 Favorites 추가 및 필터 상태 유지

## 설명

Calendar 뷰에서 두 가지 기능이 누락/미동작:
1. **Favorites 영역 누락**: Kanban에는 있는 FavoritesStrip이 Calendar에 없음
2. **필터 상태 미유지**: 뷰 전환 시 (Kanban → Calendar → Kanban) 필터가 초기화됨

## 체크리스트

- [ ] CalendarPage에 FavoritesStrip 추가
- [ ] Header NavLink에 search params 유지 로직 추가
- [ ] 빌드 확인

## 참고

- FavoritesStrip: `src/features/favorites/components/FavoritesStrip.tsx`
- CalendarPage: `src/features/calendar/CalendarPage.tsx`
- Header: `src/components/layout/Header.tsx`

## Notes

### Execution Log (2026-01-11)

**Task**: Dashboard - Calendar 뷰 Favorites 추가 및 필터 상태 유지

**Implementation Steps**:

1. **CalendarPage.tsx 수정** (`/Users/gim-eunhyang/dev/loop/public/dashboard-v2/src/features/calendar/CalendarPage.tsx`)
   - Import 추가: `import { FavoritesStrip } from '@/features/favorites';`
   - FavoritesStrip 렌더링 추가 (TaskFilterBar 아래, CustomToolbar 위):
     ```tsx
     {dashboardData && (
         <FavoritesStrip
             tasks={dashboardData.tasks}
             projects={dashboardData.projects}
             programs={dashboardData.programs || []}
         />
     )}
     ```

2. **Header.tsx 수정** (`/Users/gim-eunhyang/dev/loop/public/dashboard-v2/src/components/layout/Header.tsx`)
   - Import 추가: `import { useLocation } from 'react-router-dom';`
   - 컴포넌트 내부에 `const location = useLocation();` 추가
   - 모든 NavLink를 search params 유지 형태로 수정:
     ```tsx
     <NavLink to={{ pathname: '/kanban', search: location.search }} className={navLinkClass}>Kanban</NavLink>
     <NavLink to={{ pathname: '/calendar', search: location.search }} className={navLinkClass}>Calendar</NavLink>
     <NavLink to={{ pathname: '/graph', search: location.search }} className={navLinkClass}>Graph</NavLink>
     <NavLink to={{ pathname: '/pending', search: location.search }} className={navLinkClass}>...</NavLink>
     ```

3. **빌드 검증**
   - Command: `npm run build`
   - Result: ✅ Success (built in 2.63s)
   - Output: All chunks generated successfully with no TypeScript errors

**Modified Files**:
- `/Users/gim-eunhyang/dev/loop/public/dashboard-v2/src/features/calendar/CalendarPage.tsx`
- `/Users/gim-eunhyang/dev/loop/public/dashboard-v2/src/components/layout/Header.tsx`

**Verification**:
- [x] FavoritesStrip added to CalendarPage (matching KanbanPage pattern)
- [x] Header NavLinks preserve search params using location.search
- [x] Build passes without errors

**Status**: Implementation complete. Ready for manual testing:
1. Set project filter in Kanban view
2. Navigate to Calendar → verify filter persists
3. Verify FavoritesStrip displays correctly
4. Test Favorites click functionality in Calendar view

## PRD

### 문제 분석

#### 1. Favorites 영역 누락

| 페이지 | FavoritesStrip | 위치 |
|--------|---------------|------|
| KanbanPage | O (line 111-115) | TaskFilterBar 아래 |
| CalendarPage | X | - |

**원인**: CalendarPage에 FavoritesStrip import 및 렌더링 없음

#### 2. 필터 상태 미유지

**Header.tsx line 105-106:**
```tsx
<NavLink to="/kanban">Kanban</NavLink>
<NavLink to="/calendar">Calendar</NavLink>
```

NavLink가 **절대 경로만** 사용 → search params 유실

**예시:**
- 현재: `/kanban?program=pgm-xxx&project_ids=prj-023`
- Calendar 클릭 → `/calendar` (params 사라짐!)

### Tech Spec

#### 수정 1: CalendarPage.tsx

```tsx
// import 추가
import { FavoritesStrip } from '@/features/favorites';

// return 내부 - TaskFilterBar 아래, CustomToolbar 위에 추가
{dashboardData && (
  <FavoritesStrip
    tasks={dashboardData.tasks}
    projects={dashboardData.projects}
    programs={dashboardData.programs || []}
  />
)}
```

#### 수정 2: Header.tsx

```tsx
// import 추가
import { useLocation } from 'react-router-dom';

// 컴포넌트 내부
const location = useLocation();

// NavLink 수정 (모든 네비게이션 링크)
<NavLink to={{ pathname: '/kanban', search: location.search }} className={navLinkClass}>
  Kanban
</NavLink>
<NavLink to={{ pathname: '/calendar', search: location.search }} className={navLinkClass}>
  Calendar
</NavLink>
<NavLink to={{ pathname: '/graph', search: location.search }} className={navLinkClass}>
  Graph
</NavLink>
<NavLink to={{ pathname: '/pending', search: location.search }} className={navLinkClass}>
  ...
</NavLink>
```

### 검증 계획

1. `npm run build` 통과 확인
2. 수동 테스트:
   - Kanban에서 프로젝트 필터 설정
   - Calendar로 이동 → 필터 유지 확인
   - Favorites 영역 표시 확인
   - Calendar에서 Favorites 클릭 동작 확인
