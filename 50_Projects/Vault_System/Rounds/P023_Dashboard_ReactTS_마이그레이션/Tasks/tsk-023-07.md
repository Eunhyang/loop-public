---
entity_type: Task
entity_id: "tsk-023-07"
entity_name: "Dashboard v2 - TaskDrawer를 TaskForm으로 통합"
created: 2026-01-08
updated: 2026-01-08
status: done
closed: 2026-01-08

# === 계층 ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-07"]

# === 관계 ===
outgoing_relations: []
validates: []
validated_by: []

# === Task 전용 ===
assignee: "김은향"
start_date: 2026-01-08
due: 2026-01-08
priority: high
estimated_hours: null
actual_hours: null

# === Task 유형 (dev Task 연동용) ===
type: dev
target_project: loop

# === 분류 ===
tags: ["dashboard-v2", "refactor", "entitydrawer"]
priority_flag: high
---

# Dashboard v2 - TaskDrawer를 TaskForm으로 통합

> Task ID: `tsk-023-07` | Project: `prj-023` | Status: done

## 목표

**완료 조건**:
1. TaskDrawer 기능이 TaskForm으로 이전됨
2. EntityDrawer에서 TaskForm이 정상 동작
3. 기존 TaskDrawer 파일 삭제
4. 빌드 성공

---

## 상세 내용

### 배경

현재 두 개의 중복 시스템이 존재:
1. **TaskDrawer** (600줄) - Kanban 클릭 시 사용, 6개 기능 구현됨
2. **TaskForm** (간단 버전) - EntityDrawer unified 아키텍처용

EntityDrawer가 새로운 표준 아키텍처이므로, TaskDrawer 기능을 TaskForm으로 통합해야 함.

### 현재 구조

```
기존 (중복):
├── TaskDrawer/index.tsx     # 600줄, Kanban에서 직접 사용
└── TaskForm.tsx             # 간단 버전, EntityDrawer에서 사용

목표 (통합):
├── TaskForm.tsx             # TaskDrawer 기능 통합
└── (TaskDrawer 삭제)
```

### 통합할 기능 (TaskDrawer → TaskForm)

1. **Header**: ID 복사, 공유링크, 전체화면 토글
2. **Task Type Chips**: 타입 선택 칩
3. **Properties Grid**: Status, Priority, Assignee, Project, Start Date, Due Date
4. **Relations Section**: Project, Track, Conditions, Validates, Links
5. **Notes Section**: 마크다운 렌더링 (편집/프리뷰)
6. **Delete 버튼**: 삭제 기능
7. **Footer**: Delete, Cancel, Save

### 변경 필요 파일

1. `features/tasks/components/TaskForm.tsx` - 기능 이전
2. `components/layout/EntityDrawer.tsx` - width 동적 지원 추가 (전체화면용)
3. `components/common/DrawerShell.tsx` - isExpanded prop 추가
4. `pages/Kanban/index.tsx` - TaskDrawer → EntityDrawer로 변경
5. `contexts/UiContext.tsx` - taskDrawer 상태 → activeEntityDrawer로 통합
6. `components/layout/AppLayout.tsx` - TaskDrawer import 제거

---

## 체크리스트

- [ ] TaskForm.tsx에 TaskDrawer 기능 이전
- [ ] DrawerShell에 isExpanded prop 추가
- [ ] EntityDrawer에서 전체화면 지원
- [ ] Kanban에서 EntityDrawer 사용하도록 변경
- [ ] UiContext 정리 (taskDrawer → activeEntityDrawer)
- [ ] TaskDrawer 폴더 삭제
- [ ] 빌드 테스트
- [ ] Kanban Task 클릭 동작 확인

---

## Notes

### PRD

#### 아키텍처 변경

```
Before:
┌─────────────────┐     ┌─────────────────┐
│ Kanban          │────►│ TaskDrawer      │  (직접 사용)
└─────────────────┘     └─────────────────┘

┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│ Header 버튼     │────►│ EntityDrawer    │────►│ TaskForm        │  (별도 시스템)
└─────────────────┘     └─────────────────┘     └─────────────────┘

After:
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│ Kanban          │────►│ EntityDrawer    │────►│ TaskForm        │
│ Header 버튼     │────►│ (unified)       │     │ (full features) │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

#### 구현 순서

1. **DrawerShell 확장** - isExpanded prop 추가
2. **TaskForm 기능 이전** - TaskDrawer의 모든 기능 복사
3. **EntityDrawer 수정** - Task용 width 동적 처리
4. **UiContext 통합** - taskDrawer 상태 제거, activeEntityDrawer로 통일
5. **Kanban 수정** - openEditTask → openEntity('task', 'edit', id)
6. **정리** - TaskDrawer 폴더 삭제, 미사용 import 제거

### 작업 로그

#### 2026-01-08
**개요**: TaskDrawer를 EntityDrawer 아키텍처로 통합 완료. 600줄의 TaskDrawer 기능을 TaskForm으로 이전하고, 중복 시스템 제거하여 단일 unified 아키텍처 확립.

**변경사항**:
- 개발:
  - TaskForm에 전체 기능 이전 (Header, Type Chips, Properties Grid, Relations, Notes, Delete)
  - DrawerShell에 isExpanded prop 추가 (전체화면 토글 지원)
  - EntityDrawer에 동적 width 지원 (Task용 전체화면)
- 수정:
  - UiContext: taskDrawer 상태 제거, activeEntityDrawer로 통합
  - Kanban: TaskDrawer → EntityDrawer 사용으로 변경
  - AppLayout: TaskDrawer import 제거
- 삭제:
  - `features/tasks/components/TaskDrawer/` 폴더 완전 삭제 (600줄)
  - 관련 import 및 state 정리

**파일 변경**:
- `features/tasks/components/TaskForm.tsx` - TaskDrawer 전체 기능 통합
- `components/common/DrawerShell.tsx` - isExpanded prop 추가
- `components/layout/EntityDrawer.tsx` - Task용 동적 width 지원
- `contexts/UiContext.tsx` - taskDrawer 상태 제거, unified 아키텍처로 통합
- `pages/Kanban/index.tsx` - EntityDrawer 사용으로 변경
- `components/layout/AppLayout.tsx` - TaskDrawer import 제거

**아키텍처 변경**:
```
Before: 2개 중복 시스템
├── TaskDrawer (600줄) - Kanban에서 직접 사용
└── TaskForm (간단 버전) - EntityDrawer에서 사용

After: 단일 unified 시스템
└── EntityDrawer → TaskForm (full features)
```

**결과**: ✅ 빌드 성공, 사용자 테스트 완료, TaskDrawer 완전 제거

**완료 상태**: Task 완료 (status: done)

---

## 참고 문서

- [[prj-023]] - 소속 Project
- [[tsk-023-05]] - TaskDrawer 기능 구현 (이전 Task)
- 파일: `dashboard-v2/src/features/tasks/components/TaskDrawer/index.tsx`
- 파일: `dashboard-v2/src/features/tasks/components/TaskForm.tsx`
- 파일: `dashboard-v2/src/components/layout/EntityDrawer.tsx`

---

**Created**: 2026-01-08
**Assignee**: 김은향
**Due**: 2026-01-08
