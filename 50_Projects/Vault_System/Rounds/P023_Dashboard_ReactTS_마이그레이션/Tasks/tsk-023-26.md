---
entity_type: Task
entity_id: tsk-023-26
entity_name: Dashboard - 필터 버튼 Drawer 아이콘 추가
created: 2026-01-08
updated: '2026-01-09'
closed: 2026-01-09
status: done
parent_id: prj-023
project_id: prj-023
aliases:
- tsk-023-26
outgoing_relations: []
validates: []
validated_by: []
assignee: 김은향
start_date: 2026-01-08
due: 2026-01-09
priority: medium
estimated_hours: 2
actual_hours: null
type: dev
target_project: loop
tags:
- dashboard
- filter
- drawer
- react
- ux
priority_flag: medium
notes: "# Dashboard - 필터 버튼 Drawer 아이콘 추가\n\n> Task ID: `tsk-023-26` | Project: `prj-023`\
  \ | Status: done\n\n## 목표\n\n**완료 조건**:\n\n1. Program 필터 버튼에 작은 아이콘(i) 추가 → 클릭 시\
  \ Program Drawer 열림 (view 모드)\n2. Child Project 필터 버튼에 아이콘 추가 → 클릭 시 Project Drawer\
  \ 열림\n3. Independent Project 필터 버튼에 아이콘 추가 → 클릭 시 Project Drawer 열림\n4. 버튼 클릭(필터링)과\
  \ 아이콘 클릭(Drawer 열기) 동작 분리\n\n---\n\n## 상세 내용\n\n### 배경\n\n대시보드 필터 바에서 Program/Project\
  \ 버튼을 클릭하면 필터링만 동작합니다. 사용자가 해당 엔티티의 상세 정보를 보려면 별도로 검색하거나 다른 경로로 접근해야 합니다.\n\n**요청사항**:\n\
  \n- 필터 버튼에 작은 아이콘을 추가하여 클릭 시 해당 Program/Project의 Drawer를 바로 열 수 있게 함\n- 기존 필터링 동작은\
  \ 유지\n\n### 기술 설계\n\n**UiContext 활용**:\n\n- `openEntityDrawer({ type: 'program'\
  \ | 'project', mode: 'view', id: string })` 사용\n- Drawer 시스템은 이미 구현되어 있음 (EntityDrawer,\
  \ ProgramForm, ProjectForm)\n\n**이벤트 분리**:\n\n- 아이콘 클릭 시 `e.stopPropagation()`으로\
  \ 버튼 클릭 이벤트 방지\n- 버튼 본체 클릭 = 필터링, 아이콘 클릭 = Drawer 열기\n\n---\n\n## 체크리스트\n\n- [ ]\
  \ TaskFilterBar.tsx에 useUi import 추가\n\n- [ ] handleOpenDrawer 핸들러 함수 추가\n\n- [\
  \ ] Program 버튼에 drawer-icon 추가\n\n- [ ] Child Project 버튼에 drawer-icon 추가\n\n- [\
  \ ] Independent Project 버튼에 drawer-icon 추가\n\n- [ ] index.css에 .drawer-icon 스타일\
  \ 추가\n\n- [ ] 빌드 확인 (npm run build)\n\n- [ ] 기능 테스트 (필터링 vs Drawer 열기 분리 동작)\n\n\
  ---\n\n## Notes\n\n### Tech Spec\n\n```\n파일 변경 목록:\n├── src/features/filters/components/TaskFilterBar.tsx\
  \ (수정)\n├── src/index.css (수정)\n└── src/styles/globals.css (수정) - btn-filter에 position:\
  \ relative 추가\n```\n\nTaskFilterBar.tsx 수정사항\n\n**1. Import 추가 (line 1 근처)**\n\n\
  ```tsx\nimport { useUi } from '@/contexts/UiContext';\n```\n\n**2. Hook 추가 (line\
  \ 40 근처)**\n\n```tsx\nconst { openEntityDrawer } = useUi();\n```\n\n**3. Handler\
  \ 추가 (line 152 근처)**\n\n```tsx\n// NOTE: Program/Project 모두 'edit' 모드 사용 (ProgramForm이\
  \ 'view' 모드 미지원)\nconst handleOpenDrawer = (e: React.MouseEvent | React.KeyboardEvent,\
  \ type: 'program' | 'project', id: string) => {\n  e.stopPropagation();\n  openEntityDrawer({\
  \ type, mode: 'edit', id });\n};\n```\n\n**4. 버튼 수정 패턴 (Program/Child/Independent\
  \ 동일)**\n\n```tsx\n<button className={`btn-filter ... pr-7`}>\n  {name}\n  <span\
  \ className=\"filter-count\">{count}</span>\n  <span\n    role=\"button\"\n    tabIndex={0}\n\
  \    className=\"drawer-icon\"\n    onClick={(e) => handleOpenDrawer(e, 'program',\
  \ id)}\n    onKeyDown={(e) => e.key === 'Enter' && handleOpenDrawer(e, 'program',\
  \ id)}\n    aria-label={`Edit ${name}`}\n    title=\"Edit\"\n  >\n    i\n  </span>\n\
  </button>\n```\n\nindex.css 스타일 추가 (line 140 뒤)\n\n```css\n/* Drawer icon on filter\
  \ buttons */\n.drawer-icon {\n  position: absolute;\n  right: 4px;\n  top: 50%;\n\
  \  transform: translateY(-50%);\n  font-size: 9px;\n  font-style: italic;\n  font-weight:\
  \ 600;\n  opacity: 0.3;\n  cursor: pointer;\n  padding: 1px 4px;\n  border-radius:\
  \ 50%;\n  transition: opacity 0.15s ease, background-color 0.15s ease;\n  line-height:\
  \ 1;\n}\n\n.drawer-icon:hover {\n  opacity: 1;\n  background-color: rgba(0, 0, 0,\
  \ 0.15);\n}\n\n.btn-filter-active .drawer-icon {\n  opacity: 0.5;\n}\n\n.btn-filter-active\
  \ .drawer-icon:hover {\n  opacity: 1;\n  background-color: rgba(255, 255, 255, 0.25);\n\
  }\n\n.drawer-icon:focus-visible {\n  opacity: 1;\n  outline: 2px solid rgb(99, 102,\
  \ 241);\n  outline-offset: 1px;\n}\n```\n\nglobals.css 수정 (line 57-63)\n\n**btn-filter에\
  \ position: relative 추가:**\n\n```css\n.btn-filter {\n  @apply px-3 py-1 text-xs\
  \ rounded-md transition-all duration-100 ease-in-out;\n  position: relative;  /*\
  \ 추가: drawer-icon 위치 기준 */\n  background-color: white !important;\n  /* ... 나머지\
  \ 동일 ... */\n}\n```\n\n### Codex Review Summary (2026-01-08)\n\n**Critical Issues\
  \ Found**: 3 (모두 해결됨)\n\n1. **Program drawer 'view' 모드 미지원**\n\n   - `ProgramForm`은\
  \ `mode: 'create' | 'edit'`만 지원\n   - 참조: `EntityDrawer.tsx:106-114`, `ProgramForm.tsx:7-66`\n\
  \   - **해결**: `mode: 'edit'` 사용으로 변경\n\n2. **접근성 문제 (버튼 내 클릭 가능한 span)**\n\n   -\
  \ 키보드 포커스 불가, aria-label 없음\n   - 참조: `TaskFilterBar.tsx:265-337`\n   - **해결**:\
  \ `role=\"button\"`, `tabIndex={0}`, `aria-label`, `onKeyDown` 추가\n\n3. **CSS 위치\
  \ 지정 문제**\n\n   - `.btn-filter`에 `position: relative` 없음\n   - 참조: `globals.css:57-63`\n\
  \   - **해결**: `position: relative` 추가\n\n### Todo\n\n- [ ] Step 1: index.css에 스타일\
  \ 추가\n\n- [ ] Step 2: TaskFilterBar.tsx에 useUi import 및 hook 추가\n\n- [ ] Step 3:\
  \ handleOpenDrawer 핸들러 추가\n\n- [ ] Step 4: Program 버튼 수정\n\n- [ ] Step 5: Child\
  \ Project 버튼 수정\n\n- [ ] Step 6: Independent Project 버튼 수정\n\n- [ ] Step 7: 빌드 및\
  \ 테스트\n\n### Verification\n\n```bash\ncd /Users/gim-eunhyang/dev/loop/public/dashboard-v2\
  \ && npm run build\n```\n\n테스트 항목:\n\n- Program 버튼 클릭 → 필터링 동작\n- Program 버튼의 i\
  \ 아이콘 클릭 → Program Drawer 열림 (view 모드)\n- Child Project 버튼 클릭 → 필터링 동작\n- Child\
  \ Project 버튼의 i 아이콘 클릭 → Project Drawer 열림\n- Independent Project 버튼의 i 아이콘 클릭 →\
  \ Project Drawer 열림\n- Active 상태 버튼에서도 아이콘 잘 보이는지 확인\n\n### 작업 로그\n\n2026-01-09\
  \ 01:15\n\n**개요**: Dashboard 필터 버튼에 Drawer 아이콘 추가 완료. Program, Child Project, Independent\
  \ Project 모든 필터 버튼에 작은 'i' 아이콘을 추가하여 클릭 시 해당 엔티티의 Drawer를 바로 열 수 있도록 구현. 필터링 동작과\
  \ Drawer 열기 동작을 완전히 분리하여 UX 개선.\n\n**변경사항**:\n\n- 개발:\n  - `TaskFilterBar.tsx`에\
  \ `handleOpenDrawer` 핸들러 추가 (Program/Project Drawer 열기)\n  - Program/Child/Independent\
  \ Project 필터 버튼에 drawer-icon span 추가\n  - 접근성 지원: `role=\"button\"`, `tabIndex={0}`,\
  \ `aria-label`, `onKeyDown` (Enter/Space)\n- 수정:\n  - `index.css`에 `.drawer-icon`\
  \ 스타일 추가 (position: absolute, hover effect, focus-visible)\n  - 이벤트 분리: `e.stopPropagation()`\
  \ + `e.preventDefault()`로 필터링/Drawer 동작 분리\n- 개선:\n  - Space 키 핸들링 개선: `e.key ===\
  \ ' '`로 Space 키도 Enter와 동일하게 처리\n  - `e.preventDefault()` 추가로 Space 키 페이지 스크롤 방지\n\
  \n**파일 변경**:\n\n- `src/features/filters/components/TaskFilterBar.tsx` - useUi hook\
  \ 추가, handleOpenDrawer 구현, 3개 버튼 타입에 drawer-icon 추가\n- `src/index.css` - .drawer-icon\
  \ 스타일 정의 (opacity, hover, focus-visible)\n\n**핵심 코드**:\n\n```tsx\n// TaskFilterBar.tsx\
  \ - Handler\nconst handleOpenDrawer = (e: React.MouseEvent | React.KeyboardEvent,\
  \ type: 'program' | 'project', id: string) => {\n  e.stopPropagation();\n  openEntityDrawer({\
  \ type, mode: 'edit', id });\n};\n\n// TaskFilterBar.tsx - Icon implementation (Program\
  \ 버튼 예시)\n<span\n  role=\"button\"\n  tabIndex={0}\n  className=\"drawer-icon\"\n\
  \  onClick={(e) => handleOpenDrawer(e, 'program', prog.entity_id)}\n  onKeyDown={(e)\
  \ => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n\
  \      handleOpenDrawer(e, 'program', prog.entity_id);\n    }\n  }}\n  aria-label={`Edit\
  \ ${prog.entity_name}`}\n  title=\"Edit\"\n>\n  i\n</span>\n```\n\n**Codex 리뷰 반영**:\n\
  \n1. ✅ Program drawer 'view' 모드 → 'edit' 모드로 변경 (ProgramForm이 view 미지원)\n2. ✅ 접근성\
  \ 문제 해결: role, tabIndex, aria-label, onKeyDown 추가\n3. ✅ Space 키 처리 개선: `e.key ===\
  \ ' '` + `e.preventDefault()` 추가\n\n**결과**: ✅ 빌드 성공 (1.45s)\n\n**다음 단계**:\n\n- Task\
  \ 완료 처리 (status: done)\n- 사용자 기능 테스트 확인\n\n&lt;!-- 작업 완료 시 아래 형식으로 기록 (workthrough\
  \ 스킬 자동 생성)\n\nYYYY-MM-DD HH:MM\n\n**개요**: 2-3문장 요약\n\n**변경사항**:\n\n- 개발:\n- 수정:\n\
  - 개선:\n\n**핵심 코드**: (필요시)\n\n**결과**: ✅ 빌드 성공 / ❌ 실패\n\n**다음 단계**: --&gt;\n\n---\n\
  \n## 참고 문서\n\n- \\[\\[prj-023\\]\\] - 소속 Project\n- `/Users/gim-eunhyang/.claude/plans/luminous-swimming-naur.md`\
  \ - Plan Mode 계획\n- `src/contexts/UiContext.tsx` - Drawer 제어 Context\n- `src/components/layout/EntityDrawer.tsx`\
  \ - Drawer 라우터 컴포넌트\n\n---\n\n**Created**: 2026-01-08 **Assignee**: 김은향 **Due**:\
  \ 2026-01-09"
---
# Dashboard - 필터 버튼 Drawer 아이콘 추가

> Task ID: `tsk-023-26` | Project: `prj-023` | Status: done

## 목표

**완료 조건**:
1. Program 필터 버튼에 작은 아이콘(i) 추가 → 클릭 시 Program Drawer 열림 (view 모드)
2. Child Project 필터 버튼에 아이콘 추가 → 클릭 시 Project Drawer 열림
3. Independent Project 필터 버튼에 아이콘 추가 → 클릭 시 Project Drawer 열림
4. 버튼 클릭(필터링)과 아이콘 클릭(Drawer 열기) 동작 분리

---

## 상세 내용

### 배경

대시보드 필터 바에서 Program/Project 버튼을 클릭하면 필터링만 동작합니다. 사용자가 해당 엔티티의 상세 정보를 보려면 별도로 검색하거나 다른 경로로 접근해야 합니다.

**요청사항**:
- 필터 버튼에 작은 아이콘을 추가하여 클릭 시 해당 Program/Project의 Drawer를 바로 열 수 있게 함
- 기존 필터링 동작은 유지

### 기술 설계

**UiContext 활용**:
- `openEntityDrawer({ type: 'program' | 'project', mode: 'view', id: string })` 사용
- Drawer 시스템은 이미 구현되어 있음 (EntityDrawer, ProgramForm, ProjectForm)

**이벤트 분리**:
- 아이콘 클릭 시 `e.stopPropagation()`으로 버튼 클릭 이벤트 방지
- 버튼 본체 클릭 = 필터링, 아이콘 클릭 = Drawer 열기

---

## 체크리스트

- [ ] TaskFilterBar.tsx에 useUi import 추가
- [ ] handleOpenDrawer 핸들러 함수 추가
- [ ] Program 버튼에 drawer-icon 추가
- [ ] Child Project 버튼에 drawer-icon 추가
- [ ] Independent Project 버튼에 drawer-icon 추가
- [ ] index.css에 .drawer-icon 스타일 추가
- [ ] 빌드 확인 (npm run build)
- [ ] 기능 테스트 (필터링 vs Drawer 열기 분리 동작)

---

## Notes

### Tech Spec

```
파일 변경 목록:
├── src/features/filters/components/TaskFilterBar.tsx (수정)
├── src/index.css (수정)
└── src/styles/globals.css (수정) - btn-filter에 position: relative 추가
```

#### TaskFilterBar.tsx 수정사항

**1. Import 추가 (line 1 근처)**
```tsx
import { useUi } from '@/contexts/UiContext';
```

**2. Hook 추가 (line 40 근처)**
```tsx
const { openEntityDrawer } = useUi();
```

**3. Handler 추가 (line 152 근처)**
```tsx
// NOTE: Program/Project 모두 'edit' 모드 사용 (ProgramForm이 'view' 모드 미지원)
const handleOpenDrawer = (e: React.MouseEvent | React.KeyboardEvent, type: 'program' | 'project', id: string) => {
  e.stopPropagation();
  openEntityDrawer({ type, mode: 'edit', id });
};
```

**4. 버튼 수정 패턴 (Program/Child/Independent 동일)**
```tsx
<button className={`btn-filter ... pr-7`}>
  {name}
  <span className="filter-count">{count}</span>
  <span
    role="button"
    tabIndex={0}
    className="drawer-icon"
    onClick={(e) => handleOpenDrawer(e, 'program', id)}
    onKeyDown={(e) => e.key === 'Enter' && handleOpenDrawer(e, 'program', id)}
    aria-label={`Edit ${name}`}
    title="Edit"
  >
    i
  </span>
</button>
```

#### index.css 스타일 추가 (line 140 뒤)

```css
/* Drawer icon on filter buttons */
.drawer-icon {
  position: absolute;
  right: 4px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 9px;
  font-style: italic;
  font-weight: 600;
  opacity: 0.3;
  cursor: pointer;
  padding: 1px 4px;
  border-radius: 50%;
  transition: opacity 0.15s ease, background-color 0.15s ease;
  line-height: 1;
}

.drawer-icon:hover {
  opacity: 1;
  background-color: rgba(0, 0, 0, 0.15);
}

.btn-filter-active .drawer-icon {
  opacity: 0.5;
}

.btn-filter-active .drawer-icon:hover {
  opacity: 1;
  background-color: rgba(255, 255, 255, 0.25);
}

.drawer-icon:focus-visible {
  opacity: 1;
  outline: 2px solid rgb(99, 102, 241);
  outline-offset: 1px;
}
```

#### globals.css 수정 (line 57-63)

**btn-filter에 position: relative 추가:**
```css
.btn-filter {
  @apply px-3 py-1 text-xs rounded-md transition-all duration-100 ease-in-out;
  position: relative;  /* 추가: drawer-icon 위치 기준 */
  background-color: white !important;
  /* ... 나머지 동일 ... */
}
```

### Codex Review Summary (2026-01-08)

**Critical Issues Found**: 3 (모두 해결됨)

1. **Program drawer 'view' 모드 미지원**
   - `ProgramForm`은 `mode: 'create' | 'edit'`만 지원
   - 참조: `EntityDrawer.tsx:106-114`, `ProgramForm.tsx:7-66`
   - **해결**: `mode: 'edit'` 사용으로 변경

2. **접근성 문제 (버튼 내 클릭 가능한 span)**
   - 키보드 포커스 불가, aria-label 없음
   - 참조: `TaskFilterBar.tsx:265-337`
   - **해결**: `role="button"`, `tabIndex={0}`, `aria-label`, `onKeyDown` 추가

3. **CSS 위치 지정 문제**
   - `.btn-filter`에 `position: relative` 없음
   - 참조: `globals.css:57-63`
   - **해결**: `position: relative` 추가

### Todo

- [ ] Step 1: index.css에 스타일 추가
- [ ] Step 2: TaskFilterBar.tsx에 useUi import 및 hook 추가
- [ ] Step 3: handleOpenDrawer 핸들러 추가
- [ ] Step 4: Program 버튼 수정
- [ ] Step 5: Child Project 버튼 수정
- [ ] Step 6: Independent Project 버튼 수정
- [ ] Step 7: 빌드 및 테스트

### Verification

```bash
cd /Users/gim-eunhyang/dev/loop/public/dashboard-v2 && npm run build
```

테스트 항목:
- Program 버튼 클릭 → 필터링 동작
- Program 버튼의 i 아이콘 클릭 → Program Drawer 열림 (view 모드)
- Child Project 버튼 클릭 → 필터링 동작
- Child Project 버튼의 i 아이콘 클릭 → Project Drawer 열림
- Independent Project 버튼의 i 아이콘 클릭 → Project Drawer 열림
- Active 상태 버튼에서도 아이콘 잘 보이는지 확인

### 작업 로그

#### 2026-01-09 01:15
**개요**: Dashboard 필터 버튼에 Drawer 아이콘 추가 완료. Program, Child Project, Independent Project 모든 필터 버튼에 작은 'i' 아이콘을 추가하여 클릭 시 해당 엔티티의 Drawer를 바로 열 수 있도록 구현. 필터링 동작과 Drawer 열기 동작을 완전히 분리하여 UX 개선.

**변경사항**:
- 개발:
  - `TaskFilterBar.tsx`에 `handleOpenDrawer` 핸들러 추가 (Program/Project Drawer 열기)
  - Program/Child/Independent Project 필터 버튼에 drawer-icon span 추가
  - 접근성 지원: `role="button"`, `tabIndex={0}`, `aria-label`, `onKeyDown` (Enter/Space)
- 수정:
  - `index.css`에 `.drawer-icon` 스타일 추가 (position: absolute, hover effect, focus-visible)
  - 이벤트 분리: `e.stopPropagation()` + `e.preventDefault()`로 필터링/Drawer 동작 분리
- 개선:
  - Space 키 핸들링 개선: `e.key === ' '`로 Space 키도 Enter와 동일하게 처리
  - `e.preventDefault()` 추가로 Space 키 페이지 스크롤 방지

**파일 변경**:
- `src/features/filters/components/TaskFilterBar.tsx` - useUi hook 추가, handleOpenDrawer 구현, 3개 버튼 타입에 drawer-icon 추가
- `src/index.css` - .drawer-icon 스타일 정의 (opacity, hover, focus-visible)

**핵심 코드**:
```tsx
// TaskFilterBar.tsx - Handler
const handleOpenDrawer = (e: React.MouseEvent | React.KeyboardEvent, type: 'program' | 'project', id: string) => {
  e.stopPropagation();
  openEntityDrawer({ type, mode: 'edit', id });
};

// TaskFilterBar.tsx - Icon implementation (Program 버튼 예시)
<span
  role="button"
  tabIndex={0}
  className="drawer-icon"
  onClick={(e) => handleOpenDrawer(e, 'program', prog.entity_id)}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      handleOpenDrawer(e, 'program', prog.entity_id);
    }
  }}
  aria-label={`Edit ${prog.entity_name}`}
  title="Edit"
>
  i
</span>
```

**Codex 리뷰 반영**:
1. ✅ Program drawer 'view' 모드 → 'edit' 모드로 변경 (ProgramForm이 view 미지원)
2. ✅ 접근성 문제 해결: role, tabIndex, aria-label, onKeyDown 추가
3. ✅ Space 키 처리 개선: `e.key === ' '` + `e.preventDefault()` 추가

**결과**: ✅ 빌드 성공 (1.45s)

**다음 단계**:
- Task 완료 처리 (status: done)
- 사용자 기능 테스트 확인

<!--
작업 완료 시 아래 형식으로 기록 (workthrough 스킬 자동 생성)

#### YYYY-MM-DD HH:MM
**개요**: 2-3문장 요약

**변경사항**:
- 개발:
- 수정:
- 개선:

**핵심 코드**: (필요시)

**결과**: ✅ 빌드 성공 / ❌ 실패

**다음 단계**:
-->


---

## 참고 문서

- [[prj-023]] - 소속 Project
- `/Users/gim-eunhyang/.claude/plans/luminous-swimming-naur.md` - Plan Mode 계획
- `src/contexts/UiContext.tsx` - Drawer 제어 Context
- `src/components/layout/EntityDrawer.tsx` - Drawer 라우터 컴포넌트

---

**Created**: 2026-01-08
**Assignee**: 김은향
**Due**: 2026-01-09
