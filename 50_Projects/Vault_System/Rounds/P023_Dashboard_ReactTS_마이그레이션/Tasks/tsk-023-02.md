---
entity_type: Task
entity_id: "tsk-023-02"
entity_name: "Calendar - TaskDrawer ì—°ë™"
created: 2026-01-08
updated: 2026-01-08
status: doing

# === ê³„ì¸µ ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-02"]

# === ê´€ê³„ ===
outgoing_relations: []
validates: []
validated_by: []

# === Task ì „ìš© ===
assignee: "ê¹€ì€í–¥"
start_date: 2026-01-08
due: 2026-01-08
priority: medium
estimated_hours: null
actual_hours: null

# === Task ìœ í˜• (dev Task ì—°ë™ìš©) ===
type: dev
target_project: loop

# === ë¶„ë¥˜ ===
tags: ["dashboard-v2", "calendar", "task-drawer"]
priority_flag: medium
---

# Calendar - TaskDrawer ì—°ë™

> Task ID: `tsk-023-02` | Project: `prj-023` | Status: todo

## ëª©í‘œ

**ì™„ë£Œ ì¡°ê±´**:
1. Calendar ë·°ì—ì„œ Task ì´ë²¤íŠ¸ í´ë¦­ ì‹œ TaskDrawerê°€ ì—´ë¦¼
2. Drawerì—ì„œ Task ì •ë³´ ì¡°íšŒ/í¸ì§‘ ê°€ëŠ¥
3. Kanbanê³¼ ë™ì¼í•œ UX ì œê³µ

---

## ìƒì„¸ ë‚´ìš©

### ë°°ê²½

Dashboard v2 Calendar ë·°ì—ì„œ Task í´ë¦­ ì‹œ í˜„ì¬ `console.log`ë§Œ ì¶œë ¥ë˜ê³  ìˆìŒ.
Kanbanì—ì„œëŠ” `useUi()` hookì˜ `openEditTask()`ë¥¼ í†µí•´ TaskDrawerê°€ ì •ìƒ ì‘ë™ ì¤‘.

### í˜„ì¬ ìƒíƒœ (ë¬¸ì œ)

`CalendarPage.tsx:91-97`:
```tsx
} else if (type === 'task') {
    console.log('Open TaskDrawer for', info.event.id);  // â† TODO
}
```

### í•´ê²° ë°©ë²•

Kanban íŒ¨í„´ ì°¸ê³  (`pages/Kanban/index.tsx:10,16,84`):
```tsx
import { useUi } from '@/contexts/UiContext';
const { openEditTask } = useUi();
// ...
onCardClick={(task) => openEditTask(task.entity_id)}
```

### ì‘ì—… ë‚´ìš©

1. `CalendarPage.tsx`ì— `useUi` import ì¶”ê°€
2. ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ `openEditTask` ì¶”ì¶œ
3. `handleEventClick`ì—ì„œ Task í´ë¦­ ì‹œ `openEditTask(info.event.id)` í˜¸ì¶œ

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `useUi` hook import ì¶”ê°€
- [ ] `openEditTask` í•¨ìˆ˜ ì¶”ì¶œ
- [ ] `console.log` â†’ `openEditTask(info.event.id)` êµì²´
- [ ] í…ŒìŠ¤íŠ¸: Task í´ë¦­ â†’ Drawer ì—´ë¦¼ í™•ì¸
- [ ] í…ŒìŠ¤íŠ¸: Drawerì—ì„œ Task ì •ë³´ í‘œì‹œ í™•ì¸

---

## Notes

### PRD (Generated by prompt-enhancer)

#### ğŸ“Š ì•„í‚¤í…ì²˜ ë„ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Calendar TaskDrawer Integration                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CalendarPage.tsx (ìˆ˜ì • ëŒ€ìƒ)                                    â”‚
â”‚  â”œâ”€ handleEventClick(info)                                       â”‚
â”‚  â”‚   â””â”€ type === 'task' â†’ openEditTask(info.event.id)           â”‚
â”‚  â”‚                              â†“                                â”‚
â”‚  UiContext.tsx                                                   â”‚
â”‚  â”œâ”€ setTaskDrawer({ isOpen: true, taskId, mode: 'edit' })       â”‚
â”‚  â”‚                              â†“                                â”‚
â”‚  TaskDrawer/index.tsx                                            â”‚
â”‚  â””â”€ useTask(taskId) â†’ API â†’ Task ì •ë³´ í‘œì‹œ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### êµ¬í˜„ ë‚´ìš©

**ìˆ˜ì • íŒŒì¼**: `dashboard-v2/src/features/calendar/CalendarPage.tsx`

**ë³€ê²½ 1: Import ì¶”ê°€**
```tsx
import { useUi } from '@/contexts/UiContext';
```

**ë³€ê²½ 2: Hook ì‚¬ìš©**
```tsx
export default function CalendarPage() {
    const { openEditTask } = useUi();
    // ...
}
```

**ë³€ê²½ 3: handleEventClick ìˆ˜ì • (line 91-97)**
```tsx
// Before
console.log('Open TaskDrawer for', info.event.id);

// After
openEditTask(info.event.id);
```

#### í™•ì¸ í•„ìš” ì‚¬í•­

- `info.event.id`ê°€ entity_id í˜•ì‹ì¸ì§€ `eventTransformers.ts` í™•ì¸
  - âœ… í™•ì¸ë¨: `transformTaskToEvent()`ì—ì„œ `id: task.entity_id` ì„¤ì •

#### Codex Review Summary (2026-01-08)

**Critical Issues Found**: 0 (ê¸°ì¡´ ì½”ë“œì— type ì²´í¬ ì´ë¯¸ ì¡´ì¬)
**Suggestions**: 3

**Codex Findings:**
1. âœ… **ì´ë¯¸ í•´ê²°ë¨**: `type === 'task'` ì²´í¬ê°€ ê¸°ì¡´ ì½”ë“œì— ì¡´ì¬ (line 91)
2. âš ï¸ **ê¶Œì¥**: `info.event.id` ìœ íš¨ì„± ì²´í¬ ì¶”ê°€ (undefined ë°©ì§€)
3. âš ï¸ **ê¶Œì¥**: UiProvider ë˜í•‘ í™•ì¸ í•„ìš”
4. â„¹ï¸ **ì°¸ê³ **: íƒ€ì… ì¼ì¹˜ í™•ì¸ë¨ - `entity_id` (string) â†’ `openEditTask(taskId: string)`

**Suggested Guard (Optional):**
```tsx
} else if (type === 'task' && info.event.id) {
    openEditTask(info.event.id);
}
```

### Todo
- [ ] CalendarPage.tsx ìˆ˜ì •
- [ ] eventTransformers.tsì—ì„œ id ë§¤í•‘ í™•ì¸
- [ ] ë¹Œë“œ í…ŒìŠ¤íŠ¸
- [ ] ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### ì‘ì—… ë¡œê·¸

#### 2026-01-08 - Implementation Complete

**Phase 1: Planning**
- Analyzed existing code structure
- Reviewed Kanban implementation pattern
- Confirmed UiProvider wrapping via AppLayout
- Verified info.event.id = task.entity_id mapping

**Phase 2: Codex Plan Validation** âœ“
- Model: gpt-5-codex (reasoning: medium)
- Review focus: Logic errors, edge cases, architecture, security
- Result: No blocking issues found
- Note: CalendarPage must be wrapped by UiProvider (confirmed)

**Phase 4: Implementation**
1. Added import: `import { useUi } from '@/contexts/UiContext'`
2. Extracted hook: `const { openEditTask } = useUi()`
3. Updated handler: `openEditTask(info.event.id)` with guard `&& info.event.id`

**Phase 5: Codex Code Review** âœ“ PASSED
- Session ID: 019b9cb4-fc5c-7453-b92f-d6880a8d7530
- Findings: No issues detected
- Changes match Kanban integration pattern
- Type guard prevents undefined ID calls
- Build test: TypeScript compilation successful

**Files Modified:**
- `dashboard-v2/src/features/calendar/CalendarPage.tsx`
  - Line 9: Added UiContext import
  - Line 22: Extracted openEditTask hook
  - Line 93-94: Replaced console.log with openEditTask call


---

## ì°¸ê³  ë¬¸ì„œ

- [[prj-023]] - ì†Œì† Project
- `public/dashboard-v2/src/features/calendar/CalendarPage.tsx` - ìˆ˜ì • ëŒ€ìƒ
- `public/dashboard-v2/src/contexts/UiContext.tsx` - useUi hook
- `public/dashboard-v2/src/pages/Kanban/index.tsx` - ì°¸ê³  íŒ¨í„´

---

**Created**: 2026-01-08
**Assignee**: ê¹€ì€í–¥
**Due**: 2026-01-08
