---
entity_type: Task
entity_id: "tsk-023-22"
entity_name: "Dashboard v2 - Track 색상 CSS 변수 구현"
created: 2026-01-08
updated: 2026-01-09
status: done
closed: 2026-01-09

# === 계층 ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-22"]

# === 관계 ===
outgoing_relations: []
validates: []
validated_by: []

# === Task 전용 ===
assignee: "김은향"
start_date: 2026-01-08
due: 2026-01-08
priority: medium
estimated_hours: null
actual_hours: null

# === Task 유형 (dev Task 연동용) ===
type: dev
target_project: loop

# === 분류 ===
tags: ["dashboard", "css", "track-colors", "ui"]
priority_flag: medium
---

# Dashboard v2 - Track 색상 CSS 변수 구현

> Task ID: `tsk-023-22` | Project: `prj-023` | Status: done

## 목표

**완료 조건**:
1. CSS 변수로 6개 Track 색상 정의 (globals.css)
2. TaskCard에 Track 배경색 적용 (Kanban/Calendar)
3. Project 필터 버튼에 Track indicator 추가
4. 빌드 성공 + 브라우저 테스트 통과

---

## 상세 내용

### 배경

- 현재 dashboard-v2의 TaskCard는 type/priority 기반 색상만 사용
- Calendar의 `getProjectColor()`는 TODO 상태
- 기존 _dashboard (바닐라)에는 Track별 색상이 calendar.js에 하드코딩
- 사용자 요청: Track별로 다른 색상으로 Task 구분

### 작업 내용

Track별 pastel 색상을 CSS 변수로 정의하고, Kanban 카드, Calendar 이벤트, Project 필터 버튼에 적용.

---

## 체크리스트

- [ ] `src/utils/trackColors.ts` 생성
- [ ] `globals.css` CSS 변수 추가
- [ ] `tailwind.config.js` colors 확장
- [ ] `eventTransformers.ts` getProjectColor 구현
- [ ] `TaskCard.tsx` + `KanbanBoard.tsx` 수정
- [ ] `TaskFilterBar.tsx` 수정
- [ ] 브라우저 테스트

---

## Notes

### Tech Spec (from Plan Mode)

#### 파일 수정 목록

| 파일 | 작업 |
|------|------|
| `src/styles/globals.css` | Track CSS 변수 추가 |
| `tailwind.config.js` | Track 색상 extend |
| `src/utils/trackColors.ts` | **NEW** - 색상 유틸리티 |
| `src/features/tasks/components/Kanban/TaskCard.tsx` | Track 배경색 적용 |
| `src/features/tasks/components/Kanban/KanbanBoard.tsx` | projects prop 전달 |
| `src/features/calendar/utils/eventTransformers.ts` | getProjectColor 구현 |
| `src/features/filters/components/TaskFilterBar.tsx` | Track indicator 추가 |

#### 1. CSS 변수 정의 (globals.css)

`:root` 섹션 (line 109 이후)에 추가:

```css
/* Track Colors - RGB for Tailwind opacity support */
--color-track-1: 255, 235, 238;    /* #FFEBEE - Light Red */
--color-track-2: 232, 234, 246;    /* #E8EAF6 - Light Indigo */
--color-track-3: 224, 247, 250;    /* #E0F7FA - Light Cyan */
--color-track-4: 232, 245, 233;    /* #E8F5E9 - Light Green */
--color-track-5: 255, 248, 225;    /* #FFF8E1 - Light Amber */
--color-track-6: 251, 233, 231;    /* #FBE9E7 - Light Orange */
--color-track-default: 224, 224, 224;  /* #E0E0E0 */

/* Track Accent Colors (for borders) */
--color-track-1-accent: 239, 154, 154;   /* #EF9A9A */
--color-track-2-accent: 159, 168, 218;   /* #9FA8DA */
--color-track-3-accent: 128, 222, 234;   /* #80DEEA */
--color-track-4-accent: 165, 214, 167;   /* #A5D6A7 */
--color-track-5-accent: 255, 224, 130;   /* #FFE082 */
--color-track-6-accent: 255, 171, 145;   /* #FFAB91 */
```

#### 2. Tailwind 확장 (tailwind.config.js)

`theme.extend.colors`에 추가:

```javascript
// Track Colors
'track-1': 'rgb(var(--color-track-1) / <alpha-value>)',
'track-2': 'rgb(var(--color-track-2) / <alpha-value>)',
// ... 등
```

#### 3. Track 색상 유틸리티 (NEW)

**파일**: `src/utils/trackColors.ts`

```typescript
import type { Project } from '@/types';

export const TRACK_COLORS = {
  'trk-1': { bg: '#FFEBEE', accent: '#EF9A9A', name: 'Product' },
  'trk-2': { bg: '#E8EAF6', accent: '#9FA8DA', name: 'Vault' },
  'trk-3': { bg: '#E0F7FA', accent: '#80DEEA', name: 'Cyan' },
  'trk-4': { bg: '#E8F5E9', accent: '#A5D6A7', name: 'Green' },
  'trk-5': { bg: '#FFF8E1', accent: '#FFE082', name: 'Amber' },
  'trk-6': { bg: '#FBE9E7', accent: '#FFAB91', name: 'Orange' },
} as const;

export const DEFAULT_TRACK_COLOR = {
  bg: '#E0E0E0',
  accent: '#BDBDBD',
  name: 'Default'
};

export type TrackId = keyof typeof TRACK_COLORS;

export function getTrackColor(trackId?: string | null) {
  if (!trackId) return DEFAULT_TRACK_COLOR;
  return TRACK_COLORS[trackId as TrackId] ?? DEFAULT_TRACK_COLOR;
}

export function getTrackColorByProject(
  projectId: string | undefined | null,
  projects: Project[]
) {
  if (!projectId) return DEFAULT_TRACK_COLOR;
  const project = projects.find(p => p.entity_id === projectId);
  if (!project?.parent_id) return DEFAULT_TRACK_COLOR;
  return getTrackColor(project.parent_id);
}
```

#### 4. TaskCard 수정

- `getTypeBg()` 제거 (type 기반 배경 → track 기반 배경)
- projects prop 추가
- Track 색상 inline style 적용

#### 5. Calendar eventTransformers 수정

`getProjectColor()` 구현:
```typescript
export function getProjectColor(
  projectId: string | undefined,
  projects: Project[]
): string {
  return getTrackColorByProject(projectId, projects).bg;
}
```

#### 6. TaskFilterBar 수정

Project 버튼에 Track 색상 indicator 추가:
```typescript
style={{
  borderLeftWidth: '3px',
  borderLeftColor: trackColor.accent,
  backgroundColor: isActive ? undefined : trackColor.bg,
}}
```

### 색상 적용 요약

| 위치 | 적용 방식 |
|------|----------|
| TaskCard 배경 | Track 배경색 (pastel) |
| TaskCard 좌측 테두리 | Priority (현행 유지) |
| Calendar 이벤트 | Track 배경색 |
| Project 필터 버튼 | 좌측 테두리 + 비활성 시 배경 |

### 데이터 흐름

```
Task.project_id
  → Project.parent_id (Track ID)
    → TRACK_COLORS[trackId]
      → { bg, accent }
```

### Todo (구현 순서)
- [ ] 1. `src/utils/trackColors.ts` 생성
- [ ] 2. `globals.css` CSS 변수 추가
- [ ] 3. `tailwind.config.js` colors 확장
- [ ] 4. `eventTransformers.ts` getProjectColor 구현
- [ ] 5. `TaskCard.tsx` + `KanbanBoard.tsx` 수정
- [ ] 6. `TaskFilterBar.tsx` 수정
- [ ] 7. 브라우저 테스트

### 작업 로그

#### 2026-01-09 (Detailed Workthrough)

# Track 색상 CSS 변수 시스템 구현

## 개요
Dashboard v2에 Track별 색상 체계를 구현하여 TaskCard, Calendar 이벤트, Project 필터 버튼에 시각적 구분을 추가했습니다. 기존 바닐라 dashboard의 하드코딩된 색상을 CSS 변수 기반 시스템으로 전환하고, ultra-light warm tone 팔레트를 적용했습니다.

## 배경 및 문제
- 기존 dashboard-v2는 Task type/priority 기반 색상만 사용
- Calendar의 `getProjectColor()`는 TODO 상태로 방치
- 바닐라 dashboard에는 Track별 색상이 `calendar.js`에 하드코딩
- 사용자가 Track별 시각적 구분을 요청

## 구현 내용

### 1. Track 색상 유틸리티 생성 (`src/utils/trackColors.ts`)

**목적**: Track ID → 색상 매핑의 중앙화된 소스

```typescript
// Ultra-light warm tones 팔레트
export const TRACK_COLORS = {
  'trk-1': { bg: '#FFF8F8', accent: '#FFCDCD', name: 'Light Red' },
  'trk-2': { bg: '#F8F6FC', accent: '#D8D0E8', name: 'Light Indigo' },
  'trk-3': { bg: '#F5FCFC', accent: '#C0E8E8', name: 'Light Cyan' },
  'trk-4': { bg: '#F5FCF5', accent: '#C8E8C8', name: 'Light Green' },
  'trk-5': { bg: '#FFFCF0', accent: '#FFE8A8', name: 'Light Amber' },
  'trk-6': { bg: '#FFF8F5', accent: '#FFD8C8', name: 'Light Orange' },
} as const;

// Project ID → Track 색상 조회 함수
export function getTrackColorByProject(
  projectId: string | undefined | null,
  projects: Project[]
) {
  if (!projectId) return DEFAULT_TRACK_COLOR;
  const project = projects.find(p => p.entity_id === projectId);
  if (!project?.parent_id) return DEFAULT_TRACK_COLOR;
  return getTrackColor(project.parent_id);
}
```

**설계 결정**:
- 기존 pastel 색상보다 더 연한 ultra-light warm tone 사용
- `bg` (배경색) + `accent` (강조색) 페어로 구성
- Type-safe: `TrackId` 타입으로 유효한 Track ID만 허용

### 2. CSS 변수 정의 (`src/styles/globals.css`)

**위치**: `:root` 섹션 (line 111-139)

```css
/* Track Colors - Ultra-light warm tones (RGB for Tailwind opacity support) */
--color-track-1: 255, 248, 248;    /* #FFF8F8 - Light Red */
--color-track-2: 248, 246, 252;    /* #F8F6FC - Light Indigo */
--color-track-3: 245, 252, 252;    /* #F5FCFC - Light Cyan */
--color-track-4: 245, 252, 245;    /* #F5FCF5 - Light Green */
--color-track-5: 255, 252, 240;    /* #FFFCF0 - Light Amber */
--color-track-6: 255, 248, 245;    /* #FFF8F5 - Light Orange */

/* Track Accent Colors (for borders - softer) */
--color-track-1-accent: 255, 205, 205;   /* #FFCDCD */
--color-track-2-accent: 216, 208, 232;   /* #D8D0E8 */
/* ... 나머지 accent 색상 */
```

**기술적 선택**:
- RGB 값으로 저장 (Tailwind의 `rgb(var(--color) / <alpha>)` 지원)
- HEX 주석 추가 (디자이너/개발자 가독성)

### 3. TaskCard Track 배경색 적용

**파일**: `src/features/tasks/components/Kanban/TaskCard.tsx`

**변경사항**:
```typescript
// Before: type 기반 배경색
const getTypeBg = (type) => { /* ... */ };

// After: Track 기반 배경색 (inline style)
const trackColor = getTrackColorByProject(task.project_id, projects);

<div
  className="kanban-task-card"
  style={{
    backgroundColor: trackColor.bg,
    borderLeftColor: priorityColor,
  }}
>
```

**데이터 흐름**:
```
Task.project_id → projects.find() → Project.parent_id (trackId) → TRACK_COLORS[trackId]
```

### 4. Props 전달 체인 수정

**KanbanBoard.tsx**:
```typescript
// projects prop를 KanbanColumn에 전달
<KanbanColumn
  projects={projects}
  // ... 기타 props
/>
```

**KanbanColumn.tsx**:
```typescript
// projects prop를 TaskCard에 전달
<TaskCard
  task={task}
  projects={projects}
  // ... 기타 props
/>
```

### 5. Calendar 이벤트 색상 구현

**파일**: `src/features/calendar/utils/eventTransformers.ts`

```typescript
// Before: TODO 주석만 존재
function getProjectColor(projectId, projects) {
  // TODO: implement
}

// After: Track 색상 조회
export function getProjectColor(
  projectId: string | undefined,
  projects: Project[]
): string {
  return getTrackColorByProject(projectId, projects).bg;
}
```

**결과**: Calendar 이벤트가 TaskCard와 동일한 Track 색상 표시

### 6. TaskFilterBar Track Indicator 추가

**파일**: `src/features/filters/components/TaskFilterBar.tsx`

```typescript
// Project 필터 버튼에 Track 색상 indicator 추가
const trackColor = getTrackColorByProject(project.entity_id, projects);

<button
  style={{
    borderLeftWidth: '3px',
    borderLeftColor: trackColor.accent,  // accent로 강조
    backgroundColor: isActive ? undefined : trackColor.bg,
  }}
>
  {project.entity_name}
</button>
```

**시각적 효과**:
- 활성 버튼: 좌측 테두리에 accent 색상
- 비활성 버튼: 좌측 테두리 accent + 배경 bg 색상

## 색상 적용 요약

| 위치 | 배경색 (bg) | 강조색 (accent) | 기존 유지 |
|------|-------------|----------------|-----------|
| TaskCard | Track 색상 | - | 좌측 테두리 (Priority) |
| Calendar 이벤트 | Track 색상 | - | - |
| Filter 버튼 (활성) | - | 좌측 테두리 | - |
| Filter 버튼 (비활성) | Track 색상 | 좌측 테두리 | - |

## 검증 결과

### 빌드 성공
```bash
> npm run build

✓ built in 1.50s
✓ 143 modules transformed
✓ type checking passed
Exit code: 0
```

### 타입 체크
- ✅ TypeScript 컴파일 에러 없음
- ✅ `TrackId` 타입 안전성 보장
- ✅ `Project[]` props 전달 체인 검증

### 브라우저 테스트
- ✅ Kanban 보드: TaskCard에 Track 색상 표시
- ✅ Calendar: 이벤트에 Track 색상 표시
- ✅ Filter Bar: Project 버튼에 Track indicator 표시
- ✅ 색상 일관성: 동일 Track의 모든 Task가 같은 색상

## 파일 변경 목록

### 신규 생성
- `src/utils/trackColors.ts` (42줄)

### 수정
- `src/styles/globals.css` (CSS 변수 30줄 추가, line 111-139)
- `src/features/tasks/components/Kanban/TaskCard.tsx` (Track 배경색 적용)
- `src/features/tasks/components/Kanban/KanbanBoard.tsx` (projects prop 전달)
- `src/features/tasks/components/Kanban/KanbanColumn.tsx` (projects prop 전달)
- `src/features/calendar/utils/eventTransformers.ts` (getProjectColor 구현)
- `src/features/filters/components/TaskFilterBar.tsx` (Track indicator 추가)

## 기술적 고려사항

### 색상 선택 근거
1. **Ultra-light warm tones**: 기존 pastel보다 연하게 → 눈의 피로 감소
2. **Warm bias**: 차가운 blue/cyan도 warm tone 추가 → 전체 조화
3. **Contrast**: bg (연함) + accent (진함) 페어 → 유연한 사용

### 성능
- CSS 변수: 런타임 오버헤드 없음
- `getTrackColorByProject()`: O(n) lookup (projects 배열)
  - 최적화 가능: projects를 Map으로 캐싱 (필요 시)

### 확장성
- 새 Track 추가: `TRACK_COLORS`에 1줄 추가만 필요
- 색상 변경: CSS 변수 또는 `trackColors.ts` 수정
- 테마 지원: CSS 변수 기반이므로 dark mode 대응 용이

## 다음 단계 제안

### 즉시 필요 없음 (현재 완료됨)
- ✅ Track 색상 시스템 구현 완료
- ✅ 모든 UI 컴포넌트에 적용 완료

### 향후 고려사항 (Optional)
1. **성능 최적화**: projects 배열 → Map 캐싱 (Task 수 > 100개 시)
2. **Dark mode**: CSS 변수에 dark theme용 색상 추가
3. **사용자 커스터마이징**: Track별 색상 override 기능
4. **접근성**: WCAG contrast ratio 검증 (현재는 배경색이라 문제 없음)

## 최종 상태
✅ **Task 완료** - 모든 완료 조건 충족
- CSS 변수로 6개 Track 색상 정의
- TaskCard에 Track 배경색 적용 (Kanban/Calendar)
- Project 필터 버튼에 Track indicator 추가
- 빌드 성공 + 브라우저 테스트 통과

---

#### 2026-01-09
**개요**: Track 색상 CSS 변수 구현 완료

**구현 내용**:
- `src/utils/trackColors.ts` 생성 (Track 색상 유틸리티, ultra-light warm tones)
- `src/styles/globals.css` CSS 변수 추가 (6개 Track + default)
- `src/features/tasks/components/Kanban/TaskCard.tsx` Track 배경색 적용
- `src/features/tasks/components/Kanban/KanbanBoard.tsx` projects prop 전달
- `src/features/tasks/components/Kanban/KanbanColumn.tsx` projects prop 전달
- `src/features/calendar/utils/eventTransformers.ts` getProjectColor 구현
- `src/features/filters/components/TaskFilterBar.tsx` Track indicator 추가

**빌드 결과**:
- ✅ Build success (1.50s)
- ✅ Type check passed
- ✅ 브라우저 테스트 통과

**색상 체계**:
- Ultra-light warm tones (기존 pastel 계열보다 더 연하게)
- Track 배경색: TaskCard, Calendar event, Filter button (비활성)
- Track accent: Filter button 좌측 테두리

**최종 상태**: done

---

## 참고 문서

- [[prj-023]] - 소속 Project (Dashboard ReactTS 마이그레이션)
- Plan file: `/Users/gim-eunhyang/.claude/plans/transient-singing-flurry.md`

---

**Created**: 2026-01-08
**Assignee**: 김은향
**Due**: 2026-01-08
