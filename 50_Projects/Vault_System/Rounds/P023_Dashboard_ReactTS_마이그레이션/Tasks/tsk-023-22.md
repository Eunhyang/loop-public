---
entity_type: Task
entity_id: "tsk-023-22"
entity_name: "Dashboard v2 - Track 색상 CSS 변수 구현"
created: 2026-01-08
updated: 2026-01-08
status: doing

# === 계층 ===
parent_id: "prj-023"
project_id: "prj-023"
aliases: ["tsk-023-22"]

# === 관계 ===
outgoing_relations: []
validates: []
validated_by: []

# === Task 전용 ===
assignee: "김은향"
start_date: 2026-01-08
due: 2026-01-08
priority: medium
estimated_hours: null
actual_hours: null

# === Task 유형 (dev Task 연동용) ===
type: dev
target_project: loop

# === 분류 ===
tags: ["dashboard", "css", "track-colors", "ui"]
priority_flag: medium
---

# Dashboard v2 - Track 색상 CSS 변수 구현

> Task ID: `tsk-023-22` | Project: `prj-023` | Status: doing

## 목표

**완료 조건**:
1. CSS 변수로 6개 Track 색상 정의 (globals.css)
2. TaskCard에 Track 배경색 적용 (Kanban/Calendar)
3. Project 필터 버튼에 Track indicator 추가
4. 빌드 성공 + 브라우저 테스트 통과

---

## 상세 내용

### 배경

- 현재 dashboard-v2의 TaskCard는 type/priority 기반 색상만 사용
- Calendar의 `getProjectColor()`는 TODO 상태
- 기존 _dashboard (바닐라)에는 Track별 색상이 calendar.js에 하드코딩
- 사용자 요청: Track별로 다른 색상으로 Task 구분

### 작업 내용

Track별 pastel 색상을 CSS 변수로 정의하고, Kanban 카드, Calendar 이벤트, Project 필터 버튼에 적용.

---

## 체크리스트

- [ ] `src/utils/trackColors.ts` 생성
- [ ] `globals.css` CSS 변수 추가
- [ ] `tailwind.config.js` colors 확장
- [ ] `eventTransformers.ts` getProjectColor 구현
- [ ] `TaskCard.tsx` + `KanbanBoard.tsx` 수정
- [ ] `TaskFilterBar.tsx` 수정
- [ ] 브라우저 테스트

---

## Notes

### Tech Spec (from Plan Mode)

#### 파일 수정 목록

| 파일 | 작업 |
|------|------|
| `src/styles/globals.css` | Track CSS 변수 추가 |
| `tailwind.config.js` | Track 색상 extend |
| `src/utils/trackColors.ts` | **NEW** - 색상 유틸리티 |
| `src/features/tasks/components/Kanban/TaskCard.tsx` | Track 배경색 적용 |
| `src/features/tasks/components/Kanban/KanbanBoard.tsx` | projects prop 전달 |
| `src/features/calendar/utils/eventTransformers.ts` | getProjectColor 구현 |
| `src/features/filters/components/TaskFilterBar.tsx` | Track indicator 추가 |

#### 1. CSS 변수 정의 (globals.css)

`:root` 섹션 (line 109 이후)에 추가:

```css
/* Track Colors - RGB for Tailwind opacity support */
--color-track-1: 255, 235, 238;    /* #FFEBEE - Light Red */
--color-track-2: 232, 234, 246;    /* #E8EAF6 - Light Indigo */
--color-track-3: 224, 247, 250;    /* #E0F7FA - Light Cyan */
--color-track-4: 232, 245, 233;    /* #E8F5E9 - Light Green */
--color-track-5: 255, 248, 225;    /* #FFF8E1 - Light Amber */
--color-track-6: 251, 233, 231;    /* #FBE9E7 - Light Orange */
--color-track-default: 224, 224, 224;  /* #E0E0E0 */

/* Track Accent Colors (for borders) */
--color-track-1-accent: 239, 154, 154;   /* #EF9A9A */
--color-track-2-accent: 159, 168, 218;   /* #9FA8DA */
--color-track-3-accent: 128, 222, 234;   /* #80DEEA */
--color-track-4-accent: 165, 214, 167;   /* #A5D6A7 */
--color-track-5-accent: 255, 224, 130;   /* #FFE082 */
--color-track-6-accent: 255, 171, 145;   /* #FFAB91 */
```

#### 2. Tailwind 확장 (tailwind.config.js)

`theme.extend.colors`에 추가:

```javascript
// Track Colors
'track-1': 'rgb(var(--color-track-1) / <alpha-value>)',
'track-2': 'rgb(var(--color-track-2) / <alpha-value>)',
// ... 등
```

#### 3. Track 색상 유틸리티 (NEW)

**파일**: `src/utils/trackColors.ts`

```typescript
import type { Project } from '@/types';

export const TRACK_COLORS = {
  'trk-1': { bg: '#FFEBEE', accent: '#EF9A9A', name: 'Product' },
  'trk-2': { bg: '#E8EAF6', accent: '#9FA8DA', name: 'Vault' },
  'trk-3': { bg: '#E0F7FA', accent: '#80DEEA', name: 'Cyan' },
  'trk-4': { bg: '#E8F5E9', accent: '#A5D6A7', name: 'Green' },
  'trk-5': { bg: '#FFF8E1', accent: '#FFE082', name: 'Amber' },
  'trk-6': { bg: '#FBE9E7', accent: '#FFAB91', name: 'Orange' },
} as const;

export const DEFAULT_TRACK_COLOR = {
  bg: '#E0E0E0',
  accent: '#BDBDBD',
  name: 'Default'
};

export type TrackId = keyof typeof TRACK_COLORS;

export function getTrackColor(trackId?: string | null) {
  if (!trackId) return DEFAULT_TRACK_COLOR;
  return TRACK_COLORS[trackId as TrackId] ?? DEFAULT_TRACK_COLOR;
}

export function getTrackColorByProject(
  projectId: string | undefined | null,
  projects: Project[]
) {
  if (!projectId) return DEFAULT_TRACK_COLOR;
  const project = projects.find(p => p.entity_id === projectId);
  if (!project?.parent_id) return DEFAULT_TRACK_COLOR;
  return getTrackColor(project.parent_id);
}
```

#### 4. TaskCard 수정

- `getTypeBg()` 제거 (type 기반 배경 → track 기반 배경)
- projects prop 추가
- Track 색상 inline style 적용

#### 5. Calendar eventTransformers 수정

`getProjectColor()` 구현:
```typescript
export function getProjectColor(
  projectId: string | undefined,
  projects: Project[]
): string {
  return getTrackColorByProject(projectId, projects).bg;
}
```

#### 6. TaskFilterBar 수정

Project 버튼에 Track 색상 indicator 추가:
```typescript
style={{
  borderLeftWidth: '3px',
  borderLeftColor: trackColor.accent,
  backgroundColor: isActive ? undefined : trackColor.bg,
}}
```

### 색상 적용 요약

| 위치 | 적용 방식 |
|------|----------|
| TaskCard 배경 | Track 배경색 (pastel) |
| TaskCard 좌측 테두리 | Priority (현행 유지) |
| Calendar 이벤트 | Track 배경색 |
| Project 필터 버튼 | 좌측 테두리 + 비활성 시 배경 |

### 데이터 흐름

```
Task.project_id
  → Project.parent_id (Track ID)
    → TRACK_COLORS[trackId]
      → { bg, accent }
```

### Todo (구현 순서)
- [ ] 1. `src/utils/trackColors.ts` 생성
- [ ] 2. `globals.css` CSS 변수 추가
- [ ] 3. `tailwind.config.js` colors 확장
- [ ] 4. `eventTransformers.ts` getProjectColor 구현
- [ ] 5. `TaskCard.tsx` + `KanbanBoard.tsx` 수정
- [ ] 6. `TaskFilterBar.tsx` 수정
- [ ] 7. 브라우저 테스트

### 작업 로그
<!--
작업 완료 시 아래 형식으로 기록 (workthrough 스킬 자동 생성)
-->

---

## 참고 문서

- [[prj-023]] - 소속 Project (Dashboard ReactTS 마이그레이션)
- Plan file: `/Users/gim-eunhyang/.claude/plans/transient-singing-flurry.md`

---

**Created**: 2026-01-08
**Assignee**: 김은향
**Due**: 2026-01-08
