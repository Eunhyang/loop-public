---
entity_type: Task
entity_id: tsk-023-1768070421265
entity_name: Dashboard - Project Drawer ChipSelect 통일
created: '2026-01-11'
updated: '2026-01-11'
status: done
project_id: prj-023
parent_id: prj-023
assignee: 김은향
priority: medium
start_date: '2026-01-11'
due: '2026-01-11'
aliases:
- tsk-023-1768070421265
tags: []
type: dev
---

# Dashboard - Project Drawer ChipSelect 통일

## 설명

Task Drawer와 Project Drawer의 프로퍼티 UI 일관성 확보.
현재 TaskForm은 ChipSelect로 잘 구현되어 있으나, ProjectForm은 `<select>` 드롭다운 사용 중.
ChipSelect로 통일하여 UX 일관성 확보.

## Tech Spec

### 변경 파일

| 파일 | 변경 내용 |
|------|----------|
| `components/common/chipColors.ts` | trackColor, programColor 추가 |
| `features/projects/components/ProjectForm.tsx` | Edit + Create 모드 ChipSelect 적용 |
| `features/tasks/components/TaskForm.tsx` | Create 모드 ChipSelect 적용 |

### 구현 상세

#### 1. chipColors.ts - 색상 정의 추가

```ts
export const trackColor: ChipColor = {
  bg: 'bg-white border-zinc-200',
  text: 'text-zinc-500',
  selected: '!bg-[#fef3c7] !text-[#92400e] !border-[#fcd34d]',  // amber
};

export const programColor: ChipColor = {
  bg: 'bg-white border-zinc-200',
  text: 'text-zinc-500',
  selected: '!bg-[#f5f3ff] !text-[#5b21b6] !border-[#ddd6fe]',  // purple
};
```

#### 2. ProjectForm.tsx - Import 및 Options

```ts
// Import 추가
import { ChipSelect, type ChipOption } from '@/components/common/ChipSelect';
import { statusColors, priorityColors, trackColor, programColor, getColor } from '@/components/common/chipColors';

// Options 배열 (useMemo)
const statusOptions: ChipOption[] = useMemo(() =>
  statuses.map((s: string) => ({
    value: s,
    label: s.charAt(0).toUpperCase() + s.slice(1),
    color: getColor(s, statusColors),
  })), [statuses]);

const priorityOptions: ChipOption[] = useMemo(() =>
  priorities.map((p: string) => ({
    value: p,
    label: p.charAt(0).toUpperCase() + p.slice(1),
    color: getColor(p, priorityColors),
  })), [priorities]);

const trackOptions: ChipOption[] = useMemo(() =>
  (dashboardData?.tracks || []).map((t: any) => ({
    value: t.entity_id,
    label: t.entity_name || t.entity_id,
    color: trackColor,
  })), [dashboardData?.tracks]);

const programOptions: ChipOption[] = useMemo(() =>
  (programs || []).map((p: any) => ({
    value: p.entity_id,
    label: p.entity_name,
    color: programColor,
  })), [programs]);
```

#### 3. 컴포넌트 변경 패턴

- **Status/Priority**: `<select>` -> `<ChipSelect options={...} />`
- **Track/Program**: `<select>` -> `<ChipSelectExpand primaryOptions={...slice(0,4)} allOptions={...} />`

### 아키텍처 원칙

- **SSOT**: 색상 정의는 `chipColors.ts`에만 존재
- **의존성 방향**: `features/projects` -> `components/common` (정방향)
- **재사용성**: ChipSelect/ChipSelectExpand는 공통 컴포넌트

## Todo

- [ ] Phase 1: chipColors.ts에 trackColor, programColor 추가
- [ ] Phase 2: ProjectForm Edit 모드 - Status/Priority ChipSelect 적용
- [ ] Phase 3: ProjectForm Edit 모드 - Track/Program ChipSelectExpand 적용
- [ ] Phase 4: ProjectForm Create 모드 - ChipSelect 통일
- [ ] Phase 5: TaskForm Create 모드 - ChipSelect 통일
- [ ] Phase 6: 로컬 테스트 (npm run dev) + 빌드 확인 (npm run build)

## Codex Review

### PRD Gaps
- ChipSelect/ChipSelectExpand 동작 미지정 (키보드 접근성, 비활성화/에러 상태)
- 빈 데이터셋 처리 (track/program 없을 때) 미지정
- 더 이상 제공되지 않는 status/priority 값 처리 미지정
- 필수 필드 검증 요구사항 부재
- Task edit mode 제외 이유 미설명

### Architecture/Implementation
- trackColor/programColor 유닛테스트/비주얼 리그레션 미언급
- 의존성 방향 원칙에 대한 lint/test 가드 미지정
- Create mode 폼 상태 관리 방식 미명시

### Testing
- Phase 6 수동 테스트만 있음, 자동화 테스트 계획 없음

### Security/Accessibility
- `<select>` → chips 전환 시 a11y 영향 검토 필요 (role/aria 속성)

### 답변 (Implementation Notes)
1. **키보드 접근성**: 기존 ChipSelect가 이미 role="radiogroup" + Tab/Enter 지원
2. **빈 데이터셋**: Track/Program은 optional 필드, 빈 경우 "None" 옵션 유지
3. **더 이상 없는 값**: 기존 값 그대로 표시 (orphan chip), 선택 시 에러 아님
4. **Task edit mode 제외**: 이미 ChipSelect로 구현되어 있음 (변경 불필요)
5. **자동화 테스트**: 이 태스크 범위 외, 별도 테스트 태스크로 분리

## 참고

- Plan 파일: `~/.claude/plans/eventual-dreaming-torvalds.md`
- 기존 TaskForm edit mode가 ChipSelect 구현 참고용

## 실행 로그 (2026-01-11)

### 구현 완료
1. **chipColors.ts**: trackColor, programColor 추가 완료
   - trackColor: amber 계열 (#fef3c7, #92400e, #fcd34d)
   - programColor: purple 계열 (#f5f3ff, #5b21b6, #ddd6fe)

2. **ProjectForm Edit 모드**: ChipSelect 적용 완료
   - Status: `<select>` → `<ChipSelect>` (statusOptions)
   - Priority: `<select>` → `<ChipSelect>` (priorityOptions)
   - Track: `<select>` → `<ChipSelectExpand>` (trackOptions, 상위 4개 primary)
   - Program: `<select>` → `<ChipSelectExpand>` (programOptions, 상위 4개 primary)

3. **ProjectForm Create 모드**: ChipSelect 적용 완료
   - Status/Priority: ChipSelect로 변경
   - Track/Program: ChipSelectExpand로 변경 (allowUnassigned=true)

4. **TaskForm Create 모드**: ChipSelect 적용 완료
   - Status/Priority: ChipSelect로 변경 (기존 select 제거)

### 테스트 결과
- `npm run build`: ✅ 성공 (2.68s, no TypeScript errors)
- `npm run dev`: ✅ 서버 시작 정상 (109ms)

### 변경 파일
- `/Users/gim-eunhyang/dev/loop/public/dashboard-v2/src/components/common/chipColors.ts`
- `/Users/gim-eunhyang/dev/loop/public/dashboard-v2/src/features/projects/components/ProjectForm.tsx`
- `/Users/gim-eunhyang/dev/loop/public/dashboard-v2/src/features/tasks/components/TaskForm.tsx`

### 아키텍처 준수 확인
- ✅ SSOT: 색상 정의는 chipColors.ts에만 존재
- ✅ 의존성 방향: features → components/common (정방향)
- ✅ 재사용성: ChipSelect/ChipSelectExpand는 공통 컴포넌트
- ✅ useMemo 사용: 모든 options 배열 memoization 적용
