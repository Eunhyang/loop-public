---
entity_type: Task
entity_id: tsk-1kthoh-1768834361862
entity_name: Ontology Lite v1 - GTM 축(콘텐츠-앱-코칭-매출) 최소 확장
created: '2026-01-19'
updated: '2026-01-25'
status: done
project_id: prj-1kthoh
parent_id: prj-1kthoh
assignee:
- 한명학
- 김은향
priority: medium
start_date: '2026-01-20'
due: '2026-01-20'
aliases:
- tsk-1kthoh-1768834361862
tags: []
type: test
target_project: null
_field_confidences:
  assignee: 0.9
  due: 0.86
  priority: 1.0
  type: 1.0
  target_project: 0.5
_path: 50_Projects/2025/P1_Ontology_Vault_Ontology_Lite_v1/Tasks/tsk-1kthoh-1768748073383.md
_body: '# Ontology Lite v1 - 회귀 테스트 및 샘플 케이스 검증


  ## 목적


  정규화/컨텍스트 생성이 깨지지 않도록 회귀 테스트 세트를 만든다.


  ## 케이스 구성


  - Track 2/6 + Condition B/D + Project 2개

  - Hypothesis 5개(서로 다른 트랙)

  - depends_on 체인 3단계 이상 2개


  ## 테스트 항목


  - normalize 결과 스냅샷 동일성(결정론성)

  - edge_types from/to 제약 위반 탐지

  - subgraph 크기/근거 포함/결정론성


  ## 산출물


  - `30_Ontology/Tests/regression_cases.json`

  - `30_Ontology/Tests/expected_snapshots/*`


  ## 완료 기준


  - [ ] 최소 20케이스 스냅샷 테스트 통과

  - [ ] 위반/누락 발견 시 룰 또는 입력 정제 규칙 업데이트 내역이 남음


  ## 참고


  - Parent Project: [[prj-1kthoh]]


  ## 짧은 회고'
notes: "# \\[Ontology Lite v1\\] GTM 축(콘텐츠-앱-코칭-매출) 최소 확장\n\n## 1) (Schema) GTM 엔티티\
  \ 타입 최소 추가 (v1 optional로)\n\n- 목적: “무엇을 팔고/어디서 돈이 나고/어디서 유입되는지”를 추론 없이 표현\n\n- 변경:\
  \ ontology_lite_v1.yaml에 optional entity_types 추가\n\n  - Channel, Product, Offer,\
  \ Service, RevenueStream\n\n- Acceptance Criteria\n\n  - 각 타입에 id_format + required_fields\
  \ 최소 세트 정의\n\n  - 기존 Track/Project/Hypothesis/Condition 체계와 충돌 없음\n\n  - Graph IO(node/edge)\
  \ 스펙에 해당 타입이 문제 없이 포함\n\n## 2) (Edge Types) gtm.\\* 최소 4\\~6개 추가\n\n- 목적: “콘텐츠 &gt;\
  \ 앱 &gt; 구독” + “콘텐츠 &gt; 코칭(앱 동반)” + “앱&gt;구독 성장 목표”를 관계로 고정\n\n- 변경: edge_types.yaml에\
  \ 네임스페이스로 추가\n\n  - gtm.activates_into (Channel -&gt; Product)\n\n  - gtm.includes\
  \ (Offer -&gt; Product)\n\n  - gtm.monetized_by (Offer/Product -&gt; RevenueStream)\n\
  \n  - gtm.upsells_to (Product/Offer -&gt; Offer)\n\n  - (옵션) gtm.delivered_by (Offer\
  \ -&gt; Service)\n\n  - (옵션) [gtm.data](http://gtm.data)\\_feeds (Service/CoachOS\
  \ -&gt; Product) # 코칭 데이터가 앱 가치/모델로 흡수\n\n- Acceptance Criteria\n\n  - from/to 제약\
  \ 명시\n\n  - 최소 recommended_fields 정의(note/evidence/measured_at 등)\n\n  - “전략 edge(validates/enables/...)”와\
  \ 의미 중복 없이 공존\n\n## 3) (Strategic Context) GTM Subgraph 섹션 템플릿 확정\n\n- 목적: Strategic\
  \ Context에 GTM 사실을 “명시적으로” 넣어 normalize가 결정론적으로 엣지 생성\n\n- 산출물: Strategic Context에\
  \ 붙이는 고정 템플릿(정형 텍스트)\n\n  - Nodes: Channel(콘텐츠), Product(꼭꼭앱), Offer(구독), Offer(코칭\
  \ 프로그램), Service(코칭), RevenueStream(구독결제/프로그램결제)\n\n  - Edges: activates_into /\
  \ includes / monetized_by / upsells_to / delivered_by / data_feeds\n\n- Acceptance\
  \ Criteria\n\n  - 템플릿 1개로 “현재 퍼널 2개 + 목표 플라이휠”이 모두 표현됨\n\n  - 템플릿을 넣었을 때 normalize\
  \ 결과가 매번 동일(nodes/edges 동일)\n\n## 4) (Normalize) GTM Subgraph 파서/매핑 규칙 구현\n\n- 목적:\
  \ Strategic Context 텍스트 -&gt; GTM nodes/edges 자동 생성\n\n- 구현 포인트\n\n  - GTM Subgraph\
  \ 섹션 존재 시: 해당 노드/엣지 생성\n\n  - 섹션 미존재 시: 기존 전략 엣지만 생성(기존 동작 유지)\n\n- Acceptance Criteria\n\
  \n  - 동일 입력 → 동일 출력 스냅샷 통과\n\n  - GTM edge validation 오류 0건(샘플 케이스 기준)\n\n## 5)\
  \ (Subgraph Builder) 질문 라우팅: 매출/전환 질문이면 GTM 포함\n\n- 목적: 에이전트가 “서비스 구조/매출/전환/업셀”\
  \ 질문에 GTM 경로를 항상 포함\n\n- 규칙\n\n  - 키워드 기반(구독/결제/매출/전환/업셀/코칭/콘텐츠 성과 등)일 때 GTM 서브그래프\
  \ 우선 포함\n\n- Acceptance Criteria\n\n  - 5개 대표 질문에 대해 항상 GTM 경로 포함(회귀 스냅샷)\n\n##\
  \ 6) (Evidence 최소 레이어) Metric/Evidence 엔티티 + 3개 엣지 추가\n\n- 목적: ContentOS/CoachOS/KPI\
  \ API 연동을 “그래프 복잡도 폭증 없이” 가능하게\n\n- 추가 엔티티(옵션)\n\n  - Metric, Evidence, Event(선택:\
  \ 온톨로지 이벤트/코칭 개입/앱 이벤트 공통 모델)\n\n- 추가 엣지(최소)\n\n  - measured_by (Channel/Product/Offer\
  \ -&gt; Metric)\n\n  - supported_by (Metric -&gt; Evidence)\n\n  - attributed_to\
  \ (Metric or RevenueStream -&gt; Channel/Service/Offer) # 규칙 기반 귀속\n\n- Acceptance\
  \ Criteria\n\n  - KPI API/Amplitude/RevenueCat 집계 스냅샷을 Evidence로 연결 가능\n\n  - “콘텐츠\
  \ 성과가 매출과 어떻게 이어졌나” 질문에 evidence 링크 포함 가능\n\n## 7) (Regression) 샘플 케이스 2개 + 스냅샷\
  \ 추가\n\n- Case A: “현재 우리 결제 흐름 설명” → 콘텐츠→앱→구독 + 콘텐츠→코칭(앱 동반)\n\n- Case B: “왜 코칭이\
  \ 앱 구독 성장을 만든다고 보나” → data_feeds + upsell/retention metric evidence\n\n- Acceptance\
  \ Criteria\n\n  - 스냅샷 100% 통과\n\n  - edge_type 누락/충돌 diagnostics가 명확히 나옴\n\n## 산출물\
  \ 1️⃣ (가장 중요)\n\n### ✅ `edge_types.yaml` 확장본 (gtm.\\* 포함)\n\n**남는 것**\n\n- `gtm.activates_into`\n\
  \n- `gtm.includes`\n\n- `gtm.monetized_by`\n\n- `gtm.upsells_to`\n\n- (+옵션) `gtm.delivered_by`,\
  \ `gtm.data_feeds`\n\n**의미**\n\n- “콘텐츠 → 앱 → 구독”\n\n- “콘텐츠 → 코칭(앱 동반) → 결제”\n\n\
  - “코칭 데이터 → 앱 가치 → 구독 성장”\\\n  이 **관계 자체가 스키마 레벨에서 고정됨**\n\n\U0001F449 이 파일 하나만\
  \ 봐도\\\n**‘우리는 이런 구조의 비즈니스를 한다’** 가 드러나야 함\n\n[[30_Ontology/Schema/v0.1/edge_types.yaml]]\n\
  \n---\n\n## 산출물 2️⃣\n\n### ✅ Strategic Context에 들어갈 **GTM Subgraph 템플릿**\n\n**남는\
  \ 것**\n\n- Strategic Context에 복붙 가능한 **정형 블록**\n\n예:\n\n- Channel: 콘텐츠\n\n- Product:\
  \ 꼭꼭앱\n\n- Offer: 앱 구독 / 12주 코칭\n\n- RevenueStream: 구독 결제 / 코칭 결제\n\n- Edges: activates_into\
  \ / includes / monetized_by / upsells_to / data_feeds\n\n**의미**\n\n- 사람이 설명 안 해도\n\
  \nLLM이 이 블록을 읽는 순간\n\n> “아, 지금은 이중 퍼널이고\\\n> 장기 목표는 앱 구독 증폭이구나”\\\n> 를 **항상 동일하게\
  \ 이해**\n\n[[30_Ontology/Schema/v0.1/strategic_context_gtm_subgraph.md]]\n\n---\n\
  \n## 산출물 3️⃣\n\n### ✅ `normalize_strategic_context` 결과의 **결정론적 노드/엣지 셋**\n\n**남는\
  \ 것**\n\n- Strategic Context 입력 →\n\n- **항상 동일한 GTM nodes + edges** 생성\n\n즉,\n\n\
  - 같은 문서\n\n- 같은 버전\n\n- 같은 질문\\\n  → **그래프가 절대 흔들리지 않음**\n\n\U0001F449 “우리가 뭘 팔고\
  \ 있는지”가\\\nLLM마다 달라지지 않게 만드는 핵심 산출물\n\n---\n\n## 산출물 4️⃣\n\n### ✅ 회귀 스냅샷 테스트 2개\n\
  \n**남는 것**\n\n- 질문 A:\n\n  > “지금 우리 결제 구조 설명해줘”\n\n- 질문 B:\n\n  > “왜 코칭이 앱 구독 성장을\
  \ 만든다고 보나”\n\n각 질문에 대해:\n\n- **포함돼야 하는 노드**\n\n- **반드시 나와야 하는 엣지 경로**\n\n가 스냅샷으로\
  \ 고정됨\n\n\U0001F449 이게 깨지면 바로 “설계 깨졌다”를 알 수 있음\n\n---\n\n## 이 태스크를 끝냈을 때 얻게 되는 상태\n\
  \n### 한 문장으로 요약하면:\n\n> **ContentOS / CoachOS / KPI API / Loop Ontology가\\\n> “어디에\
  \ 붙어야 하는지”를 더 이상 설명하지 않아도 되는 상태**\n\n- ContentOS → Channel 쪽에 붙고\n\n- CoachOS →\
  \ Service + data_feeds 쪽에 붙고\n\n- KPI API → Metric/Evidence로 귀속되고\n\n- Loop Ontology\
  \ → App/Product 가치 증폭 축으로 작동\n\n---\n\n## 그래서 이 태스크의 정의를 아주 날것으로 말하면\n\n> **“우리\
  \ 사업 구조를 설명하는 말을\\\n> 코드와 스키마와 테스트로 고정한다”**\n\n야.\n\n다음 질문으로 아주 자연스럽게 이어질 건 이거야:\n\
  \n> “좋아, 그럼 ContentOS / CoachOS / KPI는\\\n> 각각 어떤 **이벤트/ID/증거**만 맞추면 되지?”\n\n원하면\
  \ 그걸 **다음 태스크 산출물**로 바로 이어서 설계해줄게.\n\n[DEVELOPER MODE](#settings/Connectors/Advanced)"
start_time: 01:30
end_time: 02:30
---
# Ontology Lite v1 - 회귀 테스트 및 샘플 케이스 검증

## 목적

정규화/컨텍스트 생성이 깨지지 않도록 회귀 테스트 세트를 만든다.

## 케이스 구성

- Track 2/6 + Condition B/D + Project 2개
- Hypothesis 5개(서로 다른 트랙)
- depends_on 체인 3단계 이상 2개

## 테스트 항목

- normalize 결과 스냅샷 동일성(결정론성)
- edge_types from/to 제약 위반 탐지
- subgraph 크기/근거 포함/결정론성

## 산출물

- `30_Ontology/Tests/regression_cases.json`
- `30_Ontology/Tests/expected_snapshots/*`

## 완료 기준

- [ ] 최소 20케이스 스냅샷 테스트 통과
- [ ] 위반/누락 발견 시 룰 또는 입력 정제 규칙 업데이트 내역이 남음

## 참고

- Parent Project: [[prj-1kthoh]]

## 짧은 회고
