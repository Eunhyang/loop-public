---
entity_type: Task
entity_id: tsk-023-1768670951852
entity_name: AI Inference - 다단계 Project Validation API 및 Dashboard 버튼
created: '2026-01-18'
updated: '2026-01-18'
status: done
project_id: prj-023
parent_id: prj-023
assignee: 김은향
priority: medium
start_date: '2026-01-18'
due: '2026-01-18'
aliases:
- tsk-023-1768670951852
tags: []
type: dev
---

# AI Inference - 다단계 Project Validation API 및 Dashboard 버튼

## 설명

Project/Task Validation 시 단일 LLM 호출 대신 4단계 개별 API로 분리하여
Track, Condition, 가설, Expected Impact(A값)를 체계적으로 추론하도록 개선.
Dashboard ProjectForm/TaskForm에 각 단계별 AI 버튼 추가.

## 완료 내용

### API 프롬프트 (신규 2개)
- `api/prompts/multi_dock.py` - Zero-base Structural Auditor (Track + Condition Multi-Docking)
- `api/prompts/hypothesis_map.py` - Strategic Auditor (가설 추천/매핑)

### API 엔드포인트 (4개)
- `POST /api/ai/infer/multi-dock` - Track + Condition 추론
- `POST /api/ai/infer/hypothesis-map` - 기존 가설 추천 (validates 매핑)
- `POST /api/ai/infer/hypothesis-seed` - 신규 가설 생성 (Markdown 파일)
- `POST /api/ai/infer/expected-impact` - A값(Expected Impact) 측정

### Dashboard (신규)
- `features/ai/api.ts` - 4개 API 호출 함수 + TypeScript 타입
- `features/ai/queries.ts` - React Query useMutation 훅 4개
- `features/ai/components/AiInferButton.tsx` - AI 추론 버튼 공통 컴포넌트

### Dashboard (수정)
- `ProjectForm.tsx` - AI 버튼 4개 추가 (multi-dock, hypothesis-map, hypothesis-seed, expected-impact)
- `TaskForm.tsx` - AI 버튼 3개 추가 (multi-dock, hypothesis-map, hypothesis-seed)

## 체크리스트

- [x] API 프롬프트 생성 (multi_dock, hypothesis_map)
- [x] API 엔드포인트 4개 구현
- [x] Dashboard AI 모듈 생성
- [x] ProjectForm AI 버튼 4개 추가
- [x] TaskForm AI 버튼 3개 추가
- [x] TypeScript 빌드 성공
- [x] main 브랜치 머지 완료
- [ ] n8n 워크플로우 수정 (4단계 순차 호출)

## 참고

### Plan File
Plan 경로: `/Users/gim-eunhyang/.claude/plans/shimmying-watching-kernighan.md`

### 변경 파일 (10개, +2185 lines)
```
api/prompts/multi_dock.py (신규)
api/prompts/hypothesis_map.py (신규)
api/routers/ai.py (+937 lines)
dashboard-v2/src/features/ai/api.ts (신규)
dashboard-v2/src/features/ai/queries.ts (신규)
dashboard-v2/src/features/ai/components/AiInferButton.tsx (신규)
dashboard-v2/src/features/projects/components/ProjectForm.tsx (수정)
dashboard-v2/src/features/tasks/components/TaskForm.tsx (수정)
```
