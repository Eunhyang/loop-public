---
entity_type: Task
entity_id: tsk-023-1768842042959
entity_name: Vault Explorer íŒŒì¼ ìƒì„± ê¸°ëŠ¥ ì¶”ê°€ (ë…¸ì…˜ ìŠ¤íƒ€ì¼)

# === ê³„ì¸µ ì—°ê²° ===
project_id: prj-023
target_project: dashboard-v2

# === ë‹´ë‹¹/ì¼ì • ===
assignee: ê¹€ì€í–¥
status: done
priority: medium
type: dev
---

# Vault Explorer íŒŒì¼ ìƒì„± ê¸°ëŠ¥ ì¶”ê°€ (ë…¸ì…˜ ìŠ¤íƒ€ì¼)

## Notes

### Summary
Vault Explorerì—ì„œ í´ë” í˜¸ë²„ ì‹œ + ë²„íŠ¼ì„ í‘œì‹œí•˜ê³ , í´ë¦­í•˜ë©´ ëª¨ë‹¬ì—ì„œ íŒŒì¼ëª…/ë‚´ìš©ì„ ì…ë ¥í•˜ì—¬ ìƒˆ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„.

### Changes Made

**Backend (ìƒˆ íŒŒì¼):**
- `api/routers/files.py`: POST `/api/files/write` ì—”ë“œí¬ì¸íŠ¸
  - ê²½ë¡œ ê²€ì¦ (path traversal ë°©ì§€)
  - ê¶Œí•œ ì²´í¬ (require_write_access, require_exec_access)
  - ë®ì–´ì“°ê¸° ë°©ì§€ ë¡œì§

**Frontend (ìƒˆ íŒŒì¼):**
- `dashboard-v2/src/features/vault-explorer/components/CreateFileModal.tsx`
  - íŒŒì¼ëª… + ë‚´ìš© ì…ë ¥ ëª¨ë‹¬
  - Cmd+Enter ì €ì¥ ë‹¨ì¶•í‚¤
  - ì—ëŸ¬ ì²˜ë¦¬

**Frontend (ìˆ˜ì •):**
- `api.ts`: createFile, createFolder API í•¨ìˆ˜ ì¶”ê°€
- `queries.ts`: useCreateFile, useCreateFolder mutation ì¶”ê°€
- `FolderTreeItem.tsx`: í˜¸ë²„ ì‹œ + ë²„íŠ¼ (group-hover:opacity-100)
- `FolderTree.tsx`: onCreateFile ì½œë°± ì „ë‹¬
- `VaultExplorerDrawer.tsx`: ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬

**Backend (ìˆ˜ì •):**
- `api/main.py`: files ë¼ìš°í„° ë“±ë¡

### Plan

# Vault Explorer ì“°ê¸° + Notes ê¸°ëŠ¥ ì¶”ê°€ (ë…¸ì…˜ ìŠ¤íƒ€ì¼)

## ì‘ì—… ê·œëª¨: ì†Œ~ì¤‘ê°„

ì˜ˆìƒ ìˆ˜ì •: ìƒˆ íŒŒì¼ 2ê°œ, ê¸°ì¡´ íŒŒì¼ ìˆ˜ì • 5ê°œ

---

## ê¸°ëŠ¥ ìš”ì•½ (ë…¸ì…˜ ìŠ¤íƒ€ì¼: í˜¸ë²„ ì‹œ + ë²„íŠ¼)

1. **í´ë”ì— ë§ˆìš°ìŠ¤ í˜¸ë²„** â†’ ì˜¤ë¥¸ìª½ì— + ì•„ì´ì½˜ í‘œì‹œ
2. **+ ë²„íŠ¼ í´ë¦­** â†’ ëª¨ë‹¬ ì—´ë¦¼
3. **ëª¨ë‹¬ì—ì„œ íŒŒì¼ëª… + ë‚´ìš© ì…ë ¥** â†’ í•´ë‹¹ í´ë”ì— íŒŒì¼ ìƒì„±

```
ğŸ“ 50_Projects        [+]  â† í˜¸ë²„ ì‹œ ë‚˜íƒ€ë‚¨
   ğŸ“ P001_Example   [+]
   ğŸ“„ readme.md
```

---

## êµ¬í˜„ ê³„íš

### 1. Backend API (ìƒˆ ì—”ë“œí¬ì¸íŠ¸)

**ìƒˆ íŒŒì¼: `code/api/routers/files.py`**
```python
POST /api/files/write
- Request: { path, content, vault }
- Response: { success, file_path, message }
```

**ìˆ˜ì •: `code/api/main.py`** - ë¼ìš°í„° ë“±ë¡

### 2. Frontend ì»´í¬ë„ŒíŠ¸

| íŒŒì¼ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| `CreateFileModal.tsx` | ìƒì„± | íŒŒì¼ëª… + ë‚´ìš© ì…ë ¥ ëª¨ë‹¬ |
| `FolderTreeItem.tsx` | ìˆ˜ì • | í˜¸ë²„ ì‹œ + ë²„íŠ¼ ì¶”ê°€ |
| `FolderTree.tsx` | ìˆ˜ì • | ì½œë°± ì „ë‹¬ |
| `VaultExplorerDrawer.tsx` | ìˆ˜ì • | ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬ |
| `api.ts` | ìˆ˜ì • | `createFile` í•¨ìˆ˜ ì¶”ê°€ |
| `queries.ts` | ìˆ˜ì • | `useCreateFile` mutation ì¶”ê°€ |

### 3. êµ¬í˜„ ìˆœì„œ

```
1. Backend API ìƒì„± (files.py)
2. Frontend API ì—°ê²° (api.ts, queries.ts)
3. CreateFileModal ì»´í¬ë„ŒíŠ¸ ìƒì„±
4. FolderTreeItemì— í˜¸ë²„ + ë²„íŠ¼ ì¶”ê°€
5. VaultExplorerDrawerì—ì„œ ëª¨ë‹¬ ìƒíƒœ í†µí•©
```

---

## í•µì‹¬ íŒŒì¼ ê²½ë¡œ

```
ìˆ˜ì •:
- code/api/main.py
- dashboard-v2/src/features/vault-explorer/api.ts
- dashboard-v2/src/features/vault-explorer/queries.ts
- dashboard-v2/src/features/vault-explorer/components/FolderTreeItem.tsx
- dashboard-v2/src/features/vault-explorer/components/FolderTree.tsx
- dashboard-v2/src/features/vault-explorer/components/VaultExplorerDrawer.tsx

ìƒì„±:
- code/api/routers/files.py
- dashboard-v2/src/features/vault-explorer/components/CreateFileModal.tsx
```

---

## FolderTreeItem ë³€ê²½ ìƒì„¸

```tsx
// ê¸°ì¡´: í´ë”ëª…ë§Œ í‘œì‹œ
<button onClick={handleClick}>
  <FolderIcon />
  <span>{name}</span>
</button>

// ë³€ê²½: í˜¸ë²„ ì‹œ + ë²„íŠ¼ ì¶”ê°€
<div className="group flex items-center">
  <button onClick={handleClick}>
    <FolderIcon />
    <span>{name}</span>
  </button>
  {isFolder && (
    <button
      className="opacity-0 group-hover:opacity-100"
      onClick={(e) => {
        e.stopPropagation();
        onCreateFile(path);
      }}
    >
      <PlusIcon />
    </button>
  )}
</div>
```

---

## ì°¸ì¡° íŒ¨í„´

- **ëª¨ë‹¬**: `quick-entity/QuickEntityModal.tsx`
- **íŒŒì¼ ìƒì„± ë¡œì§**: `api/routers/batch.py` (_create_file í•¨ìˆ˜)
- **í˜¸ë²„ ìŠ¤íƒ€ì¼**: Tailwind `group-hover:opacity-100`
