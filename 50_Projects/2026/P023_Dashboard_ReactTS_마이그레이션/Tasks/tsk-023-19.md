---
entity_type: Task
entity_id: tsk-023-19
entity_name: FilterPanel - 기본 필터 및 Assignee 동적 표시

# === 소속 ===
project_id: prj-023

# === 상태 ===
status: done
priority: medium
type: dev
assignee: 김은향

# === 일정 ===
created: 2026-01-08
updated: 2026-01-08
due: null
closed: 2026-01-08

# === 태그 ===
tags: [dashboard, filter, assignee, ux]
---

# FilterPanel - 기본 필터 및 Assignee 동적 표시

> Task ID: `tsk-023-19` | Project: [[prj-023]] | Status: done

---

## Overview

대시보드 진입 시 기본 필터 설정 및 FilterPanel 토글에 따른 Assignee 버튼 동적 표시 구현.

---

## Tech Spec

### 요구사항

1. **기본 필터 설정 (대시보드 진입 시)**
   - 기간: "이번주" (This Week) 기본 선택
   - Assignee: 코어 멤버만 기본 선택 (김은향, 한명학)

2. **Assignee 버튼 동적 표시**
   - `Show Non-Core Members` 토글에 따라 비코어 멤버(Advisor, External 등) 버튼 표시/숨김
   - `Show Inactive Members` 토글에 따라 비활성 멤버(active: false) 버튼 표시/숨김

### 멤버 분류 (members.yaml SSOT)

| 분류 | role | 멤버 |
|------|------|------|
| 코어 | Founder, Cofounder | 김은향, 한명학 |
| 비코어 (활성) | Advisor, External | 황종필, 신동진, 외주 |
| 비코어 (비활성) | Member, Unassigned | 임단, 미정 |

### 토글별 표시 로직

| 토글 상태 | 표시되는 Assignee 버튼 |
|----------|----------------------|
| 기본 (둘 다 OFF) | 김은향, 한명학 |
| Show Non-Core ON | + 황종필, 신동진, 외주 |
| Show Inactive ON | + 임단, 미정 |
| 둘 다 ON | 전체 7명 |

### 수정 대상 파일

1. `dashboard-v2/src/features/filters/components/FilterPanel/` - Assignee 버튼 필터링 로직
2. `dashboard-v2/src/features/filters/store/filterDefaults.ts` - 기본 필터값 변경
3. `dashboard-v2/src/features/filters/hooks/` - 필터 훅 수정

### 구현 계획

1. `filterDefaults.ts`에서 기본 dateRange를 "이번주"로 설정
2. Assignee 버튼 렌더링 시 `showNonCoreMembers`, `showInactiveMembers` 상태에 따라 필터링
3. 멤버의 `role`과 `active` 필드 기준으로 표시 여부 결정

---

## Todo

- [ ] 기본 기간 필터를 "이번주"로 설정
- [ ] Assignee 버튼 영역에 토글 기반 필터링 로직 추가
- [ ] 코어/비코어 멤버 구분 로직 구현 (role 기반)
- [ ] 활성/비활성 멤버 구분 로직 구현 (active 기반)
- [ ] 테스트: 토글 변경 시 버튼 동적 표시 확인

---

## Codex Review Notes

### 검토 결과 (교차 검증)

**명확화 필요 사항:**
1. "이번주" 정의 → 현재 주 (월~일, FullCalendar 기준)
2. 비코어이면서 비활성인 멤버(임단) → 두 토글 모두 ON일 때만 표시
3. 기본 Assignee "선택" → 코어 멤버 버튼만 표시 (필터 적용 상태)

**엣지 케이스:**
- members API 로드 실패 시 → 빈 배열로 fallback, 에러 토스트 표시

---

## Notes

### 현재 코드 분석 (Plan Mode에서 확인)

**멤버 SSOT**: `exec/40_People/members.yaml`

**코어 멤버 판별 로직** (기존 레거시 코드):
```javascript
// state.js 라인 150-152
State.currentAssignees = State.members
    .filter(m => m.role === 'Founder' || m.role === 'Cofounder')
    .map(m => m.id);
```

**토글 컴포넌트**: `VisibilityToggles.tsx`
- `showInactiveMembers` - 비활성 멤버 표시
- `showNonCoreMembers` - 비코어 멤버 표시

---

## References

- [[prj-023]] - 소속 프로젝트
- `exec/40_People/members.yaml` - 멤버 SSOT
- `dashboard-v2/src/features/filters/` - 필터 관련 코드

---

## 작업 로그

### 2026-01-08
**개요**: Task 완료 - FilterPanel 기본 필터 및 Assignee 동적 표시 구현

**구현 내역**:
- `dashboard-v2/src/constants/filterDefaults.ts` - projectStatus에 'doing' 추가 (backwards compat)
- `dashboard-v2/src/features/calendar/CalendarPage.tsx` - useUrlFilters 제거 (미사용 코드 정리)
- `dashboard-v2/src/pages/Kanban/index.tsx` - useUrlFilters 제거 (미사용 코드 정리)

**결과**:
- FilterPanel 기본 필터 설정 완료
- Assignee 버튼 동적 표시 로직 구현
- 코드 정리 (unused imports 제거)

**최종 상태**: done
