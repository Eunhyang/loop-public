---
entity_type: Task
entity_id: tsk-023-02
entity_name: Calendar - TaskDrawer ì—°ë™
created: 2026-01-08
updated: '2026-01-10'
closed: 2026-01-08
status: done
parent_id: prj-023
project_id: prj-023
aliases:
- tsk-023-02
outgoing_relations: []
validates: []
validated_by: []
assignee: ê¹€ì€í–¥
start_date: 2026-01-08
due: 2026-01-08
priority: medium
estimated_hours: null
actual_hours: null
type: dev
target_project: loop
tags:
- dashboard-v2
- calendar
- task-drawer
priority_flag: medium
notes: "# Calendar - TaskDrawer ì—°ë™\n\n> Task ID: `tsk-023-02` | Project: `prj-023`\
  \ | Status: done\n\n## ëª©í‘œ\n\n**ì™„ë£Œ ì¡°ê±´**:\n\n1. Calendar ë·°ì—ì„œ Task ì´ë²¤íŠ¸ í´ë¦­ ì‹œ TaskDrawerê°€\
  \ ì—´ë¦¼\n2. Drawerì—ì„œ Task ì •ë³´ ì¡°íšŒ/í¸ì§‘ ê°€ëŠ¥\n3. Kanbanê³¼ ë™ì¼í•œ UX ì œê³µ\n\n---\n\n## ìƒì„¸ ë‚´ìš©\n\n\
  ### ë°°ê²½\n\nDashboard v2 Calendar ë·°ì—ì„œ Task í´ë¦­ ì‹œ í˜„ì¬ `console.log`ë§Œ ì¶œë ¥ë˜ê³  ìˆìŒ. Kanbanì—ì„œëŠ”\
  \ `useUi()` hookì˜ `openEditTask()`ë¥¼ í†µí•´ TaskDrawerê°€ ì •ìƒ ì‘ë™ ì¤‘.\n\n### í˜„ì¬ ìƒíƒœ (ë¬¸ì œ)\n\n\
  `CalendarPage.tsx:91-97`:\n\n```tsx\n} else if (type === 'task') {\n    console.log('Open\
  \ TaskDrawer for', info.event.id);  // â† TODO\n}\n```\n\n### í•´ê²° ë°©ë²•\n\nKanban íŒ¨í„´\
  \ ì°¸ê³  (`pages/Kanban/index.tsx:10,16,84`):\n\n```tsx\nimport { useUi } from '@/contexts/UiContext';\n\
  const { openEditTask } = useUi();\n// ...\nonCardClick={(task) => openEditTask(task.entity_id)}\n\
  ```\n\n### ì‘ì—… ë‚´ìš©\n\n1. `CalendarPage.tsx`ì— `useUi` import ì¶”ê°€\n2. ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ `openEditTask`\
  \ ì¶”ì¶œ\n3. `handleEventClick`ì—ì„œ Task í´ë¦­ ì‹œ `openEditTask(info.event.id)` í˜¸ì¶œ\n\n---\n\
  \n## ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n- [ ] `useUi` hook import ì¶”ê°€\n\n- [ ] `openEditTask` í•¨ìˆ˜ ì¶”ì¶œ\n\n- [\
  \ ] `console.log` â†’ `openEditTask(info.event.id)` êµì²´\n\n- [ ] í…ŒìŠ¤íŠ¸: Task í´ë¦­ â†’ Drawer\
  \ ì—´ë¦¼ í™•ì¸\n\n- [ ] í…ŒìŠ¤íŠ¸: Drawerì—ì„œ Task ì •ë³´ í‘œì‹œ í™•ì¸\n\n---\n\n## Notes\n\n### PRD (Generated\
  \ by prompt-enhancer)\n\n\U0001F4CA ì•„í‚¤í…ì²˜ ë„ì‹\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n\
  â”‚                Calendar TaskDrawer Integration                   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n\
  â”‚  CalendarPage.tsx (ìˆ˜ì • ëŒ€ìƒ)                                    â”‚\nâ”‚  â”œâ”€ handleEventClick(info)\
  \                                       â”‚\nâ”‚  â”‚   â””â”€ type === 'task' â†’ openEditTask(info.event.id)\
  \           â”‚\nâ”‚  â”‚                              â†“                             \
  \   â”‚\nâ”‚  UiContext.tsx                                                   â”‚\nâ”‚ \
  \ â”œâ”€ setTaskDrawer({ isOpen: true, taskId, mode: 'edit' })       â”‚\nâ”‚  â”‚       \
  \                       â†“                                â”‚\nâ”‚  TaskDrawer/index.tsx\
  \                                            â”‚\nâ”‚  â””â”€ useTask(taskId) â†’ API â†’ Task\
  \ ì •ë³´ í‘œì‹œ                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\
  ```\n\nêµ¬í˜„ ë‚´ìš©\n\n**ìˆ˜ì • íŒŒì¼**: `dashboard-v2/src/features/calendar/CalendarPage.tsx`\n\
  \n**ë³€ê²½ 1: Import ì¶”ê°€**\n\n```tsx\nimport { useUi } from '@/contexts/UiContext';\n\
  ```\n\n**ë³€ê²½ 2: Hook ì‚¬ìš©**\n\n```tsx\nexport default function CalendarPage() {\n \
  \   const { openEditTask } = useUi();\n    // ...\n}\n```\n\n**ë³€ê²½ 3: handleEventClick\
  \ ìˆ˜ì • (line 91-97)**\n\n```tsx\n// Before\nconsole.log('Open TaskDrawer for', info.event.id);\n\
  \n// After\nopenEditTask(info.event.id);\n```\n\ní™•ì¸ í•„ìš” ì‚¬í•­\n\n- `info.event.id`ê°€\
  \ entity_id í˜•ì‹ì¸ì§€ `eventTransformers.ts` í™•ì¸\n  - âœ… í™•ì¸ë¨: `transformTaskToEvent()`ì—ì„œ\
  \ `id: task.entity_id` ì„¤ì •\n\nCodex Review Summary (2026-01-08)\n\n**Critical Issues\
  \ Found**: 0 (ê¸°ì¡´ ì½”ë“œì— type ì²´í¬ ì´ë¯¸ ì¡´ì¬) **Suggestions**: 3\n\n**Codex Findings:**\n\n\
  1. âœ… **ì´ë¯¸ í•´ê²°ë¨**: `type === 'task'` ì²´í¬ê°€ ê¸°ì¡´ ì½”ë“œì— ì¡´ì¬ (line 91)\n2. âš ï¸ **ê¶Œì¥**: `info.event.id`\
  \ ìœ íš¨ì„± ì²´í¬ ì¶”ê°€ (undefined ë°©ì§€)\n3. âš ï¸ **ê¶Œì¥**: UiProvider ë˜í•‘ í™•ì¸ í•„ìš”\n4. â„¹ï¸ **ì°¸ê³ **: íƒ€ì…\
  \ ì¼ì¹˜ í™•ì¸ë¨ - `entity_id` (string) â†’ `openEditTask(taskId: string)`\n\n**Suggested\
  \ Guard (Optional):**\n\n```tsx\n} else if (type === 'task' && info.event.id) {\n\
  \    openEditTask(info.event.id);\n}\n```\n\n### Todo\n\n- [ ] CalendarPage.tsx\
  \ ìˆ˜ì •\n\n- [ ] eventTransformers.tsì—ì„œ id ë§¤í•‘ í™•ì¸\n\n- [ ] ë¹Œë“œ í…ŒìŠ¤íŠ¸\n\n- [ ] ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸\n\n\
  ### ì‘ì—… ë¡œê·¸\n\n2026-01-08 - Implementation Complete\n\n**Phase 1: Planning**\n\n-\
  \ Analyzed existing code structure\n- Reviewed Kanban implementation pattern\n-\
  \ Confirmed UiProvider wrapping via AppLayout\n- Verified info.event.id = task.entity_id\
  \ mapping\n\n**Phase 2: Codex Plan Validation** âœ“\n\n- Model: gpt-5-codex (reasoning:\
  \ medium)\n- Review focus: Logic errors, edge cases, architecture, security\n- Result:\
  \ No blocking issues found\n- Note: CalendarPage must be wrapped by UiProvider (confirmed)\n\
  \n**Phase 4: Implementation**\n\n1. Added import: `import { useUi } from '@/contexts/UiContext'`\n\
  2. Extracted hook: `const { openEditTask } = useUi()`\n3. Updated handler: `openEditTask(info.event.id)`\
  \ with guard `&& info.event.id`\n\n**Phase 5: Codex Code Review** âœ“ PASSED\n\n-\
  \ Session ID: 019b9cb4-fc5c-7453-b92f-d6880a8d7530\n- Findings: No issues detected\n\
  - Changes match Kanban integration pattern\n- Type guard prevents undefined ID calls\n\
  - Build test: TypeScript compilation successful\n\n**Files Modified:**\n\n- `dashboard-v2/src/features/calendar/CalendarPage.tsx`\n\
  \  - Line 9: Added UiContext import\n  - Line 22: Extracted openEditTask hook\n\
  \  - Line 93-94: Replaced console.log with openEditTask call\n\n2026-01-08 - Task\
  \ Completion\n\n**Completion Status:**\n\n- All implementation phases completed\
  \ successfully\n- Build verification passed (TypeScript compilation successful)\n\
  - Both CalendarPage and Header.tsx modifications tested\n- No PR/merge needed (LOOP\
  \ Vault internal project)\n\n**Deliverables:**\n\n1. âœ… CalendarPage.tsx: Task click\
  \ â†’ TaskDrawer integration\n\n   - useUi hook integration complete\n   - Event handler\
  \ updated with type guard\n   - Consistent with Kanban pattern\n\n2. âœ… Header.tsx:\
  \ Reload button functionality\n\n   - Server cache reload endpoint integration\n\
  \   - Visual feedback states (\U0001F504â†’â³â†’âœ…/âŒâ†’\U0001F504)\n   - Loading/disabled\
  \ state handling\n   - Build verified successful\n\n**Final Status:** Task marked\
  \ as done\n\n---\n\n## ì°¸ê³  ë¬¸ì„œ\n\n- \\[\\[prj-023\\]\\] - ì†Œì† Project\n- `public/dashboard-v2/src/features/calendar/CalendarPage.tsx`\
  \ - ìˆ˜ì • ëŒ€ìƒ\n- `public/dashboard-v2/src/contexts/UiContext.tsx` - useUi hook\n- `public/dashboard-v2/src/pages/Kanban/index.tsx`\
  \ - ì°¸ê³  íŒ¨í„´\n\n---\n\n**Created**: 2026-01-08 **Assignee**: ê¹€ì€í–¥ **Due**: 2026-01-08"
---
# Calendar - TaskDrawer ì—°ë™

> Task ID: `tsk-023-02` | Project: `prj-023` | Status: done

## ëª©í‘œ

**ì™„ë£Œ ì¡°ê±´**:
1. Calendar ë·°ì—ì„œ Task ì´ë²¤íŠ¸ í´ë¦­ ì‹œ TaskDrawerê°€ ì—´ë¦¼
2. Drawerì—ì„œ Task ì •ë³´ ì¡°íšŒ/í¸ì§‘ ê°€ëŠ¥
3. Kanbanê³¼ ë™ì¼í•œ UX ì œê³µ

---

## ìƒì„¸ ë‚´ìš©

### ë°°ê²½

Dashboard v2 Calendar ë·°ì—ì„œ Task í´ë¦­ ì‹œ í˜„ì¬ `console.log`ë§Œ ì¶œë ¥ë˜ê³  ìˆìŒ.
Kanbanì—ì„œëŠ” `useUi()` hookì˜ `openEditTask()`ë¥¼ í†µí•´ TaskDrawerê°€ ì •ìƒ ì‘ë™ ì¤‘.

### í˜„ì¬ ìƒíƒœ (ë¬¸ì œ)

`CalendarPage.tsx:91-97`:
```tsx
} else if (type === 'task') {
    console.log('Open TaskDrawer for', info.event.id);  // â† TODO
}
```

### í•´ê²° ë°©ë²•

Kanban íŒ¨í„´ ì°¸ê³  (`pages/Kanban/index.tsx:10,16,84`):
```tsx
import { useUi } from '@/contexts/UiContext';
const { openEditTask } = useUi();
// ...
onCardClick={(task) => openEditTask(task.entity_id)}
```

### ì‘ì—… ë‚´ìš©

1. `CalendarPage.tsx`ì— `useUi` import ì¶”ê°€
2. ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ `openEditTask` ì¶”ì¶œ
3. `handleEventClick`ì—ì„œ Task í´ë¦­ ì‹œ `openEditTask(info.event.id)` í˜¸ì¶œ

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `useUi` hook import ì¶”ê°€
- [ ] `openEditTask` í•¨ìˆ˜ ì¶”ì¶œ
- [ ] `console.log` â†’ `openEditTask(info.event.id)` êµì²´
- [ ] í…ŒìŠ¤íŠ¸: Task í´ë¦­ â†’ Drawer ì—´ë¦¼ í™•ì¸
- [ ] í…ŒìŠ¤íŠ¸: Drawerì—ì„œ Task ì •ë³´ í‘œì‹œ í™•ì¸

---

## Notes

### PRD (Generated by prompt-enhancer)

#### ğŸ“Š ì•„í‚¤í…ì²˜ ë„ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Calendar TaskDrawer Integration                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CalendarPage.tsx (ìˆ˜ì • ëŒ€ìƒ)                                    â”‚
â”‚  â”œâ”€ handleEventClick(info)                                       â”‚
â”‚  â”‚   â””â”€ type === 'task' â†’ openEditTask(info.event.id)           â”‚
â”‚  â”‚                              â†“                                â”‚
â”‚  UiContext.tsx                                                   â”‚
â”‚  â”œâ”€ setTaskDrawer({ isOpen: true, taskId, mode: 'edit' })       â”‚
â”‚  â”‚                              â†“                                â”‚
â”‚  TaskDrawer/index.tsx                                            â”‚
â”‚  â””â”€ useTask(taskId) â†’ API â†’ Task ì •ë³´ í‘œì‹œ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### êµ¬í˜„ ë‚´ìš©

**ìˆ˜ì • íŒŒì¼**: `dashboard-v2/src/features/calendar/CalendarPage.tsx`

**ë³€ê²½ 1: Import ì¶”ê°€**
```tsx
import { useUi } from '@/contexts/UiContext';
```

**ë³€ê²½ 2: Hook ì‚¬ìš©**
```tsx
export default function CalendarPage() {
    const { openEditTask } = useUi();
    // ...
}
```

**ë³€ê²½ 3: handleEventClick ìˆ˜ì • (line 91-97)**
```tsx
// Before
console.log('Open TaskDrawer for', info.event.id);

// After
openEditTask(info.event.id);
```

#### í™•ì¸ í•„ìš” ì‚¬í•­

- `info.event.id`ê°€ entity_id í˜•ì‹ì¸ì§€ `eventTransformers.ts` í™•ì¸
  - âœ… í™•ì¸ë¨: `transformTaskToEvent()`ì—ì„œ `id: task.entity_id` ì„¤ì •

#### Codex Review Summary (2026-01-08)

**Critical Issues Found**: 0 (ê¸°ì¡´ ì½”ë“œì— type ì²´í¬ ì´ë¯¸ ì¡´ì¬)
**Suggestions**: 3

**Codex Findings:**
1. âœ… **ì´ë¯¸ í•´ê²°ë¨**: `type === 'task'` ì²´í¬ê°€ ê¸°ì¡´ ì½”ë“œì— ì¡´ì¬ (line 91)
2. âš ï¸ **ê¶Œì¥**: `info.event.id` ìœ íš¨ì„± ì²´í¬ ì¶”ê°€ (undefined ë°©ì§€)
3. âš ï¸ **ê¶Œì¥**: UiProvider ë˜í•‘ í™•ì¸ í•„ìš”
4. â„¹ï¸ **ì°¸ê³ **: íƒ€ì… ì¼ì¹˜ í™•ì¸ë¨ - `entity_id` (string) â†’ `openEditTask(taskId: string)`

**Suggested Guard (Optional):**
```tsx
} else if (type === 'task' && info.event.id) {
    openEditTask(info.event.id);
}
```

### Todo
- [ ] CalendarPage.tsx ìˆ˜ì •
- [ ] eventTransformers.tsì—ì„œ id ë§¤í•‘ í™•ì¸
- [ ] ë¹Œë“œ í…ŒìŠ¤íŠ¸
- [ ] ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### ì‘ì—… ë¡œê·¸

#### 2026-01-08 - Implementation Complete

**Phase 1: Planning**
- Analyzed existing code structure
- Reviewed Kanban implementation pattern
- Confirmed UiProvider wrapping via AppLayout
- Verified info.event.id = task.entity_id mapping

**Phase 2: Codex Plan Validation** âœ“
- Model: gpt-5-codex (reasoning: medium)
- Review focus: Logic errors, edge cases, architecture, security
- Result: No blocking issues found
- Note: CalendarPage must be wrapped by UiProvider (confirmed)

**Phase 4: Implementation**
1. Added import: `import { useUi } from '@/contexts/UiContext'`
2. Extracted hook: `const { openEditTask } = useUi()`
3. Updated handler: `openEditTask(info.event.id)` with guard `&& info.event.id`

**Phase 5: Codex Code Review** âœ“ PASSED
- Session ID: 019b9cb4-fc5c-7453-b92f-d6880a8d7530
- Findings: No issues detected
- Changes match Kanban integration pattern
- Type guard prevents undefined ID calls
- Build test: TypeScript compilation successful

**Files Modified:**
- `dashboard-v2/src/features/calendar/CalendarPage.tsx`
  - Line 9: Added UiContext import
  - Line 22: Extracted openEditTask hook
  - Line 93-94: Replaced console.log with openEditTask call

#### 2026-01-08 - Task Completion

**Completion Status:**
- All implementation phases completed successfully
- Build verification passed (TypeScript compilation successful)
- Both CalendarPage and Header.tsx modifications tested
- No PR/merge needed (LOOP Vault internal project)

**Deliverables:**
1. âœ… CalendarPage.tsx: Task click â†’ TaskDrawer integration
   - useUi hook integration complete
   - Event handler updated with type guard
   - Consistent with Kanban pattern

2. âœ… Header.tsx: Reload button functionality
   - Server cache reload endpoint integration
   - Visual feedback states (ğŸ”„â†’â³â†’âœ…/âŒâ†’ğŸ”„)
   - Loading/disabled state handling
   - Build verified successful

**Final Status:** Task marked as done


---

## ì°¸ê³  ë¬¸ì„œ

- [[prj-023]] - ì†Œì† Project
- `public/dashboard-v2/src/features/calendar/CalendarPage.tsx` - ìˆ˜ì • ëŒ€ìƒ
- `public/dashboard-v2/src/contexts/UiContext.tsx` - useUi hook
- `public/dashboard-v2/src/pages/Kanban/index.tsx` - ì°¸ê³  íŒ¨í„´

---

**Created**: 2026-01-08
**Assignee**: ê¹€ì€í–¥
**Due**: 2026-01-08
