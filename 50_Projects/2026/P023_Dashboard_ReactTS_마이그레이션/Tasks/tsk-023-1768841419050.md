---
entity_type: Task
entity_id: tsk-023-1768841419050
entity_name: Entity Form - 원본 파일 Vault Explorer로 열기
created: '2026-01-20'
updated: '2026-01-20'
status: done
project_id: prj-023
parent_id: prj-023
assignee: 김은향
priority: medium
start_date: '2026-01-20'
due: '2026-01-20'
aliases:
- tsk-023-1768841419050
tags: []
type: dev
---

# Entity Form - 원본 파일 Vault Explorer로 열기

## 설명

DrawerShell 헤더에서 FavoriteStar 옆에 "원본 보기" 아이콘 버튼을 추가하여, Task/Project/Hypothesis Drawer에서 파일 아이콘 클릭 시 Vault Explorer가 열리고 해당 파일이 선택되도록 구현.

## Notes

### Summary
Entity Form에서 원본 파일을 Vault Explorer로 열 수 있는 기능 구현. API 엔드포인트와 프론트엔드 hook을 추가하고 DrawerShell에 통합.

### Changes Made
- `api/routers/entities.py` - 새 파일, `/api/entity-path` 엔드포인트 (entity 타입/ID로 vault 파일 경로 반환)
- `api/main.py` - entities 라우터 등록
- `dashboard-v2/src/queries/keys.ts` - `entitySourcePath` query key 추가
- `dashboard-v2/src/queries/useEntitySourcePath.ts` - 새 hook 생성
- `dashboard-v2/src/components/common/DrawerShell.tsx` - `onViewSource` prop + 파일 아이콘 버튼 추가
- `dashboard-v2/src/components/layout/EntityDrawer.tsx` - hook 사용 + callback 구현

### Plan

```markdown
# Plan: Entity Form에서 원본 파일 Vault Explorer로 열기

## Task ID
`tsk-yt-w02-26-02`

## 요구사항
- DrawerShell 헤더에서 FavoriteStar 옆(1번 위치)에 "원본 보기" 아이콘 버튼 추가
- TaskForm에 이미 추가한 버튼 제거
- 노션 스타일 파일 아이콘 사용

## 아키텍처 규칙 준수 (prj-023)
- **원칙 A**: DrawerShell = 레이아웃만 (API 호출 금지)
- **0.2절**: common이 feature를 import 금지
- **해결책**: callback prop으로 로직을 EntityDrawer에 위임

---

## 구현 계획

### 1. API 엔드포인트 추가
**파일**: `api/routers/entities.py`

### 2. useEntitySourcePath hook 생성
**파일**: `dashboard-v2/src/queries/useEntitySourcePath.ts`

### 3. DrawerShell 수정
**파일**: `dashboard-v2/src/components/common/DrawerShell.tsx`
- Props 추가: `onViewSource?: () => void`

### 4. EntityDrawer 수정
**파일**: `dashboard-v2/src/components/layout/EntityDrawer.tsx`
- `useEntitySourcePath` hook 사용
- `onViewSource` callback 구현

### 5. 수정 파일 목록

| 파일 | 변경 내용 |
|------|----------|
| `api/routers/entities.py` | `/api/entity-path` 엔드포인트 추가 |
| `dashboard-v2/src/queries/useEntitySourcePath.ts` | 새 hook 생성 |
| `dashboard-v2/src/queries/keys.ts` | query key 추가 |
| `dashboard-v2/src/components/common/DrawerShell.tsx` | `onViewSource` prop + 버튼 |
| `dashboard-v2/src/components/layout/EntityDrawer.tsx` | hook 사용 + callback 구현 |
```

## 체크리스트

- [x] API 엔드포인트 /api/entity-path 추가
- [x] useEntitySourcePath hook 생성
- [x] DrawerShell에 onViewSource prop 및 버튼 추가
- [x] EntityDrawer에서 hook 사용 및 callback 구현
- [x] 빌드 검증
- [x] main 브랜치에 머지

## 참고

- 아키텍처 원칙: common 컴포넌트는 API 직접 호출 금지, callback prop으로 위임
- 지원 Entity: Task, Project, Hypothesis

## 짧은 회고

워크트리를 사용하여 깔끔하게 feature 브랜치 작업 후 머지 완료. DrawerShell의 레이아웃 역할을 유지하면서 callback 패턴으로 기능 통합.
