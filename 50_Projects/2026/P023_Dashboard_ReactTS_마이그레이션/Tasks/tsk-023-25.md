---
entity_type: Task
entity_id: "tsk-023-25"
entity_name: "Dashboard - Project Form Program 선택 UI 추가"
created: 2026-01-08
updated: 2026-01-09
status: done
closed: 2026-01-09
project_id: "prj-023"
assignee: "김은향"
priority: medium
type: dev
start_date: 2026-01-08
due: 2026-01-08
aliases:
  - tsk-023-25
tags:
  - dashboard
  - project-form
  - program-selector
---

# Dashboard - Project Form Program 선택 UI 추가

> Task ID: `tsk-023-25` | Project: [[prj-023]] | Status: done

## Notes

### Tech Spec

#### 목표
Project 생성/편집 시 상위 Program을 선택할 수 있는 드롭다운 UI 추가

#### 실제 상태 (2026-01-09 조사 결과)

**✅ 모든 기능이 이미 구현되어 있음 - 코드 변경 불필요**

| 기능 | Backend | Frontend |
|------|---------|----------|
| **생성** | ✅ 구현됨 (entities.py:68, projects.py:76-82, 110) | ✅ 구현됨 (ProjectForm.tsx:372-394) |
| **편집** | ✅ 구현됨 (ProjectUpdate.program_id) | ✅ 구현됨 (ProjectForm.tsx:233-253) |
| **조회** | ✅ 구현됨 (GET /api/programs) | ✅ 구현됨 (ProjectForm.tsx:99-106) |

#### 구현 세부사항

**Backend (이미 완료):**
1. `api/models/entities.py:68` - `ProjectCreate.program_id: Optional[str]` 필드 존재
2. `api/routers/projects.py:76-82` - `program_id` 검증 (cache.get_program)
3. `api/routers/projects.py:110` - frontmatter에 `program_id` 포함
4. `api/routers/programs.py` - GET `/api/programs` 엔드포인트 존재

**Frontend (이미 완료):**
1. `dashboard-v2/src/features/projects/api.ts:8` - `CreateProjectDTO.program_id?: string`
2. `dashboard-v2/src/features/projects/queries.ts:83-90` - `usePrograms()` hook (5분 캐시)
3. `dashboard-v2/src/features/projects/components/ProjectForm.tsx`:
   - **Create 모드** (lines 372-394): Program 드롭다운, loading/error 처리
   - **Edit 모드** (lines 233-253): Program 선택 변경 가능, optimistic update
   - **View 모드** (lines 99-106): Program 이름 표시

### Codex 리뷰 결과

**Program 기능 자체**: ✅ 완전히 구현됨, 검증 통과

**발견된 이슈 (별도 대응 필요, 본 Task 범위 밖):**
1. Create flow 필드 불일치: Frontend가 `status`/`priority_flag` 전송하지만 Backend는 무시하고 기본값 사용
2. Edit mode 엣지케이스: Programs fetch 실패 시 기존 program_id가 드롭다운에 표시 안 됨
3. 접근 제어 부재: program_id 할당 시 권한 검증 없음 (보안 고려사항)
4. 테스트 부재: program_id 경로에 대한 자동화 테스트 없음

### Todo

- [x] Backend: `ProjectCreate` 모델에 `program_id: Optional[str]` 추가 (이미 완료)
- [x] Backend: `create_project` 함수에서 `program_id` frontmatter 처리 (이미 완료)
- [x] Frontend: `CreateProjectDTO`에 `program_id?: string` 추가 (이미 완료)
- [x] Frontend: `ProjectForm` formData에 `program_id` 상태 추가 (이미 완료)
- [x] Frontend: 생성 모드 - Program 드롭다운 추가 (Track 다음) (이미 완료)
- [x] Frontend: 편집 모드 - Program 드롭다운 추가 (이미 완료)
- [x] Frontend: View 모드 - Program 표시 추가 (이미 완료)
- [x] Frontend: API 호출 시 `program_id` 포함 (이미 완료)

### 검증 결과

1. ✅ Dashboard v2에서 새 Project 생성 시 Program 드롭다운 표시 (line 372-394)
2. ✅ Program 선택 후 저장 가능 (line 306: `program_id: formData.program_id || undefined`)
3. ✅ 기존 Project 편집 시 Program 변경 가능 (line 233-253, optimistic update 지원)
4. ✅ Project View 모드에서 Program 표시 (line 99-106, program_id 있을 때만 렌더)

### 작업 로그

#### 2026-01-09
**개요**: Task 완료 - 기능 검증 완료

**결과**:
- Program 선택 UI 기능이 이미 완전히 구현되어 있음을 확인
- Backend: `ProjectCreate.program_id` 필드, 검증 로직, API 엔드포인트 모두 존재
- Frontend: Create/Edit/View 모드 모두 Program 드롭다운 구현 완료
- Codex 최종 리뷰 통과 (기능 완전 구현 확인)
- 코드 변경 없이 검증으로 Task 완료

**최종 상태**: done

