---
entity_type: Task
entity_id: tsk-000ops-1769401028239
entity_name: Content OS - Task와 YouTube video_id 1:1 연결
created: '2026-01-26'
updated: '2026-01-26'
status: done
project_id: prj-content-os-ops
parent_id: prj-content-os-ops
assignee: 김은향
priority: medium
tags: []
type: dev
aliases:
- tsk-000ops-1769401028239
start_date: '2026-01-26'
due: '2026-01-26'
---

# Content OS - Task와 YouTube video_id 1:1 연결

## 설명

Content OS Performance와 Vault Task를 1:1로 연결하기 위해 video_id 필드를 추가.
YouTube 업로드 콘텐츠의 성과를 해당 Task와 매핑하여 추적 가능.

## 체크리스트

- [x] schema_constants.yaml에 video_id 필드 추가 (v5.15)
- [x] SSOT_CONTRACT.md에 Section 13 Content OS 연동 규칙 추가 (v1.4)
- [x] Backend: TaskUpdate 모델에 video_id 필드 추가
- [x] Backend: tasks.py에 video_id 처리 + 1:1 제약 검증
- [x] Backend: vault_cache.py에 find_task_by_video_id 메서드 추가
- [x] Backend: GET /api/tasks/by-video-id/{video_id} 역참조 API 추가
- [x] Frontend: Task 타입에 video_id 필드 추가
- [x] npm run build 통과

## Notes

### Summary
Content OS Performance 페이지에서 YouTube 영상 성과와 Vault Task를 1:1로 연결하기 위한 video_id 필드 구현

### Changes Made

**Code (loop-code repo):**
- `api/models/entities.py` - TaskUpdate에 video_id 필드 추가
- `api/routers/tasks.py` - video_id 업데이트 처리 + 1:1 제약 검증 + 역참조 API
- `api/cache/vault_cache.py` - find_task_by_video_id 메서드 추가
- `dashboard-v2/src/types/task.ts` - Task/TaskUpdatePayload에 video_id 추가

**Vault (loop-public-vault repo):**
- `public/00_Meta/schema_constants.yaml` - v5.15: Task.video_id 필드 정의
- `public/00_Meta/SSOT_CONTRACT.md` - v1.4: Section 13 Content OS 연동 규칙

### Plan

# Content OS 아이디어 - YouTube Weekly Shorts Task 1:1 연결

## 목표
Content OS에서 생성된 콘텐츠 아이디어를 YouTube Weekly 프로젝트의 Shorts Task와 1:1로 연결

## SSOT 원칙

**관계의 SSOT = Vault Task의 `video_id` 필드**

```yaml
# Vault Task frontmatter (SSOT)
video_id: dQw4w9WgXcQ  # YouTube video ID (11자)
```

| 항목 | SSOT | Derived |
|------|------|---------|
| Task → Video 관계 | Task.video_id | - |
| Video → Task 역참조 | - | API가 Task 스캔 |

## 구현 완료

### Phase 1: 스키마 + 문서 보충
- schema_constants.yaml: Task.video_id 필드 정의
- SSOT_CONTRACT.md: Section 13 Content OS 규칙

### Phase 2: 백엔드 API
- TaskUpdate 모델에 video_id 추가
- update_task에서 video_id 처리 (1:1 제약 검증)
- GET /api/tasks/by-video-id/{video_id} 역참조 API

### Phase 3: 프론트엔드 타입
- Task interface에 video_id 추가
- TaskUpdatePayload에 video_id 추가

## 연결 플로우

```
1. Task 생성 (YouTube Weekly Shorts)
2. 영상 제작 완료 → YouTube 업로드
3. 업로드된 URL에서 video_id 추출
4. Task frontmatter에 video_id 저장 (SSOT)
5. Content OS Performance에서 역참조 조회
```

## 짧은 회고

worktree 기반 작업 플로우로 깔끔하게 진행됨. video_id 11자 검증과 1:1 제약으로 데이터 무결성 확보.
