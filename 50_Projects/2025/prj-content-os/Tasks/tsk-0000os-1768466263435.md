---
entity_type: Task
entity_id: tsk-0000os-1768466263435
entity_name: Content OS - Migrate Retro UI
created: '2026-01-15'
updated: '2026-01-16'
closed: '2026-01-16'
status: done
project_id: prj-content-os
parent_id: prj-content-os
assignee: 김은향
priority: medium
start_date: '2026-01-15'
due: '2026-01-15'
aliases:
- tsk-0000os-1768466263435
tags: []
type: dev
target_project: loop
---

# Content OS - Migrate Retro UI

## 설명

Port the Retro UI from `/content-os/retro` to Dashboard V2 with data flow aligned to the new API architecture.

## Notes

### Tech Spec

**Source Location (Content OS):**
- Page: `code/apps/content-os/app/retro/page.tsx`
- Components: `code/apps/content-os/app/retro/components/*`
- Data/Types:
  - `code/apps/content-os/app/retro/data/dummy-retro-data.ts`
  - `code/apps/content-os/app/retro/types/retro.ts`

**Target Location (Dashboard V2):**
- Page: `code/dashboard-v2/src/pages/ContentOS/Retro/index.tsx`
- Feature Module:
  - `code/dashboard-v2/src/features/content-os/retro/api.ts`
  - `code/dashboard-v2/src/features/content-os/retro/queries.ts`
  - `code/dashboard-v2/src/features/content-os/retro/components/*`

**Migration Requirements:**
1. Port UI components and replace Next.js-specific imports with React Router/Vite equivalents
2. Define `RetroSummary` DTO in `src/types/content-os.ts` based on existing retro types
3. Add query hook for retro data using TanStack Query
4. Use API data when available; fallback to dummy data with feature flag if API not ready

**API Contract:**
- Endpoint: `GET /api/content-os/retro`
- Response: `{ success: boolean, data: RetroSummary, meta: object }`

**Data Fallback Rule:**
- If API is not ready, keep dummy data but wrap in feature flag constant (e.g., `USE_RETRO_DUMMY = true`)
- Add TODO comment indicating when to remove dummy data

**Dependencies:**
- MUST read `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md` before starting
- Requires Dashboard V2 scaffold to be in place

### Todo

- [x] Read master PRD: `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`
- [x] Port Retro page component from Content OS to Dashboard V2
- [x] Migrate Retro UI components
  - [x] Replace Next.js imports with React Router equivalents
  - [x] Update component paths to Dashboard V2 structure
- [x] Define `RetroSummary` DTO in `src/types/content-os.ts`
- [x] Create API integration layer
  - [x] Add `retro/api.ts` with API endpoint definition
  - [x] Add `retro/queries.ts` with TanStack Query hooks
- [x] Migrate data and types
  - [x] Port retro types to Dashboard V2
  - [x] Set up dummy data with feature flag (`USE_RETRO_DUMMY`)
  - [x] Add TODO comments for API integration
- [x] Verify routing integration
  - [x] Test `/content-os/retro` route renders correctly
  - [x] Verify navigation from other Content OS pages
- [ ] Manual UI verification with dummy data
- [x] Document API contract in code comments

### Acceptance Criteria

1. `/content-os/retro` route renders correctly in Dashboard V2
2. UI matches Content OS Retro design and functionality
3. Data source is clearly defined (API or dummy with TODO)
4. All Next.js-specific code replaced with Dashboard V2 equivalents
5. TypeScript types properly defined in shared types file
6. Query hooks properly integrated with TanStack Query

### Validation

- Manual UI verification with dummy data
- Check routing navigation works correctly
- Verify all imports resolve correctly
- Check console for errors/warnings

### 작업 로그

#### 2026-01-16 16:35
**개요**: Retro UI를 Dashboard V2로 이식하고 타입/쿼리/더미 플래그를 추가해 `/content-os/retro`를 렌더링.

**변경사항**:
- Retro 타입/DTO(`RetroSummary` 등)와 데이터 소스 타입을 `src/types/content-os.ts`에 추가.
- Dummy 데이터/feature flag(`USE_RETRO_DUMMY`)와 통계 계산 셀렉터를 추가해 API 미준비 시 폴백.
- Retro API 레이어(`retro/api.ts`) 및 쿼리 훅(`useRetroSummary`) 구현: API 실패 시 더미로 대체하며 경고 노출.
- 이식된 UI 컴포넌트(ABReport/Learning/Negative Evidence/Badge 등)와 대시보드를 추가하고 `/content-os/retro` 페이지에 로딩·에러 처리 포함.

**파일 변경**:
- `dashboard-v2/src/pages/ContentOS/Retro/index.tsx`
- `dashboard-v2/src/features/content-os/retro/**/*`
- `dashboard-v2/src/types/content-os.ts`

**테스트**: `npm run build` ✅ (vite 번들 사이즈 경고만)

**결과**: ✅ 코드 반영 및 빌드 성공. 수동 UI 검증은 추가 필요.

## 참고

- Related Task: `tsk-0000os-1768466096543` (Dashboard V2 Scaffold)
- Master PRD: `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`
- Source: `/Users/gim-eunhyang/dev/loop/.agent/plan/task-12-migrate-retro-ui.md`
