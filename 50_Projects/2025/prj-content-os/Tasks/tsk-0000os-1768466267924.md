---
entity_type: Task
entity_id: tsk-0000os-1768466267924
entity_name: Content OS - Migrate Performance UI
created: '2026-01-15'
updated: '2026-01-16'
closed: '2026-01-16'
status: done
project_id: prj-content-os
parent_id: prj-content-os
assignee: 김은향
priority: medium
start_date: '2026-01-15'
due: '2026-01-15'
aliases:
- tsk-0000os-1768466267924
tags: []
type: dev
target_project: loop
---

# Content OS - Migrate Performance UI

## 설명

Port the Performance dashboard and detail pages from Content OS to Dashboard V2 under `/content-os/performance`.

## Notes

### Tech Spec

**VERY IMPORTANT - READ FIRST**
- You MUST read `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md` before starting this task.
- Do not proceed without reading it.

**Source files to migrate:**
- Pages:
  - `code/apps/content-os/app/performance/page.tsx`
  - `code/apps/content-os/app/performance/weekly/page.tsx`
  - `code/apps/content-os/app/performance/[videoId]/page.tsx`
- Components:
  - `code/apps/content-os/app/performance/components/*`
  - `code/apps/content-os/app/performance/weekly/components/*`
  - `code/apps/content-os/app/performance/[videoId]/components/*`
- Hooks:
  - `code/apps/content-os/app/performance/hooks/use-auth-status.ts`
  - `code/apps/content-os/app/performance/hooks/use-performance-data.ts`
  - `code/apps/content-os/app/performance/hooks/use-merged-performance.ts`
  - `code/apps/content-os/app/performance/hooks/use-snapshot.ts`
- Data:
  - `code/apps/content-os/app/performance/data/dummy-performance.ts`
- Types:
  - `code/apps/content-os/types/performance.ts`
  - `code/apps/content-os/types/youtube-analytics.ts`

**Target files (Dashboard V2):**
- Pages:
  - `code/dashboard-v2/src/pages/ContentOS/Performance/index.tsx`
  - `code/dashboard-v2/src/pages/ContentOS/Performance/VideoDetail.tsx`
- Feature module:
  - `code/dashboard-v2/src/features/content-os/performance/api.ts`
  - `code/dashboard-v2/src/features/content-os/performance/queries.ts`
  - `code/dashboard-v2/src/features/content-os/performance/components/*`

**Required behavior:**
- API base paths change to `/api/content-os/youtube/analytics/videos`.
- OAuth status uses `/api/content-os/auth/youtube/status`.
- If OAuth unauthenticated, show dummy data with warning (current behavior).

**API contract (explicit):**
- Analytics list: `GET /api/content-os/youtube/analytics/videos?maxResults=20`
- Dummy fallback: `GET /api/content-os/youtube/analytics/videos?maxResults=20&dummy=true`
- Auth status: `GET /api/content-os/auth/youtube/status`

**Query keys (explicit):**
- `queryKeys.contentOsYouTubeAnalytics(params)` -> `['content-os', 'youtube', 'analytics', params]`
- `queryKeys.contentOsYouTubeAuthStatus` -> `['content-os', 'youtube', 'auth', 'status']`

**Detail page rule:**
- Use list query and select by `videoId` (no separate detail endpoint).

### Todo

- [x] Read master PRD at `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`
- [x] Replace Next-only imports (`next/link`, `next/image`, `next/navigation`)
- [x] Update hooks to call new API paths
- [x] Ensure route params use React Router (`useParams`)
- [x] Preserve chart rendering and filter logic
- [x] Migrate Performance list page to `/content-os/performance`
- [x] Migrate Video detail page to `/content-os/performance/:videoId`
- [x] Verify OAuth status and dummy fallback behavior
- [ ] Manual UI and chart checks with dummy and authenticated states

## 체크리스트

- [x] All source files migrated to Dashboard V2
- [x] `/content-os/performance` route works end-to-end
- [x] `/content-os/performance/:videoId` route works end-to-end
- [x] OAuth status check implemented
- [x] Dummy data fallback working
- [ ] Charts rendering correctly
- [x] Filter logic preserved

### 작업 로그

#### 2026-01-16 15:06
**개요**: Dashboard V2에 Performance 페이지/상세/주간 뷰와 스냅샷 연동을 이식하고 OAuth/dummy 처리 및 차트 의존성을 추가.

**변경사항**:
- Content OS Performance 리스트/상세/주간 페이지를 Dashboard V2 경로(`/content-os/performance`, `/content-os/performance/:videoId`, `/content-os/performance/weekly`)로 추가하고 React Router `useParams`로 상세 조회.
- YouTube Analytics 호출을 `/api/content-os/...` 경로와 새 쿼리 키에 맞춰 갱신하고 OAuth 상태 기반 더미 데이터 자동 fallback + 스냅샷 머지 실패 시 더미 경고 처리.
- 스냅샷 업로드/미리보기/히스토리 및 진단 배지/필터/테이블/차트 컴포넌트 이식, 경량 UI 컴포넌트(`@/components/ui/*`)와 `recharts` 의존성 추가.
- 빌드 차단하던 불필요 변수 제거 및 타입/버튼/툴팁 유틸 보완.

**파일 변경**:
- `dashboard-v2/src/pages/ContentOS/Performance/*`
- `dashboard-v2/src/features/content-os/performance/**/*`
- `dashboard-v2/src/components/ui/*`
- `dashboard-v2/package.json`, `dashboard-v2/package-lock.json`
- `dashboard-v2/src/features/strategy/components/HypothesisForm.tsx`

**Codex 리뷰**: ✅ 빌드(`npm run build`) 통과. 차트/화면은 수동 확인하지 못해 추가 실기 테스트 필요.

**결과**: ✅ 코드 반영, 패키지 설치 완료(`recharts`). 빌드 성공. 수동 UI/차트 확인은 미진행.

## 참고

**Related PRD:** `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`
