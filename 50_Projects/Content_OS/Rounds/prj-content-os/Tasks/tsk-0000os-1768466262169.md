---
entity_type: Task
entity_id: tsk-0000os-1768466262169
entity_name: Content OS - Stabilize SSOT Build
created: '2026-01-15'
updated: '2026-01-17'
status: todo
project_id: prj-content-os
parent_id: prj-content-os
assignee: 김은향
priority: high
start_date: '2026-01-17'
due: '2026-01-17'
aliases:
- tsk-0000os-1768466262169
tags:
- content-os
- ssot
- build
- migration
type: dev
target_project: loop
---
# Content OS - Stabilize SSOT Build

## 설명

Ensure Content OS migration adheres to Dashboard V2 SSOT rules and the project builds cleanly. This task validates SSOT compliance after migrating Content OS features into Dashboard V2.

**IMPORTANT**: Read `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md` before starting implementation.

## Notes

### Tech Spec

**SSOT Compliance Rules:**

1. **No `next/*` imports** in `code/dashboard-v2/src`
   - All Next.js framework imports must be removed
   - Use Dashboard V2's custom routing and navigation

2. **API calls through centralized services**
   - All API calls go through `src/services/http.ts` or feature-specific `api.ts`
   - No direct `fetch()` calls in components

3. **DTOs in `src/types/*`**
   - All data transfer objects live in type definitions
   - Reuse existing DTOs, consolidate duplicates

4. **Query keys from `src/queries/keys.ts`**
   - All React Query keys must be centralized
   - Follow existing query key patterns

**Validation Commands:**
```bash
cd /Users/gim-eunhyang/dev/loop/code/dashboard-v2

# Check for Next.js imports
rg "next/" src

# Check for direct fetch calls in Content OS features
rg "fetch\(" src/features/content-os

# Check for query key usage
rg "queryKey" src/features/content-os

# Build verification
npm run build
```

**Architecture References:**
- Dashboard V2 SSOT: `code/dashboard-v2/ARCHITECTURE.md`
- Migration PRD: `.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`

### Todo

- [ ] Audit: Run `rg "next/" code/dashboard-v2/src` and remove all results
- [ ] Audit: Verify each Content OS feature uses `api.ts` + `queries.ts` pattern
- [ ] Audit: Check for direct `fetch()` calls in `src/features/content-os`
- [ ] Audit: Verify query keys come from `src/queries/keys.ts`
- [ ] Consolidate: Merge duplicate DTOs into `src/types/*`
- [ ] Build: Run `npm run build` and resolve all errors
- [ ] Test: Manual smoke test for core routes (kanban, calendar, graph, pending)
- [ ] Test: Manual smoke test for Content OS routes (`/content-os/*`)
- [ ] Document: Update ARCHITECTURE.md with Content OS integration patterns

## Acceptance Criteria

1. **Build Success**: `npm run build` passes with no errors
2. **No SSOT Violations**: All audit commands return clean results
3. **Core Routes Work**: Kanban, calendar, graph, pending routes function correctly
4. **Content OS Routes Work**: All `/content-os/*` routes function correctly
5. **No Console Errors**: Clean browser console on all tested routes

## 참고

- Parent Project: [[prj-content-os]]
- Migration PRD: `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`
- Dashboard V2 Codebase: `/Users/gim-eunhyang/dev/loop/code/dashboard-v2/`
