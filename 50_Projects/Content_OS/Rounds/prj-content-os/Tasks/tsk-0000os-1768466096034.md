---
entity_type: Task
entity_id: tsk-0000os-1768466096034
entity_name: Content OS - Migrate Opportunity UI
created: '2026-01-15'
updated: '2026-01-15'
closed: '2026-01-15'
status: done
project_id: prj-content-os
parent_id: prj-content-os
assignee: 김은향
priority: medium
start_date: '2026-01-15'
due: '2026-01-15'
aliases:
- tsk-0000os-1768466096034
tags:
- content-os
- migration
- ui
type: dev
target_project: loop
notes: "# Content OS - Migrate Opportunity UI\n\n> VERY IMPORTANT - READ FIRST\n>\n\
  > - You MUST read `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`\
  \ before starting this task.\n> - Do not proceed without reading it.\n\n## Purpose\n\
  \nPort the Opportunity UI and its data flow to Dashboard V2 under `/content-os/opportunity`.\n\
  \n---\n\n## Source files to migrate\n\n- **Page**: `code/apps/content-os/app/opportunity/page.tsx`\n\
  - **Components**:\n  - `code/apps/content-os/components/opportunity/opportunity-dashboard.tsx`\n\
  \  - `code/apps/content-os/components/opportunity/opportunity-grid.tsx`\n  - `code/apps/content-os/components/opportunity/opportunity-card.tsx`\n\
  \  - `code/apps/content-os/components/opportunity/opportunity-filters.tsx`\n  -\
  \ `code/apps/content-os/components/opportunity/index.ts`\n- **Hooks and types**:\n\
  \  - `code/apps/content-os/lib/api/hooks/useOpportunities.ts`\n  - `code/apps/content-os/lib/types/opportunity.ts`\n\
  \n---\n\n## Target files (Dashboard V2)\n\n- **Page**: `code/dashboard-v2/src/pages/ContentOS/Opportunity/index.tsx`\n\
  - **Feature module**:\n  - `code/dashboard-v2/src/features/content-os/opportunity/api.ts`\n\
  \  - `code/dashboard-v2/src/features/content-os/opportunity/queries.ts`\n  - `code/dashboard-v2/src/features/content-os/opportunity/selectors.ts`\n\
  \  - `code/dashboard-v2/src/features/content-os/opportunity/components/*`\n- **Types**:\
  \ `code/dashboard-v2/src/types/content-os.ts`\n\n---\n\n## Required behavior\n\n\
  - Data source is `GET /api/content-os/opportunities` (no Firebase client).\n- Filters\
  \ follow the OpportunityFilters type (purposeType, targetLoop, format, period).\n\
  - Sorting defaults to `finalScore` descending.\n\n---\n\n## Implementation checklist\n\
  \n- [ ] Copy UI components and remove any Next-only imports\n\n- [ ] Move data fetching\
  \ to `api.ts` and `queries.ts` using `httpClient`\n\n- [ ] Implement a query key\
  \ (e.g., `contentOs.opportunities` in `src/queries/keys.ts`)\n\n- [ ] Map API response\
  \ to `Opportunity` DTO and use in UI\n\n- [ ] Ensure empty, loading, and error states\
  \ are visible\n\n---\n\n## Acceptance criteria\n\n- [ ] `/content-os/opportunity`\
  \ renders correctly and uses API data\n\n- [ ] No `next/*` imports remain in migrated\
  \ files\n\n- [ ] The UI does not depend on Firestore hooks\n\n---\n\n## Validation\n\
  \n- Manual UI check with sample API data\n\n---\n\n## API contract (explicit)\n\n\
  | Item | Value |\n| --- | --- |\n| Endpoint | `GET /api/content-os/opportunities`\
  \ |\n| Query params | `status=candidate`, `orderByField=finalScore`, `limit=50`\
  \ |\n| Response envelope | `{ success, data: { items, nextCursor }, meta }` |\n\n\
  ---\n\n## Query key (explicit)\n\n```typescript\nqueryKeys.contentOsOpportunities(filters)\
  \ -> ['content-os', 'opportunities', filters]\n```\n\n---\n\n## Component decision\n\
  \n- Do not port Content OS Header/Sidebar; render within Dashboard V2 `AppLayout`\n\
  \n---\n\n## 참고\n\n- Planning file: `.agent/plan/task-09-migrate-opportunity-ui.md`\n\
  - PRD: `.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`"
---
# Content OS - Migrate Opportunity UI

> VERY IMPORTANT - READ FIRST
> - You MUST read `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md` before starting this task.
> - Do not proceed without reading it.

## Purpose

Port the Opportunity UI and its data flow to Dashboard V2 under `/content-os/opportunity`.

---

## Source files to migrate

- **Page**: `code/apps/content-os/app/opportunity/page.tsx`
- **Components**:
  - `code/apps/content-os/components/opportunity/opportunity-dashboard.tsx`
  - `code/apps/content-os/components/opportunity/opportunity-grid.tsx`
  - `code/apps/content-os/components/opportunity/opportunity-card.tsx`
  - `code/apps/content-os/components/opportunity/opportunity-filters.tsx`
  - `code/apps/content-os/components/opportunity/index.ts`
- **Hooks and types**:
  - `code/apps/content-os/lib/api/hooks/useOpportunities.ts`
  - `code/apps/content-os/lib/types/opportunity.ts`

---

## Target files (Dashboard V2)

- **Page**: `code/dashboard-v2/src/pages/ContentOS/Opportunity/index.tsx`
- **Feature module**:
  - `code/dashboard-v2/src/features/content-os/opportunity/api.ts`
  - `code/dashboard-v2/src/features/content-os/opportunity/queries.ts`
  - `code/dashboard-v2/src/features/content-os/opportunity/selectors.ts`
  - `code/dashboard-v2/src/features/content-os/opportunity/components/*`
- **Types**: `code/dashboard-v2/src/types/content-os.ts`

---

## Required behavior

- Data source is `GET /api/content-os/opportunities` (no Firebase client).
- Filters follow the OpportunityFilters type (purposeType, targetLoop, format, period).
- Sorting defaults to `finalScore` descending.

---

## Implementation checklist

- [ ] Copy UI components and remove any Next-only imports
- [ ] Move data fetching to `api.ts` and `queries.ts` using `httpClient`
- [ ] Implement a query key (e.g., `contentOs.opportunities` in `src/queries/keys.ts`)
- [ ] Map API response to `Opportunity` DTO and use in UI
- [ ] Ensure empty, loading, and error states are visible

---

## Acceptance criteria

- [ ] `/content-os/opportunity` renders correctly and uses API data
- [ ] No `next/*` imports remain in migrated files
- [ ] The UI does not depend on Firestore hooks

---

## Validation

- Manual UI check with sample API data

---

## API contract (explicit)

| Item | Value |
|------|-------|
| Endpoint | `GET /api/content-os/opportunities` |
| Query params | `status=candidate`, `orderByField=finalScore`, `limit=50` |
| Response envelope | `{ success, data: { items, nextCursor }, meta }` |

---

## Query key (explicit)

```typescript
queryKeys.contentOsOpportunities(filters) -> ['content-os', 'opportunities', filters]
```

---

## Component decision

- Do not port Content OS Header/Sidebar; render within Dashboard V2 `AppLayout`

---

## 참고

- Planning file: `.agent/plan/task-09-migrate-opportunity-ui.md`
- PRD: `.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`

### 작업 로그

#### 2026-01-15 20:35
**개요**: Opportunity UI를 Dashboard V2로 마이그레이션 (API 기반)

**변경사항**
- 타입/필터/라벨 정의 추가 (`dashboard-v2/src/types/content-os.ts`)
- API 연동 + React Query 훅/셀렉터 (`features/content-os/opportunity/api.ts`, `queries.ts`, `selectors.ts`)
- UI 마이그레이션: 필터/그리드/카드/대시보드 + 페이지 연결 (`features/content-os/opportunity/components/*`, `pages/ContentOS/Opportunity/index.tsx`)
- 기본 정렬 `finalScore desc`, 필터(목적/루프/포맷/기간), 즐겨찾기/제외 토글, Draft 토스트 처리

**테스트**
- `npm run build` 미실행 (node_modules 미설치 상태; 설치 후 빌드 필요)

**커밋**: `2c6666124` on branch `task/tsk-0000os-1768466096034`
