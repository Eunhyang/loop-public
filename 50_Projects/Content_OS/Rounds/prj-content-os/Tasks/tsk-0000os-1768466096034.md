---
entity_type: Task
entity_id: tsk-0000os-1768466096034
entity_name: Content OS - Migrate Opportunity UI
created: '2026-01-15'
updated: '2026-01-16'
status: todo
project_id: prj-content-os
parent_id: prj-content-os
assignee: 김은향
priority: medium
start_date: '2026-01-15'
due: '2026-01-15'
aliases:
- tsk-0000os-1768466096034
tags:
- content-os
- migration
- ui
type: dev
---
# Content OS - Migrate Opportunity UI

> VERY IMPORTANT - READ FIRST
> - You MUST read `/Users/gim-eunhyang/dev/loop/.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md` before starting this task.
> - Do not proceed without reading it.

## Purpose

Port the Opportunity UI and its data flow to Dashboard V2 under `/content-os/opportunity`.

---

## Source files to migrate

- **Page**: `code/apps/content-os/app/opportunity/page.tsx`
- **Components**:
  - `code/apps/content-os/components/opportunity/opportunity-dashboard.tsx`
  - `code/apps/content-os/components/opportunity/opportunity-grid.tsx`
  - `code/apps/content-os/components/opportunity/opportunity-card.tsx`
  - `code/apps/content-os/components/opportunity/opportunity-filters.tsx`
  - `code/apps/content-os/components/opportunity/index.ts`
- **Hooks and types**:
  - `code/apps/content-os/lib/api/hooks/useOpportunities.ts`
  - `code/apps/content-os/lib/types/opportunity.ts`

---

## Target files (Dashboard V2)

- **Page**: `code/dashboard-v2/src/pages/ContentOS/Opportunity/index.tsx`
- **Feature module**:
  - `code/dashboard-v2/src/features/content-os/opportunity/api.ts`
  - `code/dashboard-v2/src/features/content-os/opportunity/queries.ts`
  - `code/dashboard-v2/src/features/content-os/opportunity/selectors.ts`
  - `code/dashboard-v2/src/features/content-os/opportunity/components/*`
- **Types**: `code/dashboard-v2/src/types/content-os.ts`

---

## Required behavior

- Data source is `GET /api/content-os/opportunities` (no Firebase client).
- Filters follow the OpportunityFilters type (purposeType, targetLoop, format, period).
- Sorting defaults to `finalScore` descending.

---

## Implementation checklist

- [ ] Copy UI components and remove any Next-only imports
- [ ] Move data fetching to `api.ts` and `queries.ts` using `httpClient`
- [ ] Implement a query key (e.g., `contentOs.opportunities` in `src/queries/keys.ts`)
- [ ] Map API response to `Opportunity` DTO and use in UI
- [ ] Ensure empty, loading, and error states are visible

---

## Acceptance criteria

- [ ] `/content-os/opportunity` renders correctly and uses API data
- [ ] No `next/*` imports remain in migrated files
- [ ] The UI does not depend on Firestore hooks

---

## Validation

- Manual UI check with sample API data

---

## API contract (explicit)

| Item | Value |
|------|-------|
| Endpoint | `GET /api/content-os/opportunities` |
| Query params | `status=candidate`, `orderByField=finalScore`, `limit=50` |
| Response envelope | `{ success, data: { items, nextCursor }, meta }` |

---

## Query key (explicit)

```typescript
queryKeys.contentOsOpportunities(filters) -> ['content-os', 'opportunities', filters]
```

---

## Component decision

- Do not port Content OS Header/Sidebar; render within Dashboard V2 `AppLayout`

---

## 참고

- Planning file: `.agent/plan/task-09-migrate-opportunity-ui.md`
- PRD: `.agent/plan/prd-techspec-merge-content-os-into-dashboard-v2.md`
