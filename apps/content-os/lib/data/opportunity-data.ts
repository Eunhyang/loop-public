import { Opportunity } from "@/lib/types/opportunity";

// Raw opportunity data with days offset instead of fixed ISO dates
// The actual date calculation is done at runtime via getOpportunityData()
interface RawOpportunity extends Omit<Opportunity, "createdAt"> {
  daysAgo: number;
}

const rawOpportunityData: RawOpportunity[] = [
  {
    id: "opp-001",
    keyword: "야식 충동 멈추는 법",
    finalScore: 8.7,
    marketScore: 9.2,
    fitScore: 8.5,
    saturationScore: 0.15,
    whyNow: "최근 7일 검색량 +42%",
    recommendedBundle: { shorts: 2, longform: 1 },
    purposeType: "protocol",
    targetLoop: "eating",
    format: "shorts",
    daysAgo: 3,
    isFavorite: true,
    isExcluded: false,
  },
  {
    id: "opp-002",
    keyword: "스트레스 폭식 끊기",
    finalScore: 8.2,
    marketScore: 8.5,
    fitScore: 8.3,
    saturationScore: 0.22,
    whyNow: "연휴 시즌 관심도 상승",
    recommendedBundle: { shorts: 3, longform: 1 },
    purposeType: "problem",
    targetLoop: "emotional",
    format: "longform",
    daysAgo: 5,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-003",
    keyword: "아침 루틴 만들기",
    finalScore: 7.9,
    marketScore: 8.0,
    fitScore: 8.2,
    saturationScore: 0.35,
    whyNow: "새해 목표 설정 시즌",
    recommendedBundle: { shorts: 2, longform: 2 },
    purposeType: "protocol",
    targetLoop: "habit",
    format: "longform",
    daysAgo: 2,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-004",
    keyword: "도파민 디톡스 방법",
    finalScore: 9.1,
    marketScore: 9.5,
    fitScore: 8.8,
    saturationScore: 0.18,
    whyNow: "유튜브 트렌드 키워드 1위",
    recommendedBundle: { shorts: 4, longform: 1 },
    purposeType: "reframe",
    targetLoop: "reward",
    format: "shorts",
    daysAgo: 1,
    isFavorite: true,
    isExcluded: false,
  },
  {
    id: "opp-005",
    keyword: "자율신경 균형 맞추기",
    finalScore: 7.5,
    marketScore: 7.2,
    fitScore: 8.0,
    saturationScore: 0.12,
    whyNow: "건강 관련 검색 지속 상승",
    recommendedBundle: { shorts: 1, longform: 2 },
    purposeType: "worldview",
    targetLoop: "autonomic",
    format: "longform",
    daysAgo: 8,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-006",
    keyword: "감정 조절 3단계",
    finalScore: 8.4,
    marketScore: 8.6,
    fitScore: 8.5,
    saturationScore: 0.28,
    whyNow: "멘탈 헬스 관심도 급증",
    recommendedBundle: { shorts: 2, longform: 1 },
    purposeType: "protocol",
    targetLoop: "emotional",
    format: "shorts",
    daysAgo: 4,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-007",
    keyword: "간헐적 단식 실패 이유",
    finalScore: 8.0,
    marketScore: 8.3,
    fitScore: 7.9,
    saturationScore: 0.40,
    whyNow: "다이어트 시즌 키워드",
    recommendedBundle: { shorts: 2, longform: 1 },
    purposeType: "case",
    targetLoop: "eating",
    format: "community",
    daysAgo: 6,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-008",
    keyword: "습관 66일 법칙 진짜일까",
    finalScore: 7.8,
    marketScore: 7.5,
    fitScore: 8.2,
    saturationScore: 0.32,
    whyNow: "자기계발 콘텐츠 수요 증가",
    recommendedBundle: { shorts: 1, longform: 1 },
    purposeType: "reframe",
    targetLoop: "habit",
    format: "longform",
    daysAgo: 10,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-009",
    keyword: "보상 시스템 해킹하기",
    finalScore: 8.8,
    marketScore: 9.0,
    fitScore: 8.7,
    saturationScore: 0.20,
    whyNow: "게이미피케이션 트렌드",
    recommendedBundle: { shorts: 3, longform: 1 },
    purposeType: "protocol",
    targetLoop: "reward",
    format: "shorts",
    daysAgo: 2,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-010",
    keyword: "건강한 사람들의 공통점",
    finalScore: 7.6,
    marketScore: 7.8,
    fitScore: 7.5,
    saturationScore: 0.45,
    whyNow: "롱폼 콘텐츠 적합",
    recommendedBundle: { shorts: 1, longform: 2 },
    purposeType: "authority",
    targetLoop: "autonomic",
    format: "longform",
    daysAgo: 12,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-011",
    keyword: "음식 중독 벗어나기",
    finalScore: 8.5,
    marketScore: 8.7,
    fitScore: 8.4,
    saturationScore: 0.25,
    whyNow: "건강 인식 제고 캠페인 연계",
    recommendedBundle: { shorts: 2, longform: 1 },
    purposeType: "problem",
    targetLoop: "eating",
    format: "shorts",
    daysAgo: 3,
    isFavorite: false,
    isExcluded: false,
  },
  {
    id: "opp-012",
    keyword: "미루는 습관 극복법",
    finalScore: 8.3,
    marketScore: 8.5,
    fitScore: 8.2,
    saturationScore: 0.30,
    whyNow: "연초 생산성 관련 검색 급증",
    recommendedBundle: { shorts: 2, longform: 1 },
    purposeType: "protocol",
    targetLoop: "habit",
    format: "community",
    daysAgo: 5,
    isFavorite: false,
    isExcluded: false,
  },
];

// Helper to generate ISO date string from days ago - called at runtime
function getDateDaysAgo(days: number): string {
  const date = new Date();
  date.setDate(date.getDate() - days);
  return date.toISOString();
}

// Export function that generates fresh dates at runtime
export function getOpportunityData(): Opportunity[] {
  return rawOpportunityData.map(({ daysAgo, ...rest }) => ({
    ...rest,
    createdAt: getDateDaysAgo(daysAgo),
  }));
}
