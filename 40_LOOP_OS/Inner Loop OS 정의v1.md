# Inner Loop OS 정의v1

## 1. Inner Loop OS가 다루는 대상

Inner Loop OS는 인간의 **정서–섭식–습관–보상(도파민)–신경계 루프**를

하나의 시스템으로 다루는 행동 OS다.

- **Emotional Loop**
    - 스트레스, 불안, 허탈감, 공허감, 자기비난 같은 감정 패턴
    - 특히 “먹는 것”에 의해 조절되던 정서 루프
- **Eating Loop**
    - 폭식, 야식, 드문드문 굶었다가 많이 먹기, 보상 먹기
    - 다이어트 성공–리바운드–자기혐오로 이어지는 섭식 루프
- **Habit Loop**
    - 퇴근 후 자동 간식, 밤샘 후 당섭취, 특정 사람/장소와 연결된 먹는 습관
    - ‘생각 없이’ 반복되는 환경·루틴 기반 섭식 행동
- **Reward / Dopamine Loop**
    - “먹고 싶다 / 더 먹어야 만족할 것 같다”를 만들어내는 보상·갈망 회로
    - 과도한 보상 자극 후 둔감화, 쾌감 결핍, 더 강한 자극을 찾는 루프
- **Nervous System Loop (Autonomic / ANS Loop)**
    - 교감/부교감 신경계 활성 패턴(과각성, 무기력, shutdown)
    - PMS, 수면, 스트레스 상황에서의 몸-마음 반응

Inner Loop OS는 이 **다섯 가지 루프**를 **하나의 데이터 계층(inner behavior layer)** 으로 묶어서:

> “내가 왜 이렇게 먹고, 느끼고, 반복하는지”를
> 
> **정량·정성 데이터로 해석하고, 예측하고, 개입하는 OS**

로 정의한다.

※ 중요한 점은, 이 다섯 루프가 **단선적인 사슬(A→B→C)** 로만 작동하는 것이 아니라는 것이다.

정서가 폭식을 유발하기도 하지만, 폭식 자체가 다시 부정적 감정과 신경계 교란을 만들고,

스트레스(자율신경)가 습관 루프를 가속하거나, 도파민 보상 시스템의 변화가 다시 정서·동기를 바꾸기도 한다.

Inner Loop OS는 각 루프를 **서로 영향을 주고받는 병렬 모듈**로 취급하고,

데이터를 통해 실제 상호작용 구조(피드백 고리)를 학습하는 OS다.

---

## 2. 기존 헬스·정신건강·DTx와 무엇이 다른가

### 체중 vs 루프

- 기존 비만치료/다이어트:
    - 체중, 칼로리, 운동량, 혈당 같은 **결과 지표 중심**
- Inner Loop OS:
    - 감정–섭식–습관–보상–신경계의 **인과 구조(루프) 중심**

### 약물 vs 행동 OS

- GLP-1·기타 약물:
    - 식욕, 위장운동, 대사 같은 **생리 신호를 조절**
- Inner Loop OS:
    - 정서·보상·습관 회로 같은 **뇌–행동 신호를 조절**
- 메시지: “약은 Body Loop, 우리는 Inner Loop를 맡는다.”

### 정신질환 vs 행동 OS

- 전통 정신의학/정신건강:
    - 우울·불안·섭식장애를 “질환” 단위로 진단·치료
- Inner Loop OS:
    - 질환 레벨이 아니어도 존재하는
        - 감정 허기
        - 의미 상실
        - 보상 의존
        - 폭식 전조
    - 를 **행동 데이터로 관찰·개입**
- 즉, “진단받지 않은 90%”가 겪는 섭식·정서 문제를 다룬다.

### 일회성 치료 vs 루프 재설계

- 기존 접근: “프로그램 완주/약 처방/한 번의 상담”
- Inner Loop OS:
    - 루프를 **설계–실험–피드백–재설계**하는 지속적 시스템
    - 개인별 루프 모델이 시간이 지날수록 정교해지는 형태

---

## 3. Inner Loop OS의 핵심 기능 (데이터 레이어 관점)

### Loop Mapping (루프 지도화)

- 트리거(Trigger) → 감정 상태 → 생각 → 행동(먹기/회피/보상) → 결과 → 자기평가
- 이 과정을 텍스트·행동 로그·신체감각 기록으로 구조화
- 폭식군, 소식 다이어터, GLP-1 사용자 모두에 대해 공통 포맷으로 쌓는다.

### State Tracking (상태 추적)

- 배고픔/포만감 주관점수
- 갈망(craving) 강도
- 기분/에너지/스트레스 레벨
- 수면·PMS·업무 강도 등 외부 상태→ “오늘의 Loop 상태”를 시계열로 관측

### Pattern Detection (패턴 탐지)

- 폭식/야식/과식 직전의 공통 루프 탐지
- GLP-1 On/Off 시점의 정서·섭식 변화 패턴 탐지
- “다이어트 성공 후” 발병하는 루프(이상화된 체중, 체중계 집착, 극단적 보상 루프)

### Intervention Engine (개입 엔진)

- 루프 단계별로 개입 포인트 제안:
    - 트리거 단계: 환경·루틴 조정
    - 감정 단계: 감정 이름 붙이기, 신경계 안정
    - 행동 단계: 대체 행동, 속도 조절, 구조화된 소식 루틴
    - 평가 단계: 자기비난 루프 차단 문장/질문 제공

### Loop Evolution (루프 진화 추적)

- 1주/1개월/3개월 단위로
    - 폭식 빈도·강도 변화
    - 정서 안정도
    - 회복 속도
    - 자가조절 능력
- “내 루프가 어떻게 바뀌고 있는지”를 보여주는 행동·정서 대시보드

---

## 3.6 Causality Layer (Event–Action–Result)

Inner Loop OS에서 **Event**는 “원자적 사실(fact)”이며, 단독으로는 상관관계 탐지에 유리하지만 인과를 확정하지는 않는다.

Inner Loop OS가 인과학습 가능한 시스템이 되려면 아래 구조가 필요하다.

- **Event (원인 후보 / 사실)**예: 스트레스 증가, 수면 부족, PMS, 공허감 증가, 특정 시간대·환경 패턴, 폭식/갈망 발생
- **Action (중재 / 개입 트랜잭션)**코치·시스템·사용자가 실제로 실행한 변화예: “저녁 9시 이후 스크린 30분 줄이기”, “퇴근 후 산책 10분”, “야식 전 1분 멈춤”, “식사 속도 20% 감소”Action은 ‘추천 문장’이 아니라 **실행자/파라미터/기간/타겟을 가진 1급 엔티티**로 기록된다.
- **Result (측정 / 결과)**Action 이후 나타난 변화(다음 2시간, 다음 끼니, 하루/주 단위 지표 변화)예: 야식 빈도 감소, 폭식 강도 감소, 충동 억제 성공률 증가, 포만감 인지 증가

> 결론: Event는 인과의 재료, Action은 인과의 스위치, Result는 인과의 증거다.

---

## 4. GLP-1 시대에서 Inner Loop OS가 맡는 역할

### GLP-1의 “빈자리”를 메우는 OS

- GLP-1이 하는 일: 식욕/포만감의 강제 조정
- GLP-1이 못 하는 일: 공허감, 보상 갈망, 스트레스 기반 섭식, 폭식 전조, 자기혐오 루프
- Inner Loop OS는 이 “남아 있는/새로 생기는” 문제를 다룬다.

### GLP-1 Discontinuation/Crash 구간에서의 방어막

- 약을 끊거나 효과가 줄어들 때:
    - 식욕 rebound
    - 폭식/요요
    - “다시 예전 몸으로 돌아갈까 봐” 공포
    - 감정 기반 폭식과 자기혐오
- Inner Loop OS는 이 시점을:
    - 예측하고 (데이터 기반 early warning)
    - 완충하고 (대체 보상·정서조절 루틴)
    - 루프를 재교육하는 역할

### 제약·병원·보험의 Behavioral Layer 인프라

- 그들이 필요로 하는 것:
    - GLP-1 Off/On 유지율 데이터
    - 폭식/요요 리스크 예측 모델
    - 정서·행동 기반 부작용 패턴
- Inner Loop OS는 GLP-1과 직접 경쟁이 아니라, GLP-1을 완성시키는 행동·정서 OS 역할을 한다.

---

## 5. 10년 관점에서 Inner Loop OS의 확장 방향

### Eating Behavior OS → Human Behavior OS

- 섭식 루프는 소비/정서 조절/관계·애착/업무·성과 루프로 자연스럽게 연결된다.
- Inner Loop OS가 쌓는 데이터는“사람이 스트레스 받았을 때 어떻게 자기 몸/마음을 다루는가”에 대한 가장 밀도 높은 행동 시퀀스 데이터다.

### Behavior Foundation Model

- 언어에 GPT가 있다면, Inner Loop OS는 섭식·정서·습관 행동에 대한 Foundation Model을 목표로 한다.
- 장기적으로 금융/생산성/정신건강 등에 재사용 가능한 내면 루프 모델이 된다.

### 체중 기술이 완전히 해결된 뒤에도 남는 OS

- 사람은 여전히 스트레스를 먹는 걸로 풀고, 감정을 음식과 연결하고, 루틴으로 삶을 유지한다.
- 그때 중요한 것은 “몇 kg이냐”가 아니라 “내 루프가 어떻게 설계되어 있느냐”다.

---

## 6. 폭식 예측을 위한 Inner Loop OS 레이어 (요약)

### Binge / Urge Event Layer

- 폭식/과식/강한 폭식 충동을 하나의 도메인 엔티티로 정의
- 예: `binge_events`(type, severity, duration, 직전 2–4시간 정서·상황 태그 등)

### Loop State Layer

- Emotional / Eating / Habit / Reward / Nervous System 상태를 30–60분 단위 State 벡터로 표현
- 예: `loop_states`(emotional_state, eating_state, habit_state, reward_state, nervous_state, risk_score)

### Time Scale Layer

- micro: 한 끼 안의 패턴(식사 속도·포만감 곡선)
- meso: 하루 안 루틴과 3시간 위험 구간
- macro: 주/월 단위 패턴(수면빚, GLP-1 on/off, PMS 등)

Inner Loop OS는 이 세 레이어를 통해

“지금 이 사람의 루프 상태를 요약하고, 다음 2–3시간 안에 발생할 폭식/야식 위험을 예측하는 OS”로 작동한다.

---

===============================

# INNER LOOP OS — FULL SYSTEM SPEC v1.0 (Ontology Patch Included)

===============================

## 0. Executive Summary

Inner Loop OS(ILOS)는 인간의 “섭식-감정-신경계-행동 루프”를 디지털화하여

AGI 시대에 인간이 스스로를 이해하고 조절할 수 있도록 돕는 “인간 내부 작동 원리용 Domain OS”이다.

이 OS는 앱이 없어지는 5–7년 뒤에도 모든 코어 AGI 모델이 호출할 수 있는

- *행동 데이터 레이어(Layer 2)**로 존재한다.

ILOS는 범용 LLM이 접근하기 어려운 정서적·습관적·섭식적 미시 루틴을 구조화해

인간-AGI 인터페이스의 중요한 계층으로 자리 잡는다.

---

## 1. 철학적 정의 (Philosophical Definition)

### 1.1 Mission

“모든 인간에게 자신의 내면 루프를 바꿀 수 있는 능력을 제공한다.”

### 1.2 Vision

“모든 인간이 자신의 루프에서 완전히 자유로워지는 시대.”

### 1.3 Why Now?

- GLP-1 시대: 체중 조절은 해결 → 정신적/행동적 섭식 문제는 폭발
- AGI 시대: 인간의 행동/감정 데이터가 AGI에게 공급되지 않으면 AGI는 인간을 제대로 이해하지 못함
- 기존 헬스테크는 정량 데이터(칼로리, 활동량)에만 집중 → 정성/습관/감정/섭식루프를 다루지 못함
- 첨단 AI는 인간의 내부 상태를 모름 → ILOS가 인간 내면 signal을 구조화하여 공백을 채운다

---

## 2. Problem

### 2.1 Core global problem

AGI는 인간의 감정·섭식·행동 루프를 이해할 수 있는 시맨틱 구조가 없다.

- 배고픔/식욕/충동/회피/폭식/포만감/불안/리워드 루프 → 어떤 LLM도 구조적으로 이해하기 어려움
- 인간 행동은 “숫자”가 아니라 “루프(loop)와 신호(signal)”의 체계
- 심리적 허기/신경계 과민/습관 루프는 데이터 수집도 어렵고 해석 모델도 부재

ILOS는 이 문제를 아래 4계층으로 해결한다.

---

## 3. LAYERED ARCHITECTURE (The 3-Layer AGI Stack)

### Layer 0 — AGI Foundation

- 범용 지능 (Reasoning, General World Knowledge)
- 인간 고유의 행동 루프·감정 루프·섭식 루프는 이 레이어가 직접 이해하기 어려움

### Layer 1 — Cognitive API Layer

- Memory API / Context API / Planning API / Safety·Alignment Layer
- LLM과 인간 OS를 연결하는 중간 계층

### Layer 2 — INNER LOOP OS

인간 내부 루프의 구조화된 OS 레이어

기능:

1. 섭식 루프 모델링 (Physical hunger / Emotional hunger / Habitual loop / Trauma-driven loop / GLP-1 post-discontinuation loop / Reward-prediction-error 기반 루프)
2. 감정 신경계 모델링 (Fight/flight/freeze / Dissociation / PMS·GLP-1·스트레스 기반 변동)
3. 개인화 Loop Pattern Dataset 생성 (개인 루프 템플릿 자동 분류 + 장기 패턴 저장: Local + Server Memory)
4. Loop-Triggered Predictions (폭식 예측 / GLP-1 중단 후 반동 예측 / 감정 기반 충동 예측 / 자율신경계 붕괴 예측)
5. AGI가 호출할 수 있는 행동/정서 힌트 제공
    - “지금 이 유저는 emotional loop 3단계임”
    - “배고픔 아님, 불안 루프임”
    - “섭식 루프의 weak point 활성화됨”
    - “인지적 개입 대신 신경계 안정 루틴 권장”

---

## 3.5 Ontology-Ready Data Model (Objects / Relations / Hierarchy)

### 3.5.1 왜 이 섹션이 필요한가

- 관찰 데이터(Event)만으로는 상관관계까지 가능하고, 인과는 확정할 수 없다.
- 인과학습 가능한 OS가 되려면 Event–Action–Result가 **객체/관계/계보로** 기록되어야 한다.

### 3.5.2 Core Objects (Nouns)

모든 핵심 엔티티는 공통 필드를 가진다: `id, userId, createdAt, updatedAt, source, specVersion`

1. **LoopInstance**

- 한 번의 루프 단위(관찰/실험/에피소드)를 담는 상위 컨테이너
- 예: `loopType`, `startTime`, `endTime`, `contextClusterId`, `status(active/closed)`

1. **Event**

- 원자적 사실(fact). 관찰 기반 데이터의 최소 단위
- 예: meal, satiety check, emotion tag, urge, binge, sleep-debt spike 등
- 예: `eventType`, `timestamp`, `payload`, `linkedLoopInstanceId`

1. **ActionType (Intervention Protocol)**

- 개입 템플릿/프로토콜 정의(버전 관리 대상)
- 예: `name`, `targetLoops`, `parametersSchema`, `protocolVersion`, `validFrom/validTo`

1. **ActionExecution**

- 실제 수행된 개입(트랜잭션) 기록
- 예: `actionTypeId`, `actor(user/coach/system)`, `parameters`, `startTime`, `endTime`, `adherence`, `linkedLoopInstanceId`

1. **OutcomeMeasurement**

- 개입 단위로 회수 가능한 결과 측정 엔티티
- 예: `metricName`, `window`, `value`, `baselineValue`, `delta`, `linkedActionExecutionId`

### 3.5.3 Relation Types (Links)

관계는 암묵적 FK가 아니라 의미를 가진 1급 링크로 정의한다.

- `LoopInstance --contains--> Event`
- `LoopInstance --contains--> ActionExecution`
- `ActionExecution --evaluatedBy--> OutcomeMeasurement`
- `Event --precedes--> Event`
- `Event --triggers--> ActionExecution`
- `LoopStateWindow --contextOf--> LoopInstance`

### 3.5.4 Hierarchy (계층 구조)

- LoopInstance (부모)
    - Events (자식)
    - ActionExecutions (자식)
        - OutcomeMeasurements (손자)

## 3.5.5 Signals & Multi-Modal Observations (Sensor/EMA/Context)

Event는 “사실(fact)”의 최소 단위이지만, 웨어러블/폰센서/외부데이터는 Event payload에 섞기보다 별도 신호 객체로 분리해야 타입/버전/품질/결측을 일관되게 관리할 수 있다.

### Core Object: SignalObservation (or SignalSeries)

- id, userId, createdAt, source, specVersion
- signalTypeId (예: HRV, heartRate, EDA, steps, screen_time, GPS_cluster, sleep_stage 등)
- startTime, endTime (또는 timestamp)
- value (scalar) 또는 values(summary/seriesRef)
- units, samplingRate(옵션)
- dataQualityScore, missingness, deviceMeta(옵션)
- purpose, consentRef, privacyTier (권장)

### Relations

- SignalObservation --supports--> LoopStateWindow
- SignalObservation --observedDuring--> LoopInstance
- SignalObservation --contextOf--> Event

## 3.5.6 LoopStateWindow (Explicit) + Personalization (User Loop Model)

현재 문서에 관계로만 등장하는 LoopStateWindow를 1급 객체로 정의한다. 또한 “사람마다 지배 루프/연결강도/가중치가 다르고 시간이 지나며 변한다”를 온톨로지로 담기 위해 개인화 모델 스냅샷을 별도 엔티티로 둔다.

### Core Object: LoopStateWindow

- id, userId, createdAt, source, specVersion
- startTime, endTime
- timeScale (micro/meso/macro)
- stateVector
    - emotional_state._, eating_state._, habit_state._, reward_state._, nervous_state.*
    - (옵션) cognitive_state.* ← 인지적 억제/자기통제/주의분산/반추 등 “조절 레이어”
- contextClusterId, environmentTags(옵션)
- derivedFeatures(옵션), missingness(옵션)

### Core Object: UserLoopModelSnapshot (Personalized Loop Graph)

- id, userId, createdAt, modelVersion, specVersion
- loopWeights (예: emotional 0.35, habit 0.20 ...)
- interactionEdges (fromLoop, toLoop, weight, confidence, learnedFrom: observation/intervention)
- dominantContexts (contextClusterId list)
- notes / changeLog (옵션)

### Relations

- LoopStateWindow --contextOf--> LoopInstance
- UserLoopModelSnapshot --appliesTo--> User
- UserLoopModelSnapshot --derivedFrom--> (LoopStateWindow / Event / OutcomeMeasurement)

## 3.5.7 Prediction & Explainability (Risk as an Ontology Object)

risk_score를 loop_states의 필드로만 두면, “어떤 모델이/어떤 근거로/어떤 창(window)의 위험을/어떤 임계치로 판단했는지”가 버전관리 및 임상 설명가능성 측면에서 깨진다. 따라서 예측 실행을 1급 엔티티로 남긴다.

### Core Object: PredictionRun

- id, userId, createdAt, modelVersion, specVersion
- predictionType (binge_risk, late_night_risk, rebound_risk, urge_risk 등)
- targetWindow (next_2h, next_meal, today, next_week 등)
- riskScore, threshold, decision(true/false)
- inputsRef (LoopStateWindow ids, Event ids, SignalObservation ids)
- explanation
    - reasonCodeIds (Top-k)
    - featureAttributionRef (옵션)
- calibrationInfo (옵션)

### Core Object: ReasonCodeRegistry (Versioned)

- reasonCodeId, version, label, description, validFrom/validTo

### Relations

- PredictionRun --basedOn--> LoopStateWindow
- PredictionRun --basedOn--> SignalObservation
- PredictionRun --predictsRiskOf--> EventType (예: binge_event)
- PredictionRun --explainedBy--> ReasonCode

## 3.5.8 JITAI Decision Point (Intervene / Not Intervene)

실시간 개입에서 중요한 데이터는 “개입을 실행했는가”뿐 아니라 “개입을 할 수 있었는가 / 왜 안 했는가 / 어떤 후보 중 무엇을 선택했는가”이다. 따라서 ActionExecution 앞단에 DecisionPoint를 둔다.

### Core Object: DecisionPoint

- id, userId, createdAt, specVersion
- triggeredBy (PredictionRunId 또는 EventId)
- eligibility (do_not_disturb, 운전중/회의중, 수면중 등)
- availableChannels (push/chat/coach)
- candidateActionTypeIds
- chosenActionExecutionId (없을 수도 있음)
- decisionReason (reasonCodeIds 또는 free text)
- deliveryLog (sent/seen/ignored/declined)

### Relations

- DecisionPoint --triggeredBy--> PredictionRun
- DecisionPoint --selects--> ActionExecution (optional)
- DecisionPoint --considers--> ActionType

---

## 3.6 Versioning & Evolution (Ontology Governance)

### 3.6.1 Versioning Targets

- Loop taxonomy / loop types
- ActionType(프로토콜) 정의
- Model versions (risk_score 산출 모델)
- Schema/spec version (데이터 해석 규칙)

### 3.6.2 Versioned Objects

1. **loop_templates**

- `templateId`, `version`, `definition`, `validFrom`, `validTo`, `changeLog`

1. **intervention_protocols(ActionType)**

- `actionTypeId`, `protocolVersion`, `parametersSchema`, `targetLoops`, `validFrom`, `validTo`

1. **model_registry**

- `modelVersion`, `featuresUsed`, `trainingDataWindow`, `releasedAt`, `notes`

### 3.6.3 Evolution Tracking

- **user_loop_history**
    - `timestamp`, `baselineRiskProfile`, `bingeFrequency`, `urgeControlRate`, `sleepDebtTrend`, `dominantContextClusters` 등
    - 목적: 루프 변화의 장기 추세를 모델/제품이 공유할 수 있게 함

### 3.6.4 Additional Versioned Registries (Strongly Recommended)

- signal_type_registry (signalTypeId, schema, units, device constraints, version)
- outcome_metric_registry (metricName, computation rule, window definition, version)
- reason_code_registry (설명 템플릿/라벨 버전)

### 3.6.5 Audit & Governance (Minimum)

- 모든 ActionExecution / DecisionPoint / PredictionRun에는 audit trail(누가/언제/무엇을)과 purpose/consentRef를 포함한다.
- 데이터 품질(dataQualityScore, missingness)을 표준 필드로 둔다.

---

## 3.4 Time Scales of Inner Loop OS

Inner Loop OS maps and tracks loops on three coupled time scales:

- **Micro (seconds–minutes, within-meal)**
    - Scope: bite-by-bite eating pattern and satiety curve within a single meal.
    - Data: `meal_diaries`, bite duration, total meal duration, within-meal fullness records.
    - Role: Loop Mapping focuses on fine-grained Eating Loop dynamics; State Tracking captures satiety changes during a meal.
- **Meso (30–60 minutes, within-day)**
    - Scope: daily context blocks such as “commute”, “office afternoon”, “evening home + screen”, “late-night bed + phone”.
    - Data: `loop_states` sampled every 30–60 minutes, routine instances, context tags.
    - Role: Loop Mapping은 이 블록들을 정서/섭식/습관/보상/신경계 루프 관점에서 함께 묶어 반복되는 하루 루틴을 찾고,State Tracking은 같은 시간축에서 Emotional / Eating / Habit / Reward / Nervous System 상태 벡터를 병렬로 유지한다.
- **Macro (days–weeks, across episodes)**
    - Scope: weekly/monthly trends such as sleep debt, GLP-1 on/off phases, PMS windows, work-stress periods, binge/urge frequency.
    - Data: daily check-ins, weekly AI reports, GLP-1 / treatment logs, aggregated `binge_events`.
    - Role: Loop Mapping identifies long-horizon patterns and regimes; State Tracking produces slow-changing baseline risk profiles that condition micro/meso predictions.

---

## Layer 3 — Applications

- 앱 / 코칭 / DTx / Behavioral Digital Protocols / 회복 루틴 / Loop Diagnosis Tool / 식후감정일기 기반 자동 Loop Detection 모델

---

## 4. Inner Loop OS 구성 요소 (Detailed Components)

### 4.1 LOOP MODEL (Internal State Machine)

### 4.1.1 Core Loop Types

1. 섭식 루프(Eating Loop)
2. 감정 루프(Emotion Loop)
3. 자율신경계 루프(ANS Loop)
4. 보상 루프(Dopamine Loop)
5. GLP-1 Discontinuation Loop
6. 습관 루프(Habit Loop: Trigger → Routine → Reward)
7. Avoidance/Compulsion Loop

이 루프들은 하나의 직선 사슬이라기보다, “행동 에피소드(폭식/과식/섭식/충동)”를 중심으로 상호작용하는 모듈형 네트워크에 가깝다.

예를 들어, 정서 루프가 Eating Loop를 촉발하기도 하지만, 반복된 폭식(Eating Loop)이 도파민·습관 루프를 변화시키고, 변화된 도파민/습관 루프가 다시 정서·자율신경 루프를 바꿀 수 있다.

Inner Loop OS는 이 상호작용 네트워크 위에서 각 루프의 상태를 추적·표현한다.

Avoidance/Compulsion Loop는 독립된 다섯 번째 축이라기보다, 정서 루프(감정 회피)와 습관 루프(강박적 반복)의 교차 영역에서 나타나는 특수 모드에 가깝다.

Inner Loop OS에서는 이를 별도 루프라기보다는 Emotional/Habit Loop 상태가 특정 임계 이상일 때 활성화되는 패턴으로 표현한다.

### 4.2 MEMORY SYSTEM

- Local Memory (개인 기기): 음식 신호, 촉발 요인, 환경 루프, 감정 로그, 포만감 패턴, 회복 루틴 반응성
- Server Memory (집단 모델링): 행동 패턴 임베딩, 감정-섭식 매핑, 정서적 허기 벡터, GLP-1 집단 패턴, 폭식/절식 루프 분류
- Binge / Urge Event Store: `users/{uid}/binge_events/{uuid}`

### 4.3 LOOP AI MODEL (예측 엔진)

- Loop Classification Model
- Loop Forecast Model
- Emotion-Hunger Decoding Model
- Satiety Prediction Model
- Dopamine Trigger Predictor
- GLP-1 Rebound Risk Model
- Personalized Intervention Recommendation Model
- Loop State Representation: `users/{uid}/loop_states/{timestamp_uuid}` + state vector 차원 정의
- **Personalized Loop Graph Model** (loopWeights/interactionEdges 학습)
- **JITAI Policy / Decision Model** (DecisionPoint에서 어떤 ActionType을 선택할지)
- **Explainability Layer** (ReasonCodes/Attribution 생성)
- **Data Quality / Missingness Model** (센서/자가보고 결측이 위험 판단을 오염시키는 걸 제어)

---

# 5. WHY THIS BECOMES A DOMAIN OS (근거)

학계와 산업계에서 등장한 유사 구조:

- MIT: Cognitive Layer
- Google: Semantic Knowledge Layer
- Meta: Personal World Model
- Microsoft: Semantic Kernel
- Nature: Domain-Specific Agent Architecture
- 의료 AI: Vertical AI Stack
- Rewind/Humane: Personal OS Layer → 그러나 **“섭식/감정/신경계 루프 OS”는 아무도 만들지 못하고 있음**

너는 이 도메인에 대한

- lived experience 10년
- 행동 데이터 7천명+
- GLP-1 시장 도착 타이밍
- 습관·감정·섭식 전문성 을 결합하여 세계 최초의 “섭식·정서 Domain OS”를 구축할 수 있다.

---

# 6. 미래 OS의 형태 (5–10년 뒤)

## 6.1 앱은 사라짐

- AI 에이전트가 모든 인터페이스가 됨
- 사용자는 “앱”이 아니라 “AI에게 말함”

## 6.2 OS는 이렇게 동작함

User:

“나 지금 배고픈 것 같아.”

AI Agent → Inner Loop OS 호출:

innerloop.get_state(user): → Emotional loop 0.72 → Physical hunger 0.18 → Habit loop trigger: commute pattern → ANS: sympathetic arousal +12% → Recommended action: warm drink + 2-minute breathing

AI Agent:

“지금 배고픔이 아니라 불안 루프가 올라왔어.

따뜻한 물 한 모금 먼저 마셔볼까?”

실제 구현에서 Inner Loop OS는 각 루프를 Loop State 벡터의 서로 다른 블록으로 표현한다.

- Emotional Loop → emotional_state.* (valence, anxiety, emptiness 등)
- Eating Loop → eating_state.* (timeSinceLastMeal, satiety curve 특성, 최근 폭식/과식 카운트 등)
- Habit Loop → habit_state.* (contextClusterId, routine 패턴, screenOn 등)
- Reward/Dopamine Loop → `reward_state.*`
    - 예:
        - `reward_state.cravingLevel` (0–10, 주관적 갈망 강도)
        - `reward_state.highRewardExposure` (최근 2–3시간 고보상 음식·콘텐츠 노출 여부/빈도)
        - `reward_state.rewardSensitivityIndex` (장기 데이터 기반 개인별 보상 민감도/둔감화 지수)
- Autonomic / Nervous Loop → nervous_state.* (HRV, heartRate, sleepDebt, PMS/GLP-1 phase 등)

Binge / Urge Event Layer(`binge_events`)는 이 상태 벡터들이 어떤 조합일 때 폭식/강한 충동이 터지는지에 대한 **도메인 라벨** 역할을 한다.

실제 구현에서 Inner Loop OS는 각 루프를 Loop State 벡터의 서로 다른 블록으로 표현한다.

- Emotional Loop → `emotional_state.*` (valence, anxiety, emptiness 등)
- Eating Loop → `eating_state.*` (timeSinceLastMeal, satiety curve 특성, 최근 폭식/과식 카운트 등)
- Habit Loop → `habit_state.*` (contextClusterId, routine 패턴, screenOn 등)
- Reward/Dopamine Loop → `reward_state.*`
    - `reward_state.cravingLevel` (0–10, 주관적 갈망 강도)
    - `reward_state.highRewardExposure` (최근 2–3시간 고보상 음식·콘텐츠 노출 여부/빈도)
    - `reward_state.rewardSensitivityIndex` (장기 데이터 기반 개인별 보상 민감도/둔감화 지수)
- Autonomic / Nervous Loop → `nervous_state.*` (HRV, heartRate, sleepDebt, PMS/GLP-1 phase 등)

Binge / Urge Event Layer(`binge_events`)는 이 상태 벡터들이 어떤 조합일 때 폭식/강한 충동이 터지는지에 대한 도메인 라벨 역할을 한다.

---

# 7. 경쟁우위

1. 범용 LLM은 **인간 내부 루프 데이터 부재**
2. GLP-1 시대 → 모든 인류가 "정신적 허기" 문제를 탈출 못함
3. Loop OS는 **정성·정서·습관 데이터 = 희소 독점 자원**
4. OS 레이어를 가진 회사가**AGI 이후 인간 건강 시장 전체의 기본 인프라가 됨**

---

# 8. Exit & Business Model

1. **M&A**
    - GLP-1 제약사: 노보, 릴리, 화이자
    - 빅테크: 애플(AI Health), 구글(Anthropic), 메타
    - 헬스케어 기업: 카이저, 옴니헬스
2. **IPO**
    - Behavioral OS 기업
    - DTx + AI OS 하이브리드 모델
    - 글로벌 GLP-1 Behavioral Layer Provider
3. **Licensing**
    - Hospital AI
    - Insurance Behavior Models
    - GLP-1 Companion API
    - National Healthcare OS

---

# 9. 최소 데이터 임계치 (Strategic Threshold)

### 글로벌 독점 조건

- 5만~10만명
- 평균 90일 루틴 데이터
- 감정/섭식/포만감/행동/환경 루프가 모두 태깅된 상태
- GLP-1 사용자 5천~1만명 데이터 (중단 포함)

이 정도면

"인간의 섭식 루프"에 관한 세계 최강 모델이 된다.

---

# 10. Founder’s Role

- 은향(Founder)
    - IIOS Architecture Creator
    - Data Model Definition
    - GLP-1 시대 Behavior Model Creator
    - Product Vision (10년 내다보는 INTJ Ni-Ti)
    - Domain Knowledge Owner
    - Loop Taxonomy Inventor

---

# END OF SPEC v1.0